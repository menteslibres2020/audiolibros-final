(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vc={exports:{}},Ea={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function I_(){if(_m)return Ea;_m=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:r,type:i,key:u,ref:a!==void 0?a:null,props:o}}return Ea.Fragment=e,Ea.jsx=t,Ea.jsxs=t,Ea}var bm;function O_(){return bm||(bm=1,Vc.exports=I_()),Vc.exports}var S=O_(),qc={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm;function U_(){if(xm)return Ke;xm=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=_&&L[_]||L["@@iterator"],typeof L=="function"?L:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,T={};function A(L,V,F){this.props=L,this.context=V,this.refs=T,this.updater=F||b}A.prototype.isReactComponent={},A.prototype.setState=function(L,V){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,V,"setState")},A.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function k(){}k.prototype=A.prototype;function N(L,V,F){this.props=L,this.context=V,this.refs=T,this.updater=F||b}var D=N.prototype=new k;D.constructor=N,w(D,A.prototype),D.isPureReactComponent=!0;var I=Array.isArray,O={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function j(L,V,F,he,ie,ce){return F=ce.ref,{$$typeof:r,type:L,key:V,ref:F!==void 0?F:null,props:ce}}function ee(L,V){return j(L.type,V,void 0,void 0,void 0,L.props)}function B(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function Z(L){var V={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(F){return V[F]})}var ve=/\/+/g;function q(L,V){return typeof L=="object"&&L!==null&&L.key!=null?Z(""+L.key):V.toString(36)}function Q(){}function R(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Q,Q):(L.status="pending",L.then(function(V){L.status==="pending"&&(L.status="fulfilled",L.value=V)},function(V){L.status==="pending"&&(L.status="rejected",L.reason=V)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function re(L,V,F,he,ie){var ce=typeof L;(ce==="undefined"||ce==="boolean")&&(L=null);var Ae=!1;if(L===null)Ae=!0;else switch(ce){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(L.$$typeof){case r:case e:Ae=!0;break;case y:return Ae=L._init,re(Ae(L._payload),V,F,he,ie)}}if(Ae)return ie=ie(L),Ae=he===""?"."+q(L,0):he,I(ie)?(F="",Ae!=null&&(F=Ae.replace(ve,"$&/")+"/"),re(ie,V,F,"",function(Le){return Le})):ie!=null&&(B(ie)&&(ie=ee(ie,F+(ie.key==null||L&&L.key===ie.key?"":(""+ie.key).replace(ve,"$&/")+"/")+Ae)),V.push(ie)),1;Ae=0;var qe=he===""?".":he+":";if(I(L))for(var Ce=0;Ce<L.length;Ce++)he=L[Ce],ce=qe+q(he,Ce),Ae+=re(he,V,F,ce,ie);else if(Ce=x(L),typeof Ce=="function")for(L=Ce.call(L),Ce=0;!(he=L.next()).done;)he=he.value,ce=qe+q(he,Ce++),Ae+=re(he,V,F,ce,ie);else if(ce==="object"){if(typeof L.then=="function")return re(R(L),V,F,he,ie);throw V=String(L),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function se(L,V,F){if(L==null)return L;var he=[],ie=0;return re(L,he,"","",function(ce){return V.call(F,ce,ie++)}),he}function te(L){if(L._status===-1){var V=L._result;V=V(),V.then(function(F){(L._status===0||L._status===-1)&&(L._status=1,L._result=F)},function(F){(L._status===0||L._status===-1)&&(L._status=2,L._result=F)}),L._status===-1&&(L._status=0,L._result=V)}if(L._status===1)return L._result.default;throw L._result}var ye=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function ue(){}return Ke.Children={map:se,forEach:function(L,V,F){se(L,function(){V.apply(this,arguments)},F)},count:function(L){var V=0;return se(L,function(){V++}),V},toArray:function(L){return se(L,function(V){return V})||[]},only:function(L){if(!B(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ke.Component=A,Ke.Fragment=t,Ke.Profiler=a,Ke.PureComponent=N,Ke.StrictMode=i,Ke.Suspense=m,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ke.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ke.cache=function(L){return function(){return L.apply(null,arguments)}},Ke.cloneElement=function(L,V,F){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var he=w({},L.props),ie=L.key,ce=void 0;if(V!=null)for(Ae in V.ref!==void 0&&(ce=void 0),V.key!==void 0&&(ie=""+V.key),V)!G.call(V,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&V.ref===void 0||(he[Ae]=V[Ae]);var Ae=arguments.length-2;if(Ae===1)he.children=F;else if(1<Ae){for(var qe=Array(Ae),Ce=0;Ce<Ae;Ce++)qe[Ce]=arguments[Ce+2];he.children=qe}return j(L.type,ie,void 0,void 0,ce,he)},Ke.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Ke.createElement=function(L,V,F){var he,ie={},ce=null;if(V!=null)for(he in V.key!==void 0&&(ce=""+V.key),V)G.call(V,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ie[he]=V[he]);var Ae=arguments.length-2;if(Ae===1)ie.children=F;else if(1<Ae){for(var qe=Array(Ae),Ce=0;Ce<Ae;Ce++)qe[Ce]=arguments[Ce+2];ie.children=qe}if(L&&L.defaultProps)for(he in Ae=L.defaultProps,Ae)ie[he]===void 0&&(ie[he]=Ae[he]);return j(L,ce,void 0,void 0,null,ie)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(L){return{$$typeof:d,render:L}},Ke.isValidElement=B,Ke.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:te}},Ke.memo=function(L,V){return{$$typeof:p,type:L,compare:V===void 0?null:V}},Ke.startTransition=function(L){var V=O.T,F={};O.T=F;try{var he=L(),ie=O.S;ie!==null&&ie(F,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ue,ye)}catch(ce){ye(ce)}finally{O.T=V}},Ke.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ke.use=function(L){return O.H.use(L)},Ke.useActionState=function(L,V,F){return O.H.useActionState(L,V,F)},Ke.useCallback=function(L,V){return O.H.useCallback(L,V)},Ke.useContext=function(L){return O.H.useContext(L)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(L,V){return O.H.useDeferredValue(L,V)},Ke.useEffect=function(L,V){return O.H.useEffect(L,V)},Ke.useId=function(){return O.H.useId()},Ke.useImperativeHandle=function(L,V,F){return O.H.useImperativeHandle(L,V,F)},Ke.useInsertionEffect=function(L,V){return O.H.useInsertionEffect(L,V)},Ke.useLayoutEffect=function(L,V){return O.H.useLayoutEffect(L,V)},Ke.useMemo=function(L,V){return O.H.useMemo(L,V)},Ke.useOptimistic=function(L,V){return O.H.useOptimistic(L,V)},Ke.useReducer=function(L,V,F){return O.H.useReducer(L,V,F)},Ke.useRef=function(L){return O.H.useRef(L)},Ke.useState=function(L){return O.H.useState(L)},Ke.useSyncExternalStore=function(L,V,F){return O.H.useSyncExternalStore(L,V,F)},Ke.useTransition=function(){return O.H.useTransition()},Ke.version="19.0.0",Ke}var wm;function Nd(){return wm||(wm=1,qc.exports=U_()),qc.exports}var ke=Nd();const L_=Rd(ke);var Gc={exports:{}},Aa={},Fc={exports:{}},Hc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function P_(){return Tm||(Tm=1,(function(r){function e(se,te){var ye=se.length;se.push(te);e:for(;0<ye;){var ue=ye-1>>>1,L=se[ue];if(0<a(L,te))se[ue]=te,se[ye]=L,ye=ue;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var te=se[0],ye=se.pop();if(ye!==te){se[0]=ye;e:for(var ue=0,L=se.length,V=L>>>1;ue<V;){var F=2*(ue+1)-1,he=se[F],ie=F+1,ce=se[ie];if(0>a(he,ye))ie<L&&0>a(ce,he)?(se[ue]=ce,se[ie]=ye,ue=ie):(se[ue]=he,se[F]=ye,ue=F);else if(ie<L&&0>a(ce,ye))se[ue]=ce,se[ie]=ye,ue=ie;else break e}}return te}function a(se,te){var ye=se.sortIndex-te.sortIndex;return ye!==0?ye:se.id-te.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();r.unstable_now=function(){return u.now()-d}}var m=[],p=[],y=1,_=null,x=3,b=!1,w=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(se){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=se)i(p),te.sortIndex=te.expirationTime,e(m,te);else break;te=t(p)}}function I(se){if(T=!1,D(se),!w)if(t(m)!==null)w=!0,R();else{var te=t(p);te!==null&&re(I,te.startTime-se)}}var O=!1,G=-1,j=5,ee=-1;function B(){return!(r.unstable_now()-ee<j)}function Z(){if(O){var se=r.unstable_now();ee=se;var te=!0;try{e:{w=!1,T&&(T=!1,k(G),G=-1),b=!0;var ye=x;try{t:{for(D(se),_=t(m);_!==null&&!(_.expirationTime>se&&B());){var ue=_.callback;if(typeof ue=="function"){_.callback=null,x=_.priorityLevel;var L=ue(_.expirationTime<=se);if(se=r.unstable_now(),typeof L=="function"){_.callback=L,D(se),te=!0;break t}_===t(m)&&i(m),D(se)}else i(m);_=t(m)}if(_!==null)te=!0;else{var V=t(p);V!==null&&re(I,V.startTime-se),te=!1}}break e}finally{_=null,x=ye,b=!1}te=void 0}}finally{te?ve():O=!1}}}var ve;if(typeof N=="function")ve=function(){N(Z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Q=q.port2;q.port1.onmessage=Z,ve=function(){Q.postMessage(null)}}else ve=function(){A(Z,0)};function R(){O||(O=!0,ve())}function re(se,te){G=A(function(){se(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){w||b||(w=!0,R())},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(se){switch(x){case 1:case 2:case 3:var te=3;break;default:te=x}var ye=x;x=te;try{return se()}finally{x=ye}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,te){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ye=x;x=se;try{return te()}finally{x=ye}},r.unstable_scheduleCallback=function(se,te,ye){var ue=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ue+ye:ue):ye=ue,se){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ye+L,se={id:y++,callback:te,priorityLevel:se,startTime:ye,expirationTime:L,sortIndex:-1},ye>ue?(se.sortIndex=ye,e(p,se),t(m)===null&&se===t(p)&&(T?(k(G),G=-1):T=!0,re(I,ye-ue))):(se.sortIndex=L,e(m,se),w||b||(w=!0,R())),se},r.unstable_shouldYield=B,r.unstable_wrapCallback=function(se){var te=x;return function(){var ye=x;x=te;try{return se.apply(this,arguments)}finally{x=ye}}}})(Hc)),Hc}var Sm;function z_(){return Sm||(Sm=1,Fc.exports=P_()),Fc.exports}var jc={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function B_(){if(Cm)return Zt;Cm=1;var r=Nd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:m,containerInfo:p,implementation:y}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zt.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,y)},Zt.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},Zt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Zt.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Zt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,_=d(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:b}):y==="script"&&i.d.X(m,{crossOrigin:_,integrity:x,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Zt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Zt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=d(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Zt.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Zt.requestFormReset=function(m){i.d.r(m)},Zt.unstable_batchedUpdates=function(m,p){return m(p)},Zt.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},Zt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Zt.version="19.0.0",Zt}var Em;function V_(){if(Em)return jc.exports;Em=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jc.exports=B_(),jc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function q_(){if(Am)return Aa;Am=1;var r=z_(),e=Nd(),t=V_();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),b=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),I=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function G(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var j=Symbol.for("react.client.reference");function ee(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===j?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case m:return"Fragment";case d:return"Portal";case y:return"Profiler";case p:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Provider";case x:return(n._context.displayName||"Context")+".Consumer";case w:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return s=n.displayName||null,s!==null?s:ee(n.type)||"Memo";case N:s=n._payload,n=n._init;try{return ee(n(s))}catch{}}return null}var B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=Object.assign,ve,q;function Q(n){if(ve===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);ve=s&&s[1]||"",q=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+n+q}var R=!1;function re(n,s){if(!n||R)return"";R=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ae){var X=ae}Reflect.construct(n,[],me)}else{try{me.call()}catch(ae){X=ae}n.call(me.prototype)}}else{try{throw Error()}catch(ae){X=ae}(me=n())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ae){if(ae&&X&&typeof ae.stack=="string")return[ae.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),C=v[0],M=v[1];if(C&&M){var z=C.split(`
`),$=M.split(`
`);for(g=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;g<$.length&&!$[g].includes("DetermineComponentFrameRoot");)g++;if(c===z.length||g===$.length)for(c=z.length-1,g=$.length-1;1<=c&&0<=g&&z[c]!==$[g];)g--;for(;1<=c&&0<=g;c--,g--)if(z[c]!==$[g]){if(c!==1||g!==1)do if(c--,g--,0>g||z[c]!==$[g]){var oe=`
`+z[c].replace(" at new "," at ");return n.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",n.displayName)),oe}while(1<=c&&0<=g);break}}}finally{R=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Q(l):""}function se(n){switch(n.tag){case 26:case 27:case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return n=re(n.type,!1),n;case 11:return n=re(n.type.render,!1),n;case 1:return n=re(n.type,!0),n;default:return""}}function te(n){try{var s="";do s+=se(n),n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ye(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function ue(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function L(n){if(ye(n)!==n)throw Error(i(188))}function V(n){var s=n.alternate;if(!s){if(s=ye(n),s===null)throw Error(i(188));return s!==n?null:n}for(var l=n,c=s;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(c=g.return,c!==null){l=c;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return L(g),n;if(v===c)return L(g),s;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=g,c=v;else{for(var C=!1,M=g.child;M;){if(M===l){C=!0,l=g,c=v;break}if(M===c){C=!0,c=g,l=v;break}M=M.sibling}if(!C){for(M=v.child;M;){if(M===l){C=!0,l=v,c=g;break}if(M===c){C=!0,c=v,l=g;break}M=M.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?n:s}function F(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=F(n),s!==null)return s;n=n.sibling}return null}var he=Array.isArray,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Ae=[],qe=-1;function Ce(n){return{current:n}}function Le(n){0>qe||(n.current=Ae[qe],Ae[qe]=null,qe--)}function Fe(n,s){qe++,Ae[qe]=n.current,n.current=s}var nt=Ce(null),Ct=Ce(null),bt=Ce(null),E=Ce(null);function le(n,s){switch(Fe(bt,s),Fe(Ct,n),Fe(nt,null),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?Kp(s):0;break;default:if(n=n===8?s.parentNode:s,s=n.tagName,n=n.namespaceURI)n=Kp(n),s=Zp(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Le(nt),Fe(nt,s)}function ne(){Le(nt),Le(Ct),Le(bt)}function P(n){n.memoizedState!==null&&Fe(E,n);var s=nt.current,l=Zp(s,n.type);s!==l&&(Fe(Ct,n),Fe(nt,l))}function U(n){Ct.current===n&&(Le(nt),Le(Ct)),E.current===n&&(Le(E),xa._currentValue=ce)}var Y=Object.prototype.hasOwnProperty,fe=r.unstable_scheduleCallback,pe=r.unstable_cancelCallback,W=r.unstable_shouldYield,_e=r.unstable_requestPaint,we=r.unstable_now,xe=r.unstable_getCurrentPriorityLevel,Oe=r.unstable_ImmediatePriority,ot=r.unstable_UserBlockingPriority,Ye=r.unstable_NormalPriority,$t=r.unstable_LowPriority,Nn=r.unstable_IdlePriority,Jt=r.log,Vn=r.unstable_setDisableYieldValue,lt=null,ge=null;function Se(n){if(ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(lt,n,void 0,(n.current.flags&128)===128)}catch{}}function Ee(n){if(typeof Jt=="function"&&Vn(n),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(lt,n)}catch{}}var $e=Math.clz32?Math.clz32:ln,Qe=Math.log,dt=Math.LN2;function ln(n){return n>>>=0,n===0?32:31-(Qe(n)/dt|0)|0}var Dt=128,Wt=4194304;function rn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function $i(n,s){var l=n.pendingLanes;if(l===0)return 0;var c=0,g=n.suspendedLanes,v=n.pingedLanes,C=n.warmLanes;n=n.finishedLanes!==0;var M=l&134217727;return M!==0?(l=M&~g,l!==0?c=rn(l):(v&=M,v!==0?c=rn(v):n||(C=M&~C,C!==0&&(c=rn(C))))):(M=l&~g,M!==0?c=rn(M):v!==0?c=rn(v):n||(C=l&~C,C!==0&&(c=rn(C)))),c===0?0:s!==0&&s!==c&&(s&g)===0&&(g=c&-c,C=s&-s,g>=C||g===32&&(C&4194176)!==0)?s:c}function qn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Ms(n,s){switch(n){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lt(){var n=Dt;return Dt<<=1,(Dt&4194176)===0&&(Dt=128),n}function Gn(){var n=Wt;return Wt<<=1,(Wt&62914560)===0&&(Wt=4194304),n}function Mn(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Ds(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function wv(n,s,l,c,g,v){var C=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var M=n.entanglements,z=n.expirationTimes,$=n.hiddenUpdates;for(l=C&~l;0<l;){var oe=31-$e(l),me=1<<oe;M[oe]=0,z[oe]=-1;var X=$[oe];if(X!==null)for($[oe]=null,oe=0;oe<X.length;oe++){var ae=X[oe];ae!==null&&(ae.lane&=-536870913)}l&=~me}c!==0&&qd(n,c,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(C&~s))}function qd(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-$e(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|l&4194218}function Gd(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var c=31-$e(l),g=1<<c;g&s|n[c]&s&&(n[c]|=s),l&=~g}}function Fd(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Hd(){var n=ie.p;return n!==0?n:(n=window.event,n===void 0?32:hm(n.type))}function Tv(n,s){var l=ie.p;try{return ie.p=n,s()}finally{ie.p=l}}var yi=Math.random().toString(36).slice(2),Yt="__reactFiber$"+yi,sn="__reactProps$"+yi,Sr="__reactContainer$"+yi,Ll="__reactEvents$"+yi,Sv="__reactListeners$"+yi,Cv="__reactHandles$"+yi,jd="__reactResources$"+yi,Is="__reactMarker$"+yi;function Pl(n){delete n[Yt],delete n[sn],delete n[Ll],delete n[Sv],delete n[Cv]}function Yi(n){var s=n[Yt];if(s)return s;for(var l=n.parentNode;l;){if(s=l[Sr]||l[Yt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=Xp(n);n!==null;){if(l=n[Yt])return l;n=Xp(n)}return s}n=l,l=n.parentNode}return null}function Cr(n){if(n=n[Yt]||n[Sr]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Os(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Er(n){var s=n[jd];return s||(s=n[jd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pt(n){n[Is]=!0}var $d=new Set,Yd={};function Ki(n,s){Ar(n,s),Ar(n+"Capture",s)}function Ar(n,s){for(Yd[n]=s,n=0;n<s.length;n++)$d.add(s[n])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ev=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kd={},Zd={};function Av(n){return Y.call(Zd,n)?!0:Y.call(Kd,n)?!1:Ev.test(n)?Zd[n]=!0:(Kd[n]=!0,!1)}function Ja(n,s,l){if(Av(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function Wa(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function Xn(n,s,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+c)}}function gn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Jd(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function kv(n){var s=Jd(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(C){c=""+C,v.call(this,C)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Xa(n){n._valueTracker||(n._valueTracker=kv(n))}function Wd(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return n&&(c=Jd(n)?n.checked?"true":"false":n.value),n=c,n!==l?(s.setValue(n),!0):!1}function Qa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Rv=/[\n"\\]/g;function yn(n){return n.replace(Rv,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zl(n,s,l,c,g,v,C,M){n.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.type=C:n.removeAttribute("type"),s!=null?C==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+gn(s)):n.value!==""+gn(s)&&(n.value=""+gn(s)):C!=="submit"&&C!=="reset"||n.removeAttribute("value"),s!=null?Bl(n,C,gn(s)):l!=null?Bl(n,C,gn(l)):c!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.name=""+gn(M):n.removeAttribute("name")}function Xd(n,s,l,c,g,v,C,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||s!=null))return;l=l!=null?""+gn(l):"",s=s!=null?""+gn(s):l,M||s===n.value||(n.value=s),n.defaultValue=s}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=M?n.checked:!!c,n.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(n.name=C)}function Bl(n,s,l){s==="number"&&Qa(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function kr(n,s,l,c){if(n=n.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=s.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&c&&(n[l].defaultSelected=!0)}else{for(l=""+gn(l),s=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,c&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Qd(n,s,l){if(s!=null&&(s=""+gn(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+gn(l):""}function ef(n,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(he(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=gn(s),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c)}function Rr(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Nv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tf(n,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,l):typeof l!="number"||l===0||Nv.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function nf(n,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var g in s)c=s[g],s.hasOwnProperty(g)&&l[g]!==c&&tf(n,g,c)}else for(var v in s)s.hasOwnProperty(v)&&tf(n,v,s[v])}function Vl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eo(n){return Dv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ql=null;function Gl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Nr=null,Mr=null;function rf(n){var s=Cr(n);if(s&&(n=s.stateNode)){var l=n[sn]||null;e:switch(n=s.stateNode,s.type){case"input":if(zl(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+yn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==n&&c.form===n.form){var g=c[sn]||null;if(!g)throw Error(i(90));zl(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===n.form&&Wd(c)}break e;case"textarea":Qd(n,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&kr(n,!!l.multiple,s,!1)}}}var Fl=!1;function sf(n,s,l){if(Fl)return n(s,l);Fl=!0;try{var c=n(s);return c}finally{if(Fl=!1,(Nr!==null||Mr!==null)&&(zo(),Nr&&(s=Nr,n=Mr,Mr=Nr=null,rf(s),n)))for(s=0;s<n.length;s++)rf(n[s])}}function Us(n,s){var l=n.stateNode;if(l===null)return null;var c=l[sn]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Hl=!1;if(Wn)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){Hl=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{Hl=!1}var vi=null,jl=null,to=null;function af(){if(to)return to;var n,s=jl,l=s.length,c,g="value"in vi?vi.value:vi.textContent,v=g.length;for(n=0;n<l&&s[n]===g[n];n++);var C=l-n;for(c=1;c<=C&&s[l-c]===g[v-c];c++);return to=g.slice(n,1<c?1-c:void 0)}function no(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function io(){return!0}function of(){return!1}function an(n){function s(l,c,g,v,C){this._reactName=l,this._targetInst=g,this.type=c,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(l=n[M],this[M]=l?l(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?io:of,this.isPropagationStopped=of,this}return Z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=io)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=io)},persist:function(){},isPersistent:io}),s}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=an(Zi),Ps=Z({},Zi,{view:0,detail:0}),Iv=an(Ps),$l,Yl,zs,so=Z({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zs&&(zs&&n.type==="mousemove"?($l=n.screenX-zs.screenX,Yl=n.screenY-zs.screenY):Yl=$l=0,zs=n),$l)},movementY:function(n){return"movementY"in n?n.movementY:Yl}}),lf=an(so),Ov=Z({},so,{dataTransfer:0}),Uv=an(Ov),Lv=Z({},Ps,{relatedTarget:0}),Kl=an(Lv),Pv=Z({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),zv=an(Pv),Bv=Z({},Zi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Vv=an(Bv),qv=Z({},Zi,{data:0}),uf=an(qv),Gv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jv(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Hv[n])?!!s[n]:!1}function Zl(){return jv}var $v=Z({},Ps,{key:function(n){if(n.key){var s=Gv[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=no(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Fv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(n){return n.type==="keypress"?no(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?no(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Yv=an($v),Kv=Z({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cf=an(Kv),Zv=Z({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),Jv=an(Zv),Wv=Z({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xv=an(Wv),Qv=Z({},so,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),e0=an(Qv),t0=Z({},Zi,{newState:0,oldState:0}),n0=an(t0),i0=[9,13,27,32],Jl=Wn&&"CompositionEvent"in window,Bs=null;Wn&&"documentMode"in document&&(Bs=document.documentMode);var r0=Wn&&"TextEvent"in window&&!Bs,df=Wn&&(!Jl||Bs&&8<Bs&&11>=Bs),ff=" ",hf=!1;function pf(n,s){switch(n){case"keyup":return i0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dr=!1;function s0(n,s){switch(n){case"compositionend":return mf(s);case"keypress":return s.which!==32?null:(hf=!0,ff);case"textInput":return n=s.data,n===ff&&hf?null:n;default:return null}}function a0(n,s){if(Dr)return n==="compositionend"||!Jl&&pf(n,s)?(n=af(),to=jl=vi=null,Dr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return df&&s.locale!=="ko"?null:s.data;default:return null}}var o0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!o0[n.type]:s==="textarea"}function yf(n,s,l,c){Nr?Mr?Mr.push(c):Mr=[c]:Nr=c,s=Fo(s,"onChange"),0<s.length&&(l=new ro("onChange","change",null,l,c),n.push({event:l,listeners:s}))}var Vs=null,qs=null;function l0(n){Fp(n,0)}function ao(n){var s=Os(n);if(Wd(s))return n}function vf(n,s){if(n==="change")return s}var _f=!1;if(Wn){var Wl;if(Wn){var Xl="oninput"in document;if(!Xl){var bf=document.createElement("div");bf.setAttribute("oninput","return;"),Xl=typeof bf.oninput=="function"}Wl=Xl}else Wl=!1;_f=Wl&&(!document.documentMode||9<document.documentMode)}function xf(){Vs&&(Vs.detachEvent("onpropertychange",wf),qs=Vs=null)}function wf(n){if(n.propertyName==="value"&&ao(qs)){var s=[];yf(s,qs,n,Gl(n)),sf(l0,s)}}function u0(n,s,l){n==="focusin"?(xf(),Vs=s,qs=l,Vs.attachEvent("onpropertychange",wf)):n==="focusout"&&xf()}function c0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ao(qs)}function d0(n,s){if(n==="click")return ao(s)}function f0(n,s){if(n==="input"||n==="change")return ao(s)}function h0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var un=typeof Object.is=="function"?Object.is:h0;function Gs(n,s){if(un(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var g=l[c];if(!Y.call(s,g)||!un(n[g],s[g]))return!1}return!0}function Tf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sf(n,s){var l=Tf(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=s&&c>=s)return{node:l,offset:s-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Tf(l)}}function Cf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Cf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Ef(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Qa(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=Qa(n.document)}return s}function Ql(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function p0(n,s){var l=Ef(s);s=n.focusedElem;var c=n.selectionRange;if(l!==s&&s&&s.ownerDocument&&Cf(s.ownerDocument.documentElement,s)){if(c!==null&&Ql(s)){if(n=c.start,l=c.end,l===void 0&&(l=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(l,s.value.length);else if(l=(n=s.ownerDocument||document)&&n.defaultView||window,l.getSelection){l=l.getSelection();var g=s.textContent.length,v=Math.min(c.start,g);c=c.end===void 0?v:Math.min(c.end,g),!l.extend&&v>c&&(g=c,c=v,v=g),g=Sf(s,v);var C=Sf(s,c);g&&C&&(l.rangeCount!==1||l.anchorNode!==g.node||l.anchorOffset!==g.offset||l.focusNode!==C.node||l.focusOffset!==C.offset)&&(n=n.createRange(),n.setStart(g.node,g.offset),l.removeAllRanges(),v>c?(l.addRange(n),l.extend(C.node,C.offset)):(n.setEnd(C.node,C.offset),l.addRange(n)))}}for(n=[],l=s;l=l.parentNode;)l.nodeType===1&&n.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)l=n[s],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var m0=Wn&&"documentMode"in document&&11>=document.documentMode,Ir=null,eu=null,Fs=null,tu=!1;function Af(n,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;tu||Ir==null||Ir!==Qa(c)||(c=Ir,"selectionStart"in c&&Ql(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Fs&&Gs(Fs,c)||(Fs=c,c=Fo(eu,"onSelect"),0<c.length&&(s=new ro("onSelect","select",null,s,l),n.push({event:s,listeners:c}),s.target=Ir)))}function Ji(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Or={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},nu={},kf={};Wn&&(kf=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function Wi(n){if(nu[n])return nu[n];if(!Or[n])return n;var s=Or[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in kf)return nu[n]=s[l];return n}var Rf=Wi("animationend"),Nf=Wi("animationiteration"),Mf=Wi("animationstart"),g0=Wi("transitionrun"),y0=Wi("transitionstart"),v0=Wi("transitioncancel"),Df=Wi("transitionend"),If=new Map,Of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Dn(n,s){If.set(n,s),Ki(s,[n])}var vn=[],Ur=0,iu=0;function oo(){for(var n=Ur,s=iu=Ur=0;s<n;){var l=vn[s];vn[s++]=null;var c=vn[s];vn[s++]=null;var g=vn[s];vn[s++]=null;var v=vn[s];if(vn[s++]=null,c!==null&&g!==null){var C=c.pending;C===null?g.next=g:(g.next=C.next,C.next=g),c.pending=g}v!==0&&Uf(l,g,v)}}function lo(n,s,l,c){vn[Ur++]=n,vn[Ur++]=s,vn[Ur++]=l,vn[Ur++]=c,iu|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function ru(n,s,l,c){return lo(n,s,l,c),uo(n)}function _i(n,s){return lo(n,null,null,s),uo(n)}function Uf(n,s,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var g=!1,v=n.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;g&&s!==null&&n.tag===3&&(v=n.stateNode,g=31-$e(l),v=v.hiddenUpdates,n=v[g],n===null?v[g]=[s]:n.push(s),s.lane=l|536870912)}function uo(n){if(50<pa)throw pa=0,cc=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Lr={},Lf=new WeakMap;function _n(n,s){if(typeof n=="object"&&n!==null){var l=Lf.get(n);return l!==void 0?l:(s={value:n,source:s,stack:te(s)},Lf.set(n,s),s)}return{value:n,source:s,stack:te(s)}}var Pr=[],zr=0,co=null,fo=0,bn=[],xn=0,Xi=null,Qn=1,ei="";function Qi(n,s){Pr[zr++]=fo,Pr[zr++]=co,co=n,fo=s}function Pf(n,s,l){bn[xn++]=Qn,bn[xn++]=ei,bn[xn++]=Xi,Xi=n;var c=Qn;n=ei;var g=32-$e(c)-1;c&=~(1<<g),l+=1;var v=32-$e(s)+g;if(30<v){var C=g-g%5;v=(c&(1<<C)-1).toString(32),c>>=C,g-=C,Qn=1<<32-$e(s)+g|l<<g|c,ei=v+n}else Qn=1<<v|l<<g|c,ei=n}function su(n){n.return!==null&&(Qi(n,1),Pf(n,1,0))}function au(n){for(;n===co;)co=Pr[--zr],Pr[zr]=null,fo=Pr[--zr],Pr[zr]=null;for(;n===Xi;)Xi=bn[--xn],bn[xn]=null,ei=bn[--xn],bn[xn]=null,Qn=bn[--xn],bn[xn]=null}var Xt=null,qt=null,rt=!1,In=null,Fn=!1,ou=Error(i(519));function er(n){var s=Error(i(418,""));throw $s(_n(s,n)),ou}function zf(n){var s=n.stateNode,l=n.type,c=n.memoizedProps;switch(s[Yt]=n,s[sn]=c,l){case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":case"embed":et("load",s);break;case"video":case"audio":for(l=0;l<ga.length;l++)et(ga[l],s);break;case"source":et("error",s);break;case"img":case"image":case"link":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"input":et("invalid",s),Xd(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Xa(s);break;case"select":et("invalid",s);break;case"textarea":et("invalid",s),ef(s,c.value,c.defaultValue,c.children),Xa(s)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||Yp(s.textContent,l)?(c.popover!=null&&(et("beforetoggle",s),et("toggle",s)),c.onScroll!=null&&et("scroll",s),c.onScrollEnd!=null&&et("scrollend",s),c.onClick!=null&&(s.onclick=Ho),s=!0):s=!1,s||er(n)}function Bf(n){for(Xt=n.return;Xt;)switch(Xt.tag){case 3:case 27:Fn=!0;return;case 5:case 13:Fn=!1;return;default:Xt=Xt.return}}function Hs(n){if(n!==Xt)return!1;if(!rt)return Bf(n),rt=!0,!1;var s=!1,l;if((l=n.tag!==3&&n.tag!==27)&&((l=n.tag===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Ac(n.type,n.memoizedProps)),l=!l),l&&(s=!0),s&&qt&&er(n),Bf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(s===0){qt=Un(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;n=n.nextSibling}qt=null}}else qt=Xt?Un(n.stateNode.nextSibling):null;return!0}function js(){qt=Xt=null,rt=!1}function $s(n){In===null?In=[n]:In.push(n)}var Ys=Error(i(460)),Vf=Error(i(474)),lu={then:function(){}};function qf(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ho(){}function Gf(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(ho,ho),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Ys?Error(i(483)):n;default:if(typeof s.status=="string")s.then(ho,ho);else{if(n=ht,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=c}},function(c){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Ys?Error(i(483)):n}throw Ks=s,Ys}}var Ks=null;function Ff(){if(Ks===null)throw Error(i(459));var n=Ks;return Ks=null,n}var Br=null,Zs=0;function po(n){var s=Zs;return Zs+=1,Br===null&&(Br=[]),Gf(Br,n,s)}function Js(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function mo(n,s){throw s.$$typeof===o?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Hf(n){var s=n._init;return s(n._payload)}function jf(n){function s(K,H){if(n){var J=K.deletions;J===null?(K.deletions=[H],K.flags|=16):J.push(H)}}function l(K,H){if(!n)return null;for(;H!==null;)s(K,H),H=H.sibling;return null}function c(K){for(var H=new Map;K!==null;)K.key!==null?H.set(K.key,K):H.set(K.index,K),K=K.sibling;return H}function g(K,H){return K=Mi(K,H),K.index=0,K.sibling=null,K}function v(K,H,J){return K.index=J,n?(J=K.alternate,J!==null?(J=J.index,J<H?(K.flags|=33554434,H):J):(K.flags|=33554434,H)):(K.flags|=1048576,H)}function C(K){return n&&K.alternate===null&&(K.flags|=33554434),K}function M(K,H,J,de){return H===null||H.tag!==6?(H=nc(J,K.mode,de),H.return=K,H):(H=g(H,J),H.return=K,H)}function z(K,H,J,de){var Re=J.type;return Re===m?oe(K,H,J.props.children,de,J.key):H!==null&&(H.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===N&&Hf(Re)===H.type)?(H=g(H,J.props),Js(H,J),H.return=K,H):(H=Io(J.type,J.key,J.props,null,K.mode,de),Js(H,J),H.return=K,H)}function $(K,H,J,de){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=ic(J,K.mode,de),H.return=K,H):(H=g(H,J.children||[]),H.return=K,H)}function oe(K,H,J,de,Re){return H===null||H.tag!==7?(H=cr(J,K.mode,de,Re),H.return=K,H):(H=g(H,J),H.return=K,H)}function me(K,H,J){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=nc(""+H,K.mode,J),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case u:return J=Io(H.type,H.key,H.props,null,K.mode,J),Js(J,H),J.return=K,J;case d:return H=ic(H,K.mode,J),H.return=K,H;case N:var de=H._init;return H=de(H._payload),me(K,H,J)}if(he(H)||G(H))return H=cr(H,K.mode,J,null),H.return=K,H;if(typeof H.then=="function")return me(K,po(H),J);if(H.$$typeof===b)return me(K,No(K,H),J);mo(K,H)}return null}function X(K,H,J,de){var Re=H!==null?H.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Re!==null?null:M(K,H,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case u:return J.key===Re?z(K,H,J,de):null;case d:return J.key===Re?$(K,H,J,de):null;case N:return Re=J._init,J=Re(J._payload),X(K,H,J,de)}if(he(J)||G(J))return Re!==null?null:oe(K,H,J,de,null);if(typeof J.then=="function")return X(K,H,po(J),de);if(J.$$typeof===b)return X(K,H,No(K,J),de);mo(K,J)}return null}function ae(K,H,J,de,Re){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return K=K.get(J)||null,M(H,K,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case u:return K=K.get(de.key===null?J:de.key)||null,z(H,K,de,Re);case d:return K=K.get(de.key===null?J:de.key)||null,$(H,K,de,Re);case N:var We=de._init;return de=We(de._payload),ae(K,H,J,de,Re)}if(he(de)||G(de))return K=K.get(J)||null,oe(H,K,de,Re,null);if(typeof de.then=="function")return ae(K,H,J,po(de),Re);if(de.$$typeof===b)return ae(K,H,J,No(H,de),Re);mo(H,de)}return null}function De(K,H,J,de){for(var Re=null,We=null,Ue=H,Pe=H=0,Vt=null;Ue!==null&&Pe<J.length;Pe++){Ue.index>Pe?(Vt=Ue,Ue=null):Vt=Ue.sibling;var st=X(K,Ue,J[Pe],de);if(st===null){Ue===null&&(Ue=Vt);break}n&&Ue&&st.alternate===null&&s(K,Ue),H=v(st,H,Pe),We===null?Re=st:We.sibling=st,We=st,Ue=Vt}if(Pe===J.length)return l(K,Ue),rt&&Qi(K,Pe),Re;if(Ue===null){for(;Pe<J.length;Pe++)Ue=me(K,J[Pe],de),Ue!==null&&(H=v(Ue,H,Pe),We===null?Re=Ue:We.sibling=Ue,We=Ue);return rt&&Qi(K,Pe),Re}for(Ue=c(Ue);Pe<J.length;Pe++)Vt=ae(Ue,K,Pe,J[Pe],de),Vt!==null&&(n&&Vt.alternate!==null&&Ue.delete(Vt.key===null?Pe:Vt.key),H=v(Vt,H,Pe),We===null?Re=Vt:We.sibling=Vt,We=Vt);return n&&Ue.forEach(function(zi){return s(K,zi)}),rt&&Qi(K,Pe),Re}function je(K,H,J,de){if(J==null)throw Error(i(151));for(var Re=null,We=null,Ue=H,Pe=H=0,Vt=null,st=J.next();Ue!==null&&!st.done;Pe++,st=J.next()){Ue.index>Pe?(Vt=Ue,Ue=null):Vt=Ue.sibling;var zi=X(K,Ue,st.value,de);if(zi===null){Ue===null&&(Ue=Vt);break}n&&Ue&&zi.alternate===null&&s(K,Ue),H=v(zi,H,Pe),We===null?Re=zi:We.sibling=zi,We=zi,Ue=Vt}if(st.done)return l(K,Ue),rt&&Qi(K,Pe),Re;if(Ue===null){for(;!st.done;Pe++,st=J.next())st=me(K,st.value,de),st!==null&&(H=v(st,H,Pe),We===null?Re=st:We.sibling=st,We=st);return rt&&Qi(K,Pe),Re}for(Ue=c(Ue);!st.done;Pe++,st=J.next())st=ae(Ue,K,Pe,st.value,de),st!==null&&(n&&st.alternate!==null&&Ue.delete(st.key===null?Pe:st.key),H=v(st,H,Pe),We===null?Re=st:We.sibling=st,We=st);return n&&Ue.forEach(function(D_){return s(K,D_)}),rt&&Qi(K,Pe),Re}function Tt(K,H,J,de){if(typeof J=="object"&&J!==null&&J.type===m&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case u:e:{for(var Re=J.key;H!==null;){if(H.key===Re){if(Re=J.type,Re===m){if(H.tag===7){l(K,H.sibling),de=g(H,J.props.children),de.return=K,K=de;break e}}else if(H.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===N&&Hf(Re)===H.type){l(K,H.sibling),de=g(H,J.props),Js(de,J),de.return=K,K=de;break e}l(K,H);break}else s(K,H);H=H.sibling}J.type===m?(de=cr(J.props.children,K.mode,de,J.key),de.return=K,K=de):(de=Io(J.type,J.key,J.props,null,K.mode,de),Js(de,J),de.return=K,K=de)}return C(K);case d:e:{for(Re=J.key;H!==null;){if(H.key===Re)if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){l(K,H.sibling),de=g(H,J.children||[]),de.return=K,K=de;break e}else{l(K,H);break}else s(K,H);H=H.sibling}de=ic(J,K.mode,de),de.return=K,K=de}return C(K);case N:return Re=J._init,J=Re(J._payload),Tt(K,H,J,de)}if(he(J))return De(K,H,J,de);if(G(J)){if(Re=G(J),typeof Re!="function")throw Error(i(150));return J=Re.call(J),je(K,H,J,de)}if(typeof J.then=="function")return Tt(K,H,po(J),de);if(J.$$typeof===b)return Tt(K,H,No(K,J),de);mo(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,H!==null&&H.tag===6?(l(K,H.sibling),de=g(H,J),de.return=K,K=de):(l(K,H),de=nc(J,K.mode,de),de.return=K,K=de),C(K)):l(K,H)}return function(K,H,J,de){try{Zs=0;var Re=Tt(K,H,J,de);return Br=null,Re}catch(Ue){if(Ue===Ys)throw Ue;var We=Cn(29,Ue,null,K.mode);return We.lanes=de,We.return=K,We}finally{}}}var tr=jf(!0),$f=jf(!1),Vr=Ce(null),go=Ce(0);function Yf(n,s){n=di,Fe(go,n),Fe(Vr,s),di=n|s.baseLanes}function uu(){Fe(go,di),Fe(Vr,Vr.current)}function cu(){di=go.current,Le(Vr),Le(go)}var wn=Ce(null),Hn=null;function bi(n){var s=n.alternate;Fe(It,It.current&1),Fe(wn,n),Hn===null&&(s===null||Vr.current!==null||s.memoizedState!==null)&&(Hn=n)}function Kf(n){if(n.tag===22){if(Fe(It,It.current),Fe(wn,n),Hn===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Hn=n)}}else xi()}function xi(){Fe(It,It.current),Fe(wn,wn.current)}function ti(n){Le(wn),Hn===n&&(Hn=null),Le(It)}var It=Ce(0);function yo(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _0=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},b0=r.unstable_scheduleCallback,x0=r.unstable_NormalPriority,Ot={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function du(){return{controller:new _0,data:new Map,refCount:0}}function Ws(n){n.refCount--,n.refCount===0&&b0(x0,function(){n.controller.abort()})}var Xs=null,fu=0,qr=0,Gr=null;function w0(n,s){if(Xs===null){var l=Xs=[];fu=0,qr=vc(),Gr={status:"pending",value:void 0,then:function(c){l.push(c)}}}return fu++,s.then(Zf,Zf),s}function Zf(){if(--fu===0&&Xs!==null){Gr!==null&&(Gr.status="fulfilled");var n=Xs;Xs=null,qr=0,Gr=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function T0(n,s){var l=[],c={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var g=0;g<l.length;g++)(0,l[g])(s)},function(g){for(c.status="rejected",c.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),c}var Jf=B.S;B.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&w0(n,s),Jf!==null&&Jf(n,s)};var nr=Ce(null);function hu(){var n=nr.current;return n!==null?n:ht.pooledCache}function vo(n,s){s===null?Fe(nr,nr.current):Fe(nr,s.pool)}function Wf(){var n=hu();return n===null?null:{parent:Ot._currentValue,pool:n}}var wi=0,Je=null,ut=null,At=null,_o=!1,Fr=!1,ir=!1,bo=0,Qs=0,Hr=null,S0=0;function Et(){throw Error(i(321))}function pu(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!un(n[l],s[l]))return!1;return!0}function mu(n,s,l,c,g,v){return wi=v,Je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=n===null||n.memoizedState===null?rr:Ti,ir=!1,v=l(c,g),ir=!1,Fr&&(v=Qf(s,l,c,g)),Xf(n),v}function Xf(n){B.H=jn;var s=ut!==null&&ut.next!==null;if(wi=0,At=ut=Je=null,_o=!1,Qs=0,Hr=null,s)throw Error(i(300));n===null||zt||(n=n.dependencies,n!==null&&Ro(n)&&(zt=!0))}function Qf(n,s,l,c){Je=n;var g=0;do{if(Fr&&(Hr=null),Qs=0,Fr=!1,25<=g)throw Error(i(301));if(g+=1,At=ut=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}B.H=sr,v=s(l,c)}while(Fr);return v}function C0(){var n=B.H,s=n.useState()[0];return s=typeof s.then=="function"?ea(s):s,n=n.useState()[0],(ut!==null?ut.memoizedState:null)!==n&&(Je.flags|=1024),s}function gu(){var n=bo!==0;return bo=0,n}function yu(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function vu(n){if(_o){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}_o=!1}wi=0,At=ut=Je=null,Fr=!1,Qs=bo=0,Hr=null}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Je.memoizedState=At=n:At=At.next=n,At}function kt(){if(ut===null){var n=Je.alternate;n=n!==null?n.memoizedState:null}else n=ut.next;var s=At===null?Je.memoizedState:At.next;if(s!==null)At=s,ut=n;else{if(n===null)throw Je.alternate===null?Error(i(467)):Error(i(310));ut=n,n={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},At===null?Je.memoizedState=At=n:At=At.next=n}return At}var xo;xo=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ea(n){var s=Qs;return Qs+=1,Hr===null&&(Hr=[]),n=Gf(Hr,n,s),s=Je,(At===null?s.memoizedState:At.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?rr:Ti),n}function wo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ea(n);if(n.$$typeof===b)return Kt(n)}throw Error(i(438,String(n)))}function _u(n){var s=null,l=Je.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Je.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=xo(),Je.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),c=0;c<n;c++)l[c]=I;return s.index++,l}function ni(n,s){return typeof s=="function"?s(n):s}function To(n){var s=kt();return bu(s,ut,n)}function bu(n,s,l){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var g=n.baseQueue,v=c.pending;if(v!==null){if(g!==null){var C=g.next;g.next=v.next,v.next=C}s.baseQueue=g=v,c.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{s=g.next;var M=C=null,z=null,$=s,oe=!1;do{var me=$.lane&-536870913;if(me!==$.lane?(it&me)===me:(wi&me)===me){var X=$.revertLane;if(X===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),me===qr&&(oe=!0);else if((wi&X)===X){$=$.next,X===qr&&(oe=!0);continue}else me={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},z===null?(M=z=me,C=v):z=z.next=me,Je.lanes|=X,Di|=X;me=$.action,ir&&l(v,me),v=$.hasEagerState?$.eagerState:l(v,me)}else X={lane:me,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},z===null?(M=z=X,C=v):z=z.next=X,Je.lanes|=me,Di|=me;$=$.next}while($!==null&&$!==s);if(z===null?C=v:z.next=M,!un(v,n.memoizedState)&&(zt=!0,oe&&(l=Gr,l!==null)))throw l;n.memoizedState=v,n.baseState=C,n.baseQueue=z,c.lastRenderedState=v}return g===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function xu(n){var s=kt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=n;var c=l.dispatch,g=l.pending,v=s.memoizedState;if(g!==null){l.pending=null;var C=g=g.next;do v=n(v,C.action),C=C.next;while(C!==g);un(v,s.memoizedState)||(zt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,c]}function eh(n,s,l){var c=Je,g=kt(),v=rt;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=s();var C=!un((ut||g).memoizedState,l);if(C&&(g.memoizedState=l,zt=!0),g=g.queue,Su(ih.bind(null,c,g,n),[n]),g.getSnapshot!==s||C||At!==null&&At.memoizedState.tag&1){if(c.flags|=2048,jr(9,nh.bind(null,c,g,l,s),{destroy:void 0},null),ht===null)throw Error(i(349));v||(wi&60)!==0||th(c,s,l)}return l}function th(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=Je.updateQueue,s===null?(s=xo(),Je.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function nh(n,s,l,c){s.value=l,s.getSnapshot=c,rh(s)&&sh(n)}function ih(n,s,l){return l(function(){rh(s)&&sh(n)})}function rh(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!un(n,l)}catch{return!0}}function sh(n){var s=_i(n,2);s!==null&&Qt(s,n,2)}function wu(n){var s=on();if(typeof n=="function"){var l=n;if(n=l(),ir){Ee(!0);try{l()}finally{Ee(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:n},s}function ah(n,s,l,c){return n.baseState=l,bu(n,ut,typeof c=="function"?c:ni)}function E0(n,s,l,c,g){if(Eo(n))throw Error(i(485));if(n=s.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){v.listeners.push(C)}};B.T!==null?l(!0):v.isTransition=!1,c(v),l=s.pending,l===null?(v.next=s.pending=v,oh(s,v)):(v.next=l.next,s.pending=l.next=v)}}function oh(n,s){var l=s.action,c=s.payload,g=n.state;if(s.isTransition){var v=B.T,C={};B.T=C;try{var M=l(g,c),z=B.S;z!==null&&z(C,M),lh(n,s,M)}catch($){Tu(n,s,$)}finally{B.T=v}}else try{v=l(g,c),lh(n,s,v)}catch($){Tu(n,s,$)}}function lh(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){uh(n,s,c)},function(c){return Tu(n,s,c)}):uh(n,s,l)}function uh(n,s,l){s.status="fulfilled",s.value=l,ch(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,oh(n,l)))}function Tu(n,s,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,ch(s),s=s.next;while(s!==c)}n.action=null}function ch(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function dh(n,s){return s}function fh(n,s){if(rt){var l=ht.formState;if(l!==null){e:{var c=Je;if(rt){if(qt){t:{for(var g=qt,v=Fn;g.nodeType!==8;){if(!v){g=null;break t}if(g=Un(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){qt=Un(g.nextSibling),c=g.data==="F!";break e}}er(c)}c=!1}c&&(s=l[0])}}return l=on(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:s},l.queue=c,l=Nh.bind(null,Je,c),c.dispatch=l,c=wu(!1),v=Ru.bind(null,Je,!1,c.queue),c=on(),g={state:s,dispatch:null,action:n,pending:null},c.queue=g,l=E0.bind(null,Je,g,v,l),g.dispatch=l,c.memoizedState=n,[s,l,!1]}function hh(n){var s=kt();return ph(s,ut,n)}function ph(n,s,l){s=bu(n,s,dh)[0],n=To(ni)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?ea(s):s;var c=kt(),g=c.queue,v=g.dispatch;return l!==c.memoizedState&&(Je.flags|=2048,jr(9,A0.bind(null,g,l),{destroy:void 0},null)),[s,v,n]}function A0(n,s){n.action=s}function mh(n){var s=kt(),l=ut;if(l!==null)return ph(s,l,n);kt(),s=s.memoizedState,l=kt();var c=l.queue.dispatch;return l.memoizedState=n,[s,c,!1]}function jr(n,s,l,c){return n={tag:n,create:s,inst:l,deps:c,next:null},s=Je.updateQueue,s===null&&(s=xo(),Je.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,s.lastEffect=n),n}function gh(){return kt().memoizedState}function So(n,s,l,c){var g=on();Je.flags|=n,g.memoizedState=jr(1|s,l,{destroy:void 0},c===void 0?null:c)}function Co(n,s,l,c){var g=kt();c=c===void 0?null:c;var v=g.memoizedState.inst;ut!==null&&c!==null&&pu(c,ut.memoizedState.deps)?g.memoizedState=jr(s,l,v,c):(Je.flags|=n,g.memoizedState=jr(1|s,l,v,c))}function yh(n,s){So(8390656,8,n,s)}function Su(n,s){Co(2048,8,n,s)}function vh(n,s){return Co(4,2,n,s)}function _h(n,s){return Co(4,4,n,s)}function bh(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function xh(n,s,l){l=l!=null?l.concat([n]):null,Co(4,4,bh.bind(null,s,n),l)}function Cu(){}function wh(n,s){var l=kt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&pu(s,c[1])?c[0]:(l.memoizedState=[n,s],n)}function Th(n,s){var l=kt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&pu(s,c[1]))return c[0];if(c=n(),ir){Ee(!0);try{n()}finally{Ee(!1)}}return l.memoizedState=[c,s],c}function Eu(n,s,l){return l===void 0||(wi&1073741824)!==0?n.memoizedState=s:(n.memoizedState=l,n=Cp(),Je.lanes|=n,Di|=n,l)}function Sh(n,s,l,c){return un(l,s)?l:Vr.current!==null?(n=Eu(n,l,c),un(n,s)||(zt=!0),n):(wi&42)===0?(zt=!0,n.memoizedState=l):(n=Cp(),Je.lanes|=n,Di|=n,s)}function Ch(n,s,l,c,g){var v=ie.p;ie.p=v!==0&&8>v?v:8;var C=B.T,M={};B.T=M,Ru(n,!1,s,l);try{var z=g(),$=B.S;if($!==null&&$(M,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var oe=T0(z,c);ta(n,s,oe,hn(n))}else ta(n,s,c,hn(n))}catch(me){ta(n,s,{then:function(){},status:"rejected",reason:me},hn())}finally{ie.p=v,B.T=C}}function k0(){}function Au(n,s,l,c){if(n.tag!==5)throw Error(i(476));var g=Eh(n).queue;Ch(n,g,s,ce,l===null?k0:function(){return Ah(n),l(c)})}function Eh(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:ce},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Ah(n){var s=Eh(n).next.queue;ta(n,s,{},hn())}function ku(){return Kt(xa)}function kh(){return kt().memoizedState}function Rh(){return kt().memoizedState}function R0(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=hn();n=Ei(l);var c=Ai(s,n,l);c!==null&&(Qt(c,s,l),ra(c,s,l)),s={cache:du()},n.payload=s;return}s=s.return}}function N0(n,s,l){var c=hn();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Eo(n)?Mh(s,l):(l=ru(n,s,l,c),l!==null&&(Qt(l,n,c),Dh(l,s,c)))}function Nh(n,s,l){var c=hn();ta(n,s,l,c)}function ta(n,s,l,c){var g={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Eo(n))Mh(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var C=s.lastRenderedState,M=v(C,l);if(g.hasEagerState=!0,g.eagerState=M,un(M,C))return lo(n,s,g,0),ht===null&&oo(),!1}catch{}finally{}if(l=ru(n,s,g,c),l!==null)return Qt(l,n,c),Dh(l,s,c),!0}return!1}function Ru(n,s,l,c){if(c={lane:2,revertLane:vc(),action:c,hasEagerState:!1,eagerState:null,next:null},Eo(n)){if(s)throw Error(i(479))}else s=ru(n,l,c,2),s!==null&&Qt(s,n,2)}function Eo(n){var s=n.alternate;return n===Je||s!==null&&s===Je}function Mh(n,s){Fr=_o=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Dh(n,s,l){if((l&4194176)!==0){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,Gd(n,l)}}var jn={readContext:Kt,use:wo,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et};jn.useCacheRefresh=Et,jn.useMemoCache=Et,jn.useHostTransitionStatus=Et,jn.useFormState=Et,jn.useActionState=Et,jn.useOptimistic=Et;var rr={readContext:Kt,use:wo,useCallback:function(n,s){return on().memoizedState=[n,s===void 0?null:s],n},useContext:Kt,useEffect:yh,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,So(4194308,4,bh.bind(null,s,n),l)},useLayoutEffect:function(n,s){return So(4194308,4,n,s)},useInsertionEffect:function(n,s){So(4,2,n,s)},useMemo:function(n,s){var l=on();s=s===void 0?null:s;var c=n();if(ir){Ee(!0);try{n()}finally{Ee(!1)}}return l.memoizedState=[c,s],c},useReducer:function(n,s,l){var c=on();if(l!==void 0){var g=l(s);if(ir){Ee(!0);try{l(s)}finally{Ee(!1)}}}else g=s;return c.memoizedState=c.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},c.queue=n,n=n.dispatch=N0.bind(null,Je,n),[c.memoizedState,n]},useRef:function(n){var s=on();return n={current:n},s.memoizedState=n},useState:function(n){n=wu(n);var s=n.queue,l=Nh.bind(null,Je,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:Cu,useDeferredValue:function(n,s){var l=on();return Eu(l,n,s)},useTransition:function(){var n=wu(!1);return n=Ch.bind(null,Je,n.queue,!0,!1),on().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var c=Je,g=on();if(rt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ht===null)throw Error(i(349));(it&60)!==0||th(c,s,l)}g.memoizedState=l;var v={value:l,getSnapshot:s};return g.queue=v,yh(ih.bind(null,c,v,n),[n]),c.flags|=2048,jr(9,nh.bind(null,c,v,l,s),{destroy:void 0},null),l},useId:function(){var n=on(),s=ht.identifierPrefix;if(rt){var l=ei,c=Qn;l=(c&~(1<<32-$e(c)-1)).toString(32)+l,s=":"+s+"R"+l,l=bo++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=S0++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},useCacheRefresh:function(){return on().memoizedState=R0.bind(null,Je)}};rr.useMemoCache=_u,rr.useHostTransitionStatus=ku,rr.useFormState=fh,rr.useActionState=fh,rr.useOptimistic=function(n){var s=on();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Ru.bind(null,Je,!0,l),l.dispatch=s,[n,s]};var Ti={readContext:Kt,use:wo,useCallback:wh,useContext:Kt,useEffect:Su,useImperativeHandle:xh,useInsertionEffect:vh,useLayoutEffect:_h,useMemo:Th,useReducer:To,useRef:gh,useState:function(){return To(ni)},useDebugValue:Cu,useDeferredValue:function(n,s){var l=kt();return Sh(l,ut.memoizedState,n,s)},useTransition:function(){var n=To(ni)[0],s=kt().memoizedState;return[typeof n=="boolean"?n:ea(n),s]},useSyncExternalStore:eh,useId:kh};Ti.useCacheRefresh=Rh,Ti.useMemoCache=_u,Ti.useHostTransitionStatus=ku,Ti.useFormState=hh,Ti.useActionState=hh,Ti.useOptimistic=function(n,s){var l=kt();return ah(l,ut,n,s)};var sr={readContext:Kt,use:wo,useCallback:wh,useContext:Kt,useEffect:Su,useImperativeHandle:xh,useInsertionEffect:vh,useLayoutEffect:_h,useMemo:Th,useReducer:xu,useRef:gh,useState:function(){return xu(ni)},useDebugValue:Cu,useDeferredValue:function(n,s){var l=kt();return ut===null?Eu(l,n,s):Sh(l,ut.memoizedState,n,s)},useTransition:function(){var n=xu(ni)[0],s=kt().memoizedState;return[typeof n=="boolean"?n:ea(n),s]},useSyncExternalStore:eh,useId:kh};sr.useCacheRefresh=Rh,sr.useMemoCache=_u,sr.useHostTransitionStatus=ku,sr.useFormState=mh,sr.useActionState=mh,sr.useOptimistic=function(n,s){var l=kt();return ut!==null?ah(l,ut,n,s):(l.baseState=n,[n,l.queue.dispatch])};function Nu(n,s,l,c){s=n.memoizedState,l=l(c,s),l=l==null?s:Z({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Mu={isMounted:function(n){return(n=n._reactInternals)?ye(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var c=hn(),g=Ei(c);g.payload=s,l!=null&&(g.callback=l),s=Ai(n,g,c),s!==null&&(Qt(s,n,c),ra(s,n,c))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var c=hn(),g=Ei(c);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=Ai(n,g,c),s!==null&&(Qt(s,n,c),ra(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=hn(),c=Ei(l);c.tag=2,s!=null&&(c.callback=s),s=Ai(n,c,l),s!==null&&(Qt(s,n,l),ra(s,n,l))}};function Ih(n,s,l,c,g,v,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,v,C):s.prototype&&s.prototype.isPureReactComponent?!Gs(l,c)||!Gs(g,v):!0}function Oh(n,s,l,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==n&&Mu.enqueueReplaceState(s,s.state,null)}function ar(n,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(n=n.defaultProps){l===s&&(l=Z({},l));for(var g in n)l[g]===void 0&&(l[g]=n[g])}return l}var Ao=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Uh(n){Ao(n)}function Lh(n){console.error(n)}function Ph(n){Ao(n)}function ko(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function zh(n,s,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Du(n,s,l){return l=Ei(l),l.tag=3,l.payload={element:null},l.callback=function(){ko(n,s)},l}function Bh(n){return n=Ei(n),n.tag=3,n}function Vh(n,s,l,c){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var v=c.value;n.payload=function(){return g(v)},n.callback=function(){zh(s,l,c)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(n.callback=function(){zh(s,l,c),typeof g!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})})}function M0(n,s,l,c,g){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&ia(s,l,g,!0),l=wn.current,l!==null){switch(l.tag){case 13:return Hn===null?hc():l.alternate===null&&wt===0&&(wt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,c===lu?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),mc(n,c,g)),!1;case 22:return l.flags|=65536,c===lu?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),mc(n,c,g)),!1}throw Error(i(435,l.tag))}return mc(n,c,g),hc(),!1}if(rt)return s=wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,c!==ou&&(n=Error(i(422),{cause:c}),$s(_n(n,l)))):(c!==ou&&(s=Error(i(423),{cause:c}),$s(_n(s,l))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,c=_n(c,l),g=Du(n.stateNode,c,g),Yu(n,g),wt!==4&&(wt=2)),!1;var v=Error(i(520),{cause:c});if(v=_n(v,l),fa===null?fa=[v]:fa.push(v),wt!==4&&(wt=2),s===null)return!0;c=_n(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=g&-g,l.lanes|=n,n=Du(l.stateNode,c,n),Yu(l,n),!1;case 1:if(s=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ii===null||!Ii.has(v))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Bh(g),Vh(g,n,l,c),Yu(l,g),!1}l=l.return}while(l!==null);return!1}var qh=Error(i(461)),zt=!1;function Gt(n,s,l,c){s.child=n===null?$f(s,null,l,c):tr(s,n.child,l,c)}function Gh(n,s,l,c,g){l=l.render;var v=s.ref;if("ref"in c){var C={};for(var M in c)M!=="ref"&&(C[M]=c[M])}else C=c;return lr(s),c=mu(n,s,l,C,v,g),M=gu(),n!==null&&!zt?(yu(n,s,g),ii(n,s,g)):(rt&&M&&su(s),s.flags|=1,Gt(n,s,c,g),s.child)}function Fh(n,s,l,c,g){if(n===null){var v=l.type;return typeof v=="function"&&!tc(v)&&v.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=v,Hh(n,s,v,c,g)):(n=Io(l.type,null,c,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!qu(n,g)){var C=v.memoizedProps;if(l=l.compare,l=l!==null?l:Gs,l(C,c)&&n.ref===s.ref)return ii(n,s,g)}return s.flags|=1,n=Mi(v,c),n.ref=s.ref,n.return=s,s.child=n}function Hh(n,s,l,c,g){if(n!==null){var v=n.memoizedProps;if(Gs(v,c)&&n.ref===s.ref)if(zt=!1,s.pendingProps=c=v,qu(n,g))(n.flags&131072)!==0&&(zt=!0);else return s.lanes=n.lanes,ii(n,s,g)}return Iu(n,s,l,c,g)}function jh(n,s,l){var c=s.pendingProps,g=c.children,v=(s.stateNode._pendingVisibility&2)!==0,C=n!==null?n.memoizedState:null;if(na(n,s),c.mode==="hidden"||v){if((s.flags&128)!==0){if(c=C!==null?C.baseLanes|l:l,n!==null){for(g=s.child=n.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;s.childLanes=v&~c}else s.childLanes=0,s.child=null;return $h(n,s,c,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&vo(s,C!==null?C.cachePool:null),C!==null?Yf(s,C):uu(),Kf(s);else return s.lanes=s.childLanes=536870912,$h(n,s,C!==null?C.baseLanes|l:l,l)}else C!==null?(vo(s,C.cachePool),Yf(s,C),xi(),s.memoizedState=null):(n!==null&&vo(s,null),uu(),xi());return Gt(n,s,g,l),s.child}function $h(n,s,l,c){var g=hu();return g=g===null?null:{parent:Ot._currentValue,pool:g},s.memoizedState={baseLanes:l,cachePool:g},n!==null&&vo(s,null),uu(),Kf(s),n!==null&&ia(n,s,c,!0),null}function na(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(n===null||n.ref!==l)&&(s.flags|=2097664)}}function Iu(n,s,l,c,g){return lr(s),l=mu(n,s,l,c,void 0,g),c=gu(),n!==null&&!zt?(yu(n,s,g),ii(n,s,g)):(rt&&c&&su(s),s.flags|=1,Gt(n,s,l,g),s.child)}function Yh(n,s,l,c,g,v){return lr(s),s.updateQueue=null,l=Qf(s,c,l,g),Xf(n),c=gu(),n!==null&&!zt?(yu(n,s,v),ii(n,s,v)):(rt&&c&&su(s),s.flags|=1,Gt(n,s,l,v),s.child)}function Kh(n,s,l,c,g){if(lr(s),s.stateNode===null){var v=Lr,C=l.contextType;typeof C=="object"&&C!==null&&(v=Kt(C)),v=new l(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Mu,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},ju(s),C=l.contextType,v.context=typeof C=="object"&&C!==null?Kt(C):Lr,v.state=s.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(Nu(s,l,C,c),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(C=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),C!==v.state&&Mu.enqueueReplaceState(v,v.state,null),aa(s,c,v,g),sa(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){v=s.stateNode;var M=s.memoizedProps,z=ar(l,M);v.props=z;var $=v.context,oe=l.contextType;C=Lr,typeof oe=="object"&&oe!==null&&(C=Kt(oe));var me=l.getDerivedStateFromProps;oe=typeof me=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,oe||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||$!==C)&&Oh(s,v,c,C),Ci=!1;var X=s.memoizedState;v.state=X,aa(s,c,v,g),sa(),$=s.memoizedState,M||X!==$||Ci?(typeof me=="function"&&(Nu(s,l,me,c),$=s.memoizedState),(z=Ci||Ih(s,l,z,c,X,$,C))?(oe||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),v.props=c,v.state=$,v.context=C,c=z):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,$u(n,s),C=s.memoizedProps,oe=ar(l,C),v.props=oe,me=s.pendingProps,X=v.context,$=l.contextType,z=Lr,typeof $=="object"&&$!==null&&(z=Kt($)),M=l.getDerivedStateFromProps,($=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==me||X!==z)&&Oh(s,v,c,z),Ci=!1,X=s.memoizedState,v.state=X,aa(s,c,v,g),sa();var ae=s.memoizedState;C!==me||X!==ae||Ci||n!==null&&n.dependencies!==null&&Ro(n.dependencies)?(typeof M=="function"&&(Nu(s,l,M,c),ae=s.memoizedState),(oe=Ci||Ih(s,l,oe,c,X,ae,z)||n!==null&&n.dependencies!==null&&Ro(n.dependencies))?($||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ae,z),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ae,z)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ae),v.props=c,v.state=ae,v.context=z,c=oe):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),c=!1)}return v=c,na(n,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&c?(s.child=tr(s,n.child,null,g),s.child=tr(s,null,l,g)):Gt(n,s,l,g),s.memoizedState=v.state,n=s.child):n=ii(n,s,g),n}function Zh(n,s,l,c){return js(),s.flags|=256,Gt(n,s,l,c),s.child}var Ou={dehydrated:null,treeContext:null,retryLane:0};function Uu(n){return{baseLanes:n,cachePool:Wf()}}function Lu(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=En),n}function Jh(n,s,l){var c=s.pendingProps,g=!1,v=(s.flags&128)!==0,C;if((C=v)||(C=n!==null&&n.memoizedState===null?!1:(It.current&2)!==0),C&&(g=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,n===null){if(rt){if(g?bi(s):xi(),rt){var M=qt,z;if(z=M){e:{for(z=M,M=Fn;z.nodeType!==8;){if(!M){M=null;break e}if(z=Un(z.nextSibling),z===null){M=null;break e}}M=z}M!==null?(s.memoizedState={dehydrated:M,treeContext:Xi!==null?{id:Qn,overflow:ei}:null,retryLane:536870912},z=Cn(18,null,null,0),z.stateNode=M,z.return=s,s.child=z,Xt=s,qt=null,z=!0):z=!1}z||er(s)}if(M=s.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return M.data==="$!"?s.lanes=16:s.lanes=536870912,null;ti(s)}return M=c.children,c=c.fallback,g?(xi(),g=s.mode,M=zu({mode:"hidden",children:M},g),c=cr(c,g,l,null),M.return=s,c.return=s,M.sibling=c,s.child=M,g=s.child,g.memoizedState=Uu(l),g.childLanes=Lu(n,C,l),s.memoizedState=Ou,c):(bi(s),Pu(s,M))}if(z=n.memoizedState,z!==null&&(M=z.dehydrated,M!==null)){if(v)s.flags&256?(bi(s),s.flags&=-257,s=Bu(n,s,l)):s.memoizedState!==null?(xi(),s.child=n.child,s.flags|=128,s=null):(xi(),g=c.fallback,M=s.mode,c=zu({mode:"visible",children:c.children},M),g=cr(g,M,l,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,tr(s,n.child,null,l),c=s.child,c.memoizedState=Uu(l),c.childLanes=Lu(n,C,l),s.memoizedState=Ou,s=g);else if(bi(s),M.data==="$!"){if(C=M.nextSibling&&M.nextSibling.dataset,C)var $=C.dgst;C=$,c=Error(i(419)),c.stack="",c.digest=C,$s({value:c,source:null,stack:null}),s=Bu(n,s,l)}else if(zt||ia(n,s,l,!1),C=(l&n.childLanes)!==0,zt||C){if(C=ht,C!==null){if(c=l&-l,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(C.suspendedLanes|l))!==0?0:c,c!==0&&c!==z.retryLane)throw z.retryLane=c,_i(n,c),Qt(C,n,c),qh}M.data==="$?"||hc(),s=Bu(n,s,l)}else M.data==="$?"?(s.flags|=128,s.child=n.child,s=$0.bind(null,n),M._reactRetry=s,s=null):(n=z.treeContext,qt=Un(M.nextSibling),Xt=s,rt=!0,In=null,Fn=!1,n!==null&&(bn[xn++]=Qn,bn[xn++]=ei,bn[xn++]=Xi,Qn=n.id,ei=n.overflow,Xi=s),s=Pu(s,c.children),s.flags|=4096);return s}return g?(xi(),g=c.fallback,M=s.mode,z=n.child,$=z.sibling,c=Mi(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&31457280,$!==null?g=Mi($,g):(g=cr(g,M,l,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,M=n.child.memoizedState,M===null?M=Uu(l):(z=M.cachePool,z!==null?($=Ot._currentValue,z=z.parent!==$?{parent:$,pool:$}:z):z=Wf(),M={baseLanes:M.baseLanes|l,cachePool:z}),g.memoizedState=M,g.childLanes=Lu(n,C,l),s.memoizedState=Ou,c):(bi(s),l=n.child,n=l.sibling,l=Mi(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,n!==null&&(C=s.deletions,C===null?(s.deletions=[n],s.flags|=16):C.push(n)),s.child=l,s.memoizedState=null,l)}function Pu(n,s){return s=zu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function zu(n,s){return wp(n,s,0,null)}function Bu(n,s,l){return tr(s,n.child,null,l),n=Pu(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Wh(n,s,l){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Fu(n.return,s,l)}function Vu(n,s,l,c,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=g)}function Xh(n,s,l){var c=s.pendingProps,g=c.revealOrder,v=c.tail;if(Gt(n,s,c.children,l),c=It.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wh(n,l,s);else if(n.tag===19)Wh(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(Fe(It,c),g){case"forwards":for(l=s.child,g=null;l!==null;)n=l.alternate,n!==null&&yo(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),Vu(s,!1,g,l,v);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&yo(n)===null){s.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}Vu(s,!0,l,null,v);break;case"together":Vu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ii(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),Di|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(ia(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,l=Mi(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Mi(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function qu(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ro(n)))}function D0(n,s,l){switch(s.tag){case 3:le(s,s.stateNode.containerInfo),Si(s,Ot,n.memoizedState.cache),js();break;case 27:case 5:P(s);break;case 4:le(s,s.stateNode.containerInfo);break;case 10:Si(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(bi(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Jh(n,s,l):(bi(s),n=ii(n,s,l),n!==null?n.sibling:null);bi(s);break;case 19:var g=(n.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(ia(n,s,l,!1),c=(l&s.childLanes)!==0),g){if(c)return Xh(n,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Fe(It,It.current),c)break;return null;case 22:case 23:return s.lanes=0,jh(n,s,l);case 24:Si(s,Ot,n.memoizedState.cache)}return ii(n,s,l)}function Qh(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)zt=!0;else{if(!qu(n,l)&&(s.flags&128)===0)return zt=!1,D0(n,s,l);zt=(n.flags&131072)!==0}else zt=!1,rt&&(s.flags&1048576)!==0&&Pf(s,fo,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var c=s.elementType,g=c._init;if(c=g(c._payload),s.type=c,typeof c=="function")tc(c)?(n=ar(c,n),s.tag=1,s=Kh(null,s,c,n,l)):(s.tag=0,s=Iu(null,s,c,n,l));else{if(c!=null){if(g=c.$$typeof,g===w){s.tag=11,s=Gh(null,s,c,n,l);break e}else if(g===k){s.tag=14,s=Fh(null,s,c,n,l);break e}}throw s=ee(c)||c,Error(i(306,s,""))}}return s;case 0:return Iu(n,s,s.type,s.pendingProps,l);case 1:return c=s.type,g=ar(c,s.pendingProps),Kh(n,s,c,g,l);case 3:e:{if(le(s,s.stateNode.containerInfo),n===null)throw Error(i(387));var v=s.pendingProps;g=s.memoizedState,c=g.element,$u(n,s),aa(s,v,null,l);var C=s.memoizedState;if(v=C.cache,Si(s,Ot,v),v!==g.cache&&Hu(s,[Ot],l,!0),sa(),v=C.element,g.isDehydrated)if(g={element:v,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Zh(n,s,v,l);break e}else if(v!==c){c=_n(Error(i(424)),s),$s(c),s=Zh(n,s,v,l);break e}else for(qt=Un(s.stateNode.containerInfo.firstChild),Xt=s,rt=!0,In=null,Fn=!0,l=$f(s,null,v,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(js(),v===c){s=ii(n,s,l);break e}Gt(n,s,v,l)}s=s.child}return s;case 26:return na(n,s),n===null?(l=nm(s.type,null,s.pendingProps,null))?s.memoizedState=l:rt||(l=s.type,n=s.pendingProps,c=jo(bt.current).createElement(l),c[Yt]=s,c[sn]=n,Ft(c,l,n),Pt(c),s.stateNode=c):s.memoizedState=nm(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return P(s),n===null&&rt&&(c=s.stateNode=Qp(s.type,s.pendingProps,bt.current),Xt=s,Fn=!0,qt=Un(c.firstChild)),c=s.pendingProps.children,n!==null||rt?Gt(n,s,c,l):s.child=tr(s,null,c,l),na(n,s),s.child;case 5:return n===null&&rt&&((g=c=qt)&&(c=l_(c,s.type,s.pendingProps,Fn),c!==null?(s.stateNode=c,Xt=s,qt=Un(c.firstChild),Fn=!1,g=!0):g=!1),g||er(s)),P(s),g=s.type,v=s.pendingProps,C=n!==null?n.memoizedProps:null,c=v.children,Ac(g,v)?c=null:C!==null&&Ac(g,C)&&(s.flags|=32),s.memoizedState!==null&&(g=mu(n,s,C0,null,null,l),xa._currentValue=g),na(n,s),Gt(n,s,c,l),s.child;case 6:return n===null&&rt&&((n=l=qt)&&(l=u_(l,s.pendingProps,Fn),l!==null?(s.stateNode=l,Xt=s,qt=null,n=!0):n=!1),n||er(s)),null;case 13:return Jh(n,s,l);case 4:return le(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=tr(s,null,c,l):Gt(n,s,c,l),s.child;case 11:return Gh(n,s,s.type,s.pendingProps,l);case 7:return Gt(n,s,s.pendingProps,l),s.child;case 8:return Gt(n,s,s.pendingProps.children,l),s.child;case 12:return Gt(n,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Si(s,s.type,c.value),Gt(n,s,c.children,l),s.child;case 9:return g=s.type._context,c=s.pendingProps.children,lr(s),g=Kt(g),c=c(g),s.flags|=1,Gt(n,s,c,l),s.child;case 14:return Fh(n,s,s.type,s.pendingProps,l);case 15:return Hh(n,s,s.type,s.pendingProps,l);case 19:return Xh(n,s,l);case 22:return jh(n,s,l);case 24:return lr(s),c=Kt(Ot),n===null?(g=hu(),g===null&&(g=ht,v=du(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=l),g=v),s.memoizedState={parent:c,cache:g},ju(s),Si(s,Ot,g)):((n.lanes&l)!==0&&($u(n,s),aa(s,null,null,l),sa()),g=n.memoizedState,v=s.memoizedState,g.parent!==c?(g={parent:c,cache:c},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Si(s,Ot,c)):(c=v.cache,Si(s,Ot,c),c!==g.cache&&Hu(s,[Ot],l,!0))),Gt(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var Gu=Ce(null),or=null,ri=null;function Si(n,s,l){Fe(Gu,s._currentValue),s._currentValue=l}function si(n){n._currentValue=Gu.current,Le(Gu)}function Fu(n,s,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===l)break;n=n.return}}function Hu(n,s,l,c){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var C=g.child;v=v.firstContext;e:for(;v!==null;){var M=v;v=g;for(var z=0;z<s.length;z++)if(M.context===s[z]){v.lanes|=l,M=v.alternate,M!==null&&(M.lanes|=l),Fu(v.return,l,n),c||(C=null);break e}v=M.next}}else if(g.tag===18){if(C=g.return,C===null)throw Error(i(341));C.lanes|=l,v=C.alternate,v!==null&&(v.lanes|=l),Fu(C,l,n),C=null}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===n){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}}function ia(n,s,l,c){n=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var C=g.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var M=g.type;un(g.pendingProps.value,C.value)||(n!==null?n.push(M):n=[M])}}else if(g===E.current){if(C=g.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(xa):n=[xa])}g=g.return}n!==null&&Hu(s,n,l,c),s.flags|=262144}function Ro(n){for(n=n.firstContext;n!==null;){if(!un(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function lr(n){or=n,ri=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Kt(n){return ep(or,n)}function No(n,s){return or===null&&lr(n),ep(n,s)}function ep(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},ri===null){if(n===null)throw Error(i(308));ri=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ri=ri.next=s;return l}var Ci=!1;function ju(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $u(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ei(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ai(n,s,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(_t&2)!==0){var g=c.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),c.pending=s,s=uo(n),Uf(n,null,l),s}return lo(n,c,s,l),uo(n)}function ra(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194176)!==0)){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,Gd(n,l)}}function Yu(n,s){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?g=v=C:v=v.next=C,l=l.next}while(l!==null);v===null?g=v=s:v=v.next=s}else g=v=s;l={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var Ku=!1;function sa(){if(Ku){var n=Gr;if(n!==null)throw n}}function aa(n,s,l,c){Ku=!1;var g=n.updateQueue;Ci=!1;var v=g.firstBaseUpdate,C=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var z=M,$=z.next;z.next=null,C===null?v=$:C.next=$,C=z;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==C&&(M===null?oe.firstBaseUpdate=$:M.next=$,oe.lastBaseUpdate=z))}if(v!==null){var me=g.baseState;C=0,oe=$=z=null,M=v;do{var X=M.lane&-536870913,ae=X!==M.lane;if(ae?(it&X)===X:(c&X)===X){X!==0&&X===qr&&(Ku=!0),oe!==null&&(oe=oe.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var De=n,je=M;X=s;var Tt=l;switch(je.tag){case 1:if(De=je.payload,typeof De=="function"){me=De.call(Tt,me,X);break e}me=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=je.payload,X=typeof De=="function"?De.call(Tt,me,X):De,X==null)break e;me=Z({},me,X);break e;case 2:Ci=!0}}X=M.callback,X!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[X]:ae.push(X))}else ae={lane:X,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?($=oe=ae,z=me):oe=oe.next=ae,C|=X;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);oe===null&&(z=me),g.baseState=z,g.firstBaseUpdate=$,g.lastBaseUpdate=oe,v===null&&(g.shared.lanes=0),Di|=C,n.lanes=C,n.memoizedState=me}}function tp(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function np(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)tp(l[n],s)}function oa(n,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var g=c.next;l=g;do{if((l.tag&n)===n){c=void 0;var v=l.create,C=l.inst;c=v(),C.destroy=c}l=l.next}while(l!==g)}}catch(M){ft(s,s.return,M)}}function ki(n,s,l){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var v=g.next;c=v;do{if((c.tag&n)===n){var C=c.inst,M=C.destroy;if(M!==void 0){C.destroy=void 0,g=s;var z=l;try{M()}catch($){ft(g,z,$)}}}c=c.next}while(c!==v)}}catch($){ft(s,s.return,$)}}function ip(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{np(s,l)}catch(c){ft(n,n.return,c)}}}function rp(n,s,l){l.props=ar(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){ft(n,s,c)}}function ur(n,s){try{var l=n.ref;if(l!==null){var c=n.stateNode;switch(n.tag){case 26:case 27:case 5:var g=c;break;default:g=c}typeof l=="function"?n.refCleanup=l(g):l.current=g}}catch(v){ft(n,s,v)}}function cn(n,s){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(g){ft(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ft(n,s,g)}else l.current=null}function sp(n){var s=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(g){ft(n,n.return,g)}}function ap(n,s,l){try{var c=n.stateNode;i_(c,n.type,l,s),c[sn]=s}catch(g){ft(n,n.return,g)}}function op(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Zu(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||op(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ju(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Ho));else if(c!==4&&c!==27&&(n=n.child,n!==null))for(Ju(n,s,l),n=n.sibling;n!==null;)Ju(n,s,l),n=n.sibling}function Mo(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(c!==4&&c!==27&&(n=n.child,n!==null))for(Mo(n,s,l),n=n.sibling;n!==null;)Mo(n,s,l),n=n.sibling}var ai=!1,xt=!1,Wu=!1,lp=typeof WeakSet=="function"?WeakSet:Set,Bt=null,up=!1;function I0(n,s){if(n=n.containerInfo,Cc=Wo,n=Ef(n),Ql(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var g=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var C=0,M=-1,z=-1,$=0,oe=0,me=n,X=null;t:for(;;){for(var ae;me!==l||g!==0&&me.nodeType!==3||(M=C+g),me!==v||c!==0&&me.nodeType!==3||(z=C+c),me.nodeType===3&&(C+=me.nodeValue.length),(ae=me.firstChild)!==null;)X=me,me=ae;for(;;){if(me===n)break t;if(X===l&&++$===g&&(M=C),X===v&&++oe===c&&(z=C),(ae=me.nextSibling)!==null)break;me=X,X=me.parentNode}me=ae}l=M===-1||z===-1?null:{start:M,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ec={focusedElem:n,selectionRange:l},Wo=!1,Bt=s;Bt!==null;)if(s=Bt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Bt=n;else for(;Bt!==null;){switch(s=Bt,v=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,l=s,g=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var De=ar(l.type,g,l.elementType===l.type);n=c.getSnapshotBeforeUpdate(De,v),c.__reactInternalSnapshotBeforeUpdate=n}catch(je){ft(l,l.return,je)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)Nc(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Nc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Bt=n;break}Bt=s.return}return De=up,up=!1,De}function cp(n,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:li(n,l),c&4&&oa(5,l);break;case 1:if(li(n,l),c&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(M){ft(l,l.return,M)}else{var g=ar(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(M){ft(l,l.return,M)}}c&64&&ip(l),c&512&&ur(l,l.return);break;case 3:if(li(n,l),c&64&&(c=l.updateQueue,c!==null)){if(n=null,l.child!==null)switch(l.child.tag){case 27:case 5:n=l.child.stateNode;break;case 1:n=l.child.stateNode}try{np(c,n)}catch(M){ft(l,l.return,M)}}break;case 26:li(n,l),c&512&&ur(l,l.return);break;case 27:case 5:li(n,l),s===null&&c&4&&sp(l),c&512&&ur(l,l.return);break;case 12:li(n,l);break;case 13:li(n,l),c&4&&hp(n,l);break;case 22:if(g=l.memoizedState!==null||ai,!g){s=s!==null&&s.memoizedState!==null||xt;var v=ai,C=xt;ai=g,(xt=s)&&!C?Ri(n,l,(l.subtreeFlags&8772)!==0):li(n,l),ai=v,xt=C}c&512&&(l.memoizedProps.mode==="manual"?ur(l,l.return):cn(l,l.return));break;default:li(n,l)}}function dp(n){var s=n.alternate;s!==null&&(n.alternate=null,dp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Pl(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Rt=null,dn=!1;function oi(n,s,l){for(l=l.child;l!==null;)fp(n,s,l),l=l.sibling}function fp(n,s,l){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(lt,l)}catch{}switch(l.tag){case 26:xt||cn(l,s),oi(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:xt||cn(l,s);var c=Rt,g=dn;for(Rt=l.stateNode,oi(n,s,l),l=l.stateNode,s=l.attributes;s.length;)l.removeAttributeNode(s[0]);Pl(l),Rt=c,dn=g;break;case 5:xt||cn(l,s);case 6:g=Rt;var v=dn;if(Rt=null,oi(n,s,l),Rt=g,dn=v,Rt!==null)if(dn)try{n=Rt,c=l.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)}catch(C){ft(l,s,C)}else try{Rt.removeChild(l.stateNode)}catch(C){ft(l,s,C)}break;case 18:Rt!==null&&(dn?(s=Rt,l=l.stateNode,s.nodeType===8?Rc(s.parentNode,l):s.nodeType===1&&Rc(s,l),Ca(s)):Rc(Rt,l.stateNode));break;case 4:c=Rt,g=dn,Rt=l.stateNode.containerInfo,dn=!0,oi(n,s,l),Rt=c,dn=g;break;case 0:case 11:case 14:case 15:xt||ki(2,l,s),xt||ki(4,l,s),oi(n,s,l);break;case 1:xt||(cn(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&rp(l,s,c)),oi(n,s,l);break;case 21:oi(n,s,l);break;case 22:xt||cn(l,s),xt=(c=xt)||l.memoizedState!==null,oi(n,s,l),xt=c;break;default:oi(n,s,l)}}function hp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ca(n)}catch(l){ft(s,s.return,l)}}function O0(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new lp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new lp),s;default:throw Error(i(435,n.tag))}}function Xu(n,s){var l=O0(n);s.forEach(function(c){var g=Y0.bind(null,n,c);l.has(c)||(l.add(c),c.then(g,g))})}function Tn(n,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var g=l[c],v=n,C=s,M=C;e:for(;M!==null;){switch(M.tag){case 27:case 5:Rt=M.stateNode,dn=!1;break e;case 3:Rt=M.stateNode.containerInfo,dn=!0;break e;case 4:Rt=M.stateNode.containerInfo,dn=!0;break e}M=M.return}if(Rt===null)throw Error(i(160));fp(v,C,g),Rt=null,dn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)pp(s,n),s=s.sibling}var On=null;function pp(n,s){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Tn(s,n),Sn(n),c&4&&(ki(3,n,n.return),oa(3,n),ki(5,n,n.return));break;case 1:Tn(s,n),Sn(n),c&512&&(xt||l===null||cn(l,l.return)),c&64&&ai&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var g=On;if(Tn(s,n),Sn(n),c&512&&(xt||l===null||cn(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Is]||v[Yt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(c),g.head.insertBefore(v,g.querySelector("head > title"))),Ft(v,c,l),v[Yt]=n,Pt(v),c=v;break e;case"link":var C=sm("link","href",g).get(c+(l.href||""));if(C){for(var M=0;M<C.length;M++)if(v=C[M],v.getAttribute("href")===(l.href==null?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(M,1);break t}}v=g.createElement(c),Ft(v,c,l),g.head.appendChild(v);break;case"meta":if(C=sm("meta","content",g).get(c+(l.content||""))){for(M=0;M<C.length;M++)if(v=C[M],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(M,1);break t}}v=g.createElement(c),Ft(v,c,l),g.head.appendChild(v);break;default:throw Error(i(468,c))}v[Yt]=n,Pt(v),c=v}n.stateNode=c}else am(g,n.type,n.stateNode);else n.stateNode=rm(g,c,n.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?am(g,n.type,n.stateNode):rm(g,c,n.memoizedProps)):c===null&&n.stateNode!==null&&ap(n,n.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&n.alternate===null){g=n.stateNode,v=n.memoizedProps;try{for(var z=g.firstChild;z;){var $=z.nextSibling,oe=z.nodeName;z[Is]||oe==="HEAD"||oe==="BODY"||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&z.rel.toLowerCase()==="stylesheet"||g.removeChild(z),z=$}for(var me=n.type,X=g.attributes;X.length;)g.removeAttributeNode(X[0]);Ft(g,me,v),g[Yt]=n,g[sn]=v}catch(De){ft(n,n.return,De)}}case 5:if(Tn(s,n),Sn(n),c&512&&(xt||l===null||cn(l,l.return)),n.flags&32){g=n.stateNode;try{Rr(g,"")}catch(De){ft(n,n.return,De)}}c&4&&n.stateNode!=null&&(g=n.memoizedProps,ap(n,g,l!==null?l.memoizedProps:g)),c&1024&&(Wu=!0);break;case 6:if(Tn(s,n),Sn(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(De){ft(n,n.return,De)}}break;case 3:if(Ko=null,g=On,On=$o(s.containerInfo),Tn(s,n),On=g,Sn(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Ca(s.containerInfo)}catch(De){ft(n,n.return,De)}Wu&&(Wu=!1,mp(n));break;case 4:c=On,On=$o(n.stateNode.containerInfo),Tn(s,n),Sn(n),On=c;break;case 12:Tn(s,n),Sn(n);break;case 13:Tn(s,n),Sn(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(oc=we()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Xu(n,c)));break;case 22:if(c&512&&(xt||l===null||cn(l,l.return)),z=n.memoizedState!==null,$=l!==null&&l.memoizedState!==null,oe=ai,me=xt,ai=oe||z,xt=me||$,Tn(s,n),xt=me,ai=oe,Sn(n),s=n.stateNode,s._current=n,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=z?s._visibility&-2:s._visibility|1,z&&(s=ai||xt,l===null||$||s||$r(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(l=null,s=n;;){if(s.tag===5||s.tag===26||s.tag===27){if(l===null){$=l=s;try{if(g=$.stateNode,z)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=$.stateNode,M=$.memoizedProps.style;var ae=M!=null&&M.hasOwnProperty("display")?M.display:null;C.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(De){ft($,$.return,De)}}}else if(s.tag===6){if(l===null){$=s;try{$.stateNode.nodeValue=z?"":$.memoizedProps}catch(De){ft($,$.return,De)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Xu(n,l))));break;case 19:Tn(s,n),Sn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Xu(n,c)));break;case 21:break;default:Tn(s,n),Sn(n)}}function Sn(n){var s=n.flags;if(s&2){try{if(n.tag!==27){e:{for(var l=n.return;l!==null;){if(op(l)){var c=l;break e}l=l.return}throw Error(i(160))}switch(c.tag){case 27:var g=c.stateNode,v=Zu(n);Mo(n,v,g);break;case 5:var C=c.stateNode;c.flags&32&&(Rr(C,""),c.flags&=-33);var M=Zu(n);Mo(n,M,C);break;case 3:case 4:var z=c.stateNode.containerInfo,$=Zu(n);Ju(n,$,z);break;default:throw Error(i(161))}}}catch(oe){ft(n,n.return,oe)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function mp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;mp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function li(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)cp(n,s.alternate,s),s=s.sibling}function $r(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ki(4,s,s.return),$r(s);break;case 1:cn(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&rp(s,s.return,l),$r(s);break;case 26:case 27:case 5:cn(s,s.return),$r(s);break;case 22:cn(s,s.return),s.memoizedState===null&&$r(s);break;default:$r(s)}n=n.sibling}}function Ri(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,g=n,v=s,C=v.flags;switch(v.tag){case 0:case 11:case 15:Ri(g,v,l),oa(4,v);break;case 1:if(Ri(g,v,l),c=v,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch($){ft(c,c.return,$)}if(c=v,g=c.updateQueue,g!==null){var M=c.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)tp(z[g],M)}catch($){ft(c,c.return,$)}}l&&C&64&&ip(v),ur(v,v.return);break;case 26:case 27:case 5:Ri(g,v,l),l&&c===null&&C&4&&sp(v),ur(v,v.return);break;case 12:Ri(g,v,l);break;case 13:Ri(g,v,l),l&&C&4&&hp(g,v);break;case 22:v.memoizedState===null&&Ri(g,v,l),ur(v,v.return);break;default:Ri(g,v,l)}s=s.sibling}}function Qu(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Ws(l))}function ec(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ws(n))}function Ni(n,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gp(n,s,l,c),s=s.sibling}function gp(n,s,l,c){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Ni(n,s,l,c),g&2048&&oa(9,s);break;case 3:Ni(n,s,l,c),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ws(n)));break;case 12:if(g&2048){Ni(n,s,l,c),n=s.stateNode;try{var v=s.memoizedProps,C=v.id,M=v.onPostCommit;typeof M=="function"&&M(C,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){ft(s,s.return,z)}}else Ni(n,s,l,c);break;case 23:break;case 22:v=s.stateNode,s.memoizedState!==null?v._visibility&4?Ni(n,s,l,c):la(n,s):v._visibility&4?Ni(n,s,l,c):(v._visibility|=4,Yr(n,s,l,c,(s.subtreeFlags&10256)!==0)),g&2048&&Qu(s.alternate,s);break;case 24:Ni(n,s,l,c),g&2048&&ec(s.alternate,s);break;default:Ni(n,s,l,c)}}function Yr(n,s,l,c,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var v=n,C=s,M=l,z=c,$=C.flags;switch(C.tag){case 0:case 11:case 15:Yr(v,C,M,z,g),oa(8,C);break;case 23:break;case 22:var oe=C.stateNode;C.memoizedState!==null?oe._visibility&4?Yr(v,C,M,z,g):la(v,C):(oe._visibility|=4,Yr(v,C,M,z,g)),g&&$&2048&&Qu(C.alternate,C);break;case 24:Yr(v,C,M,z,g),g&&$&2048&&ec(C.alternate,C);break;default:Yr(v,C,M,z,g)}s=s.sibling}}function la(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,c=s,g=c.flags;switch(c.tag){case 22:la(l,c),g&2048&&Qu(c.alternate,c);break;case 24:la(l,c),g&2048&&ec(c.alternate,c);break;default:la(l,c)}s=s.sibling}}var ua=8192;function Kr(n){if(n.subtreeFlags&ua)for(n=n.child;n!==null;)yp(n),n=n.sibling}function yp(n){switch(n.tag){case 26:Kr(n),n.flags&ua&&n.memoizedState!==null&&w_(On,n.memoizedState,n.memoizedProps);break;case 5:Kr(n);break;case 3:case 4:var s=On;On=$o(n.stateNode.containerInfo),Kr(n),On=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=ua,ua=16777216,Kr(n),ua=s):Kr(n));break;default:Kr(n)}}function vp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function ca(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Bt=c,bp(c,n)}vp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_p(n),n=n.sibling}function _p(n){switch(n.tag){case 0:case 11:case 15:ca(n),n.flags&2048&&ki(9,n,n.return);break;case 3:ca(n);break;case 12:ca(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&4&&(n.return===null||n.return.tag!==13)?(s._visibility&=-5,Do(n)):ca(n);break;default:ca(n)}}function Do(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Bt=c,bp(c,n)}vp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ki(8,s,s.return),Do(s);break;case 22:l=s.stateNode,l._visibility&4&&(l._visibility&=-5,Do(s));break;default:Do(s)}n=n.sibling}}function bp(n,s){for(;Bt!==null;){var l=Bt;switch(l.tag){case 0:case 11:case 15:ki(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ws(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Bt=c;else e:for(l=n;Bt!==null;){c=Bt;var g=c.sibling,v=c.return;if(dp(c),c===l){Bt=null;break e}if(g!==null){g.return=v,Bt=g;break e}Bt=v}}}function U0(n,s,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,s,l,c){return new U0(n,s,l,c)}function tc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Mi(n,s){var l=n.alternate;return l===null?(l=Cn(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&31457280,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function xp(n,s){n.flags&=31457282;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Io(n,s,l,c,g,v){var C=0;if(c=n,typeof n=="function")tc(n)&&(C=1);else if(typeof n=="string")C=b_(n,l,nt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case m:return cr(l.children,g,v,s);case p:C=8,g|=24;break;case y:return n=Cn(12,l,s,g|2),n.elementType=y,n.lanes=v,n;case T:return n=Cn(13,l,s,g),n.elementType=T,n.lanes=v,n;case A:return n=Cn(19,l,s,g),n.elementType=A,n.lanes=v,n;case D:return wp(l,g,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case _:case b:C=10;break e;case x:C=9;break e;case w:C=11;break e;case k:C=14;break e;case N:C=16,c=null;break e}C=29,l=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=Cn(C,l,s,g),s.elementType=n,s.type=c,s.lanes=v,s}function cr(n,s,l,c){return n=Cn(7,n,c,s),n.lanes=l,n}function wp(n,s,l,c){n=Cn(22,n,c,s),n.elementType=D,n.lanes=l;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var v=g._current;if(v===null)throw Error(i(456));if((g._pendingVisibility&2)===0){var C=_i(v,2);C!==null&&(g._pendingVisibility|=2,Qt(C,v,2))}},attach:function(){var v=g._current;if(v===null)throw Error(i(456));if((g._pendingVisibility&2)!==0){var C=_i(v,2);C!==null&&(g._pendingVisibility&=-3,Qt(C,v,2))}}};return n.stateNode=g,n}function nc(n,s,l){return n=Cn(6,n,null,s),n.lanes=l,n}function ic(n,s,l){return s=Cn(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function ui(n){n.flags|=4}function Tp(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!om(s)){if(s=wn.current,s!==null&&((it&4194176)===it?Hn!==null:(it&62914560)!==it&&(it&536870912)===0||s!==Hn))throw Ks=lu,Vf;n.flags|=8192}}function Oo(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Gn():536870912,n.lanes|=s,Jr|=s)}function da(n,s){if(!rt)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function vt(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(s)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,c|=g.subtreeFlags&31457280,c|=g.flags&31457280,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=c,n.childLanes=l,s}function L0(n,s,l){var c=s.pendingProps;switch(au(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(s),null;case 1:return vt(s),null;case 3:return l=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),si(Ot),ne(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Hs(s)?ui(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,In!==null&&(dc(In),In=null))),vt(s),null;case 26:return l=s.memoizedState,n===null?(ui(s),l!==null?(vt(s),Tp(s,l)):(vt(s),s.flags&=-16777217)):l?l!==n.memoizedState?(ui(s),vt(s),Tp(s,l)):(vt(s),s.flags&=-16777217):(n.memoizedProps!==c&&ui(s),vt(s),s.flags&=-16777217),null;case 27:U(s),l=bt.current;var g=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ui(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return vt(s),null}n=nt.current,Hs(s)?zf(s):(n=Qp(g,c,l),s.stateNode=n,ui(s))}return vt(s),null;case 5:if(U(s),l=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ui(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return vt(s),null}if(n=nt.current,Hs(s))zf(s);else{switch(g=jo(bt.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?g.createElement("select",{is:c.is}):g.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?g.createElement(l,{is:c.is}):g.createElement(l)}}n[Yt]=s,n[sn]=c;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=n;e:switch(Ft(n,l,c),l){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ui(s)}}return vt(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&ui(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=bt.current,Hs(s)){if(n=s.stateNode,l=s.memoizedProps,c=null,g=Xt,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}n[Yt]=s,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Yp(n.nodeValue,l)),n||er(s)}else n=jo(n).createTextNode(c),n[Yt]=s,s.stateNode=n}return vt(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Hs(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Yt]=s}else js(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;vt(s),g=!1}else In!==null&&(dc(In),In=null),g=!0;if(!g)return s.flags&256?(ti(s),s):(ti(s),null)}if(ti(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=c!==null,n=n!==null&&n.memoizedState!==null,l){c=s.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool);var v=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==g&&(c.flags|=2048)}return l!==n&&l&&(s.child.flags|=8192),Oo(s,s.updateQueue),vt(s),null;case 4:return ne(),n===null&&wc(s.stateNode.containerInfo),vt(s),null;case 10:return si(s.type),vt(s),null;case 19:if(Le(It),g=s.memoizedState,g===null)return vt(s),null;if(c=(s.flags&128)!==0,v=g.rendering,v===null)if(c)da(g,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=yo(n),v!==null){for(s.flags|=128,da(g,!1),n=v.updateQueue,s.updateQueue=n,Oo(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)xp(l,n),l=l.sibling;return Fe(It,It.current&1|2),s.child}n=n.sibling}g.tail!==null&&we()>Uo&&(s.flags|=128,c=!0,da(g,!1),s.lanes=4194304)}else{if(!c)if(n=yo(v),n!==null){if(s.flags|=128,c=!0,n=n.updateQueue,s.updateQueue=n,Oo(s,n),da(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!rt)return vt(s),null}else 2*we()-g.renderingStartTime>Uo&&l!==536870912&&(s.flags|=128,c=!0,da(g,!1),s.lanes=4194304);g.isBackwards?(v.sibling=s.child,s.child=v):(n=g.last,n!==null?n.sibling=v:s.child=v,g.last=v)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=we(),s.sibling=null,n=It.current,Fe(It,c?n&1|2:n&1),s):(vt(s),null);case 22:case 23:return ti(s),cu(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(vt(s),s.subtreeFlags&6&&(s.flags|=8192)):vt(s),l=s.updateQueue,l!==null&&Oo(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),n!==null&&Le(nr),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),si(Ot),vt(s),null;case 25:return null}throw Error(i(156,s.tag))}function P0(n,s){switch(au(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return si(Ot),ne(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return U(s),null;case 13:if(ti(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));js()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Le(It),null;case 4:return ne(),null;case 10:return si(s.type),null;case 22:case 23:return ti(s),cu(),n!==null&&Le(nr),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return si(Ot),null;case 25:return null;default:return null}}function Sp(n,s){switch(au(s),s.tag){case 3:si(Ot),ne();break;case 26:case 27:case 5:U(s);break;case 4:ne();break;case 13:ti(s);break;case 19:Le(It);break;case 10:si(s.type);break;case 22:case 23:ti(s),cu(),n!==null&&Le(nr);break;case 24:si(Ot)}}var z0={getCacheForType:function(n){var s=Kt(Ot),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l}},B0=typeof WeakMap=="function"?WeakMap:Map,_t=0,ht=null,Xe=null,it=0,pt=0,fn=null,ci=!1,Zr=!1,rc=!1,di=0,wt=0,Di=0,dr=0,sc=0,En=0,Jr=0,fa=null,$n=null,ac=!1,oc=0,Uo=1/0,Lo=null,Ii=null,Po=!1,fr=null,ha=0,lc=0,uc=null,pa=0,cc=null;function hn(){if((_t&2)!==0&&it!==0)return it&-it;if(B.T!==null){var n=qr;return n!==0?n:vc()}return Hd()}function Cp(){En===0&&(En=(it&536870912)===0||rt?Lt():536870912);var n=wn.current;return n!==null&&(n.flags|=32),En}function Qt(n,s,l){(n===ht&&pt===2||n.cancelPendingCommit!==null)&&(Wr(n,0),fi(n,it,En,!1)),Ds(n,l),((_t&2)===0||n!==ht)&&(n===ht&&((_t&2)===0&&(dr|=l),wt===4&&fi(n,it,En,!1)),Yn(n))}function Ep(n,s,l){if((_t&6)!==0)throw Error(i(327));var c=!l&&(s&60)===0&&(s&n.expiredLanes)===0||qn(n,s),g=c?G0(n,s):pc(n,s,!0),v=c;do{if(g===0){Zr&&!c&&fi(n,s,0,!1);break}else if(g===6)fi(n,s,0,!ci);else{if(l=n.current.alternate,v&&!V0(l)){g=pc(n,s,!1),v=!1;continue}if(g===2){if(v=s,n.errorRecoveryDisabledLanes&v)var C=0;else C=n.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var M=n;g=fa;var z=M.current.memoizedState.isDehydrated;if(z&&(Wr(M,C).flags|=256),C=pc(M,C,!1),C!==2){if(rc&&!z){M.errorRecoveryDisabledLanes|=v,dr|=v,g=4;break e}v=$n,$n=g,v!==null&&dc(v)}g=C}if(v=!1,g!==2)continue}}if(g===1){Wr(n,0),fi(n,s,0,!0);break}e:{switch(c=n,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){fi(c,s,En,!ci);break e}break;case 2:$n=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=l,c.finishedLanes=s,(s&62914560)===s&&(v=oc+300-we(),10<v)){if(fi(c,s,En,!ci),$i(c,0)!==0)break e;c.timeoutHandle=Jp(Ap.bind(null,c,l,$n,Lo,ac,s,En,dr,Jr,ci,2,-0,0),v);break e}Ap(c,l,$n,Lo,ac,s,En,dr,Jr,ci,0,-0,0)}}break}while(!0);Yn(n)}function dc(n){$n===null?$n=n:$n.push.apply($n,n)}function Ap(n,s,l,c,g,v,C,M,z,$,oe,me,X){var ae=s.subtreeFlags;if((ae&8192||(ae&16785408)===16785408)&&(ba={stylesheets:null,count:0,unsuspend:x_},yp(s),s=T_(),s!==null)){n.cancelPendingCommit=s(Op.bind(null,n,l,c,g,C,M,z,1,me,X)),fi(n,v,C,!$);return}Op(n,l,c,g,C,M,z,oe,me,X)}function V0(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var g=l[c],v=g.getSnapshot;g=g.value;try{if(!un(v(),g))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fi(n,s,l,c){s&=~sc,s&=~dr,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var g=s;0<g;){var v=31-$e(g),C=1<<v;c[v]=-1,g&=~C}l!==0&&qd(n,l,s)}function zo(){return(_t&6)===0?(ma(0),!1):!0}function fc(){if(Xe!==null){if(pt===0)var n=Xe.return;else n=Xe,ri=or=null,vu(n),Br=null,Zs=0,n=Xe;for(;n!==null;)Sp(n.alternate,n),n=n.return;Xe=null}}function Wr(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,s_(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),fc(),ht=n,Xe=l=Mi(n.current,null),it=s,pt=0,fn=null,ci=!1,Zr=qn(n,s),rc=!1,Jr=En=sc=dr=Di=wt=0,$n=fa=null,ac=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var g=31-$e(c),v=1<<g;s|=n[g],c&=~v}return di=s,oo(),l}function kp(n,s){Je=null,B.H=jn,s===Ys?(s=Ff(),pt=3):s===Vf?(s=Ff(),pt=4):pt=s===qh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,Xe===null&&(wt=1,ko(n,_n(s,n.current)))}function Rp(){var n=B.H;return B.H=jn,n===null?jn:n}function Np(){var n=B.A;return B.A=z0,n}function hc(){wt=4,ci||(it&4194176)!==it&&wn.current!==null||(Zr=!0),(Di&134217727)===0&&(dr&134217727)===0||ht===null||fi(ht,it,En,!1)}function pc(n,s,l){var c=_t;_t|=2;var g=Rp(),v=Np();(ht!==n||it!==s)&&(Lo=null,Wr(n,s)),s=!1;var C=wt;e:do try{if(pt!==0&&Xe!==null){var M=Xe,z=fn;switch(pt){case 8:fc(),C=6;break e;case 3:case 2:case 6:wn.current===null&&(s=!0);var $=pt;if(pt=0,fn=null,Xr(n,M,z,$),l&&Zr){C=0;break e}break;default:$=pt,pt=0,fn=null,Xr(n,M,z,$)}}q0(),C=wt;break}catch(oe){kp(n,oe)}while(!0);return s&&n.shellSuspendCounter++,ri=or=null,_t=c,B.H=g,B.A=v,Xe===null&&(ht=null,it=0,oo()),C}function q0(){for(;Xe!==null;)Mp(Xe)}function G0(n,s){var l=_t;_t|=2;var c=Rp(),g=Np();ht!==n||it!==s?(Lo=null,Uo=we()+500,Wr(n,s)):Zr=qn(n,s);e:do try{if(pt!==0&&Xe!==null){s=Xe;var v=fn;t:switch(pt){case 1:pt=0,fn=null,Xr(n,s,v,1);break;case 2:if(qf(v)){pt=0,fn=null,Dp(s);break}s=function(){pt===2&&ht===n&&(pt=7),Yn(n)},v.then(s,s);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:qf(v)?(pt=0,fn=null,Dp(s)):(pt=0,fn=null,Xr(n,s,v,7));break;case 5:var C=null;switch(Xe.tag){case 26:C=Xe.memoizedState;case 5:case 27:var M=Xe;if(!C||om(C)){pt=0,fn=null;var z=M.sibling;if(z!==null)Xe=z;else{var $=M.return;$!==null?(Xe=$,Bo($)):Xe=null}break t}}pt=0,fn=null,Xr(n,s,v,5);break;case 6:pt=0,fn=null,Xr(n,s,v,6);break;case 8:fc(),wt=6;break e;default:throw Error(i(462))}}F0();break}catch(oe){kp(n,oe)}while(!0);return ri=or=null,B.H=c,B.A=g,_t=l,Xe!==null?0:(ht=null,it=0,oo(),wt)}function F0(){for(;Xe!==null&&!W();)Mp(Xe)}function Mp(n){var s=Qh(n.alternate,n,di);n.memoizedProps=n.pendingProps,s===null?Bo(n):Xe=s}function Dp(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=Yh(l,s,s.pendingProps,s.type,void 0,it);break;case 11:s=Yh(l,s,s.pendingProps,s.type.render,s.ref,it);break;case 5:vu(s);default:Sp(l,s),s=Xe=xp(s,di),s=Qh(l,s,di)}n.memoizedProps=n.pendingProps,s===null?Bo(n):Xe=s}function Xr(n,s,l,c){ri=or=null,vu(s),Br=null,Zs=0;var g=s.return;try{if(M0(n,g,s,l,it)){wt=1,ko(n,_n(l,n.current)),Xe=null;return}}catch(v){if(g!==null)throw Xe=g,v;wt=1,ko(n,_n(l,n.current)),Xe=null;return}s.flags&32768?(rt||c===1?n=!0:Zr||(it&536870912)!==0?n=!1:(ci=n=!0,(c===2||c===3||c===6)&&(c=wn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ip(s,n)):Bo(s)}function Bo(n){var s=n;do{if((s.flags&32768)!==0){Ip(s,ci);return}n=s.return;var l=L0(s.alternate,s,di);if(l!==null){Xe=l;return}if(s=s.sibling,s!==null){Xe=s;return}Xe=s=n}while(s!==null);wt===0&&(wt=5)}function Ip(n,s){do{var l=P0(n.alternate,n);if(l!==null){l.flags&=32767,Xe=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){Xe=n;return}Xe=n=l}while(n!==null);wt=6,Xe=null}function Op(n,s,l,c,g,v,C,M,z,$){var oe=B.T,me=ie.p;try{ie.p=2,B.T=null,H0(n,s,l,c,me,g,v,C,M,z,$)}finally{B.T=oe,ie.p=me}}function H0(n,s,l,c,g,v,C,M){do Qr();while(fr!==null);if((_t&6)!==0)throw Error(i(327));var z=n.finishedWork;if(c=n.finishedLanes,z===null)return null;if(n.finishedWork=null,n.finishedLanes=0,z===n.current)throw Error(i(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var $=z.lanes|z.childLanes;if($|=iu,wv(n,c,$,v,C,M),n===ht&&(Xe=ht=null,it=0),(z.subtreeFlags&10256)===0&&(z.flags&10256)===0||Po||(Po=!0,lc=$,uc=l,K0(Ye,function(){return Qr(),null})),l=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||l?(l=B.T,B.T=null,v=ie.p,ie.p=2,C=_t,_t|=4,I0(n,z),pp(z,n),p0(Ec,n.containerInfo),Wo=!!Cc,Ec=Cc=null,n.current=z,cp(n,z.alternate,z),_e(),_t=C,ie.p=v,B.T=l):n.current=z,Po?(Po=!1,fr=n,ha=c):Up(n,$),$=n.pendingLanes,$===0&&(Ii=null),Se(z.stateNode),Yn(n),s!==null)for(g=n.onRecoverableError,z=0;z<s.length;z++)$=s[z],g($.value,{componentStack:$.stack});return(ha&3)!==0&&Qr(),$=n.pendingLanes,(c&4194218)!==0&&($&42)!==0?n===cc?pa++:(pa=0,cc=n):pa=0,ma(0),null}function Up(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ws(s)))}function Qr(){if(fr!==null){var n=fr,s=lc;lc=0;var l=Fd(ha),c=B.T,g=ie.p;try{if(ie.p=32>l?32:l,B.T=null,fr===null)var v=!1;else{l=uc,uc=null;var C=fr,M=ha;if(fr=null,ha=0,(_t&6)!==0)throw Error(i(331));var z=_t;if(_t|=4,_p(C.current),gp(C,C.current,M,l),_t=z,ma(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(lt,C)}catch{}v=!0}return v}finally{ie.p=g,B.T=c,Up(n,s)}}return!1}function Lp(n,s,l){s=_n(l,s),s=Du(n.stateNode,s,2),n=Ai(n,s,2),n!==null&&(Ds(n,2),Yn(n))}function ft(n,s,l){if(n.tag===3)Lp(n,n,l);else for(;s!==null;){if(s.tag===3){Lp(s,n,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ii===null||!Ii.has(c))){n=_n(l,n),l=Bh(2),c=Ai(s,l,2),c!==null&&(Vh(l,c,s,n),Ds(c,2),Yn(c));break}}s=s.return}}function mc(n,s,l){var c=n.pingCache;if(c===null){c=n.pingCache=new B0;var g=new Set;c.set(s,g)}else g=c.get(s),g===void 0&&(g=new Set,c.set(s,g));g.has(l)||(rc=!0,g.add(l),n=j0.bind(null,n,s,l),s.then(n,n))}function j0(n,s,l){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,ht===n&&(it&l)===l&&(wt===4||wt===3&&(it&62914560)===it&&300>we()-oc?(_t&2)===0&&Wr(n,0):sc|=l,Jr===it&&(Jr=0)),Yn(n)}function Pp(n,s){s===0&&(s=Gn()),n=_i(n,s),n!==null&&(Ds(n,s),Yn(n))}function $0(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Pp(n,l)}function Y0(n,s){var l=0;switch(n.tag){case 13:var c=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Pp(n,l)}function K0(n,s){return fe(n,s)}var Vo=null,es=null,gc=!1,qo=!1,yc=!1,hr=0;function Yn(n){n!==es&&n.next===null&&(es===null?Vo=es=n:es=es.next=n),qo=!0,gc||(gc=!0,J0(Z0))}function ma(n,s){if(!yc&&qo){yc=!0;do for(var l=!1,c=Vo;c!==null;){if(n!==0){var g=c.pendingLanes;if(g===0)var v=0;else{var C=c.suspendedLanes,M=c.pingedLanes;v=(1<<31-$e(42|n)+1)-1,v&=g&~(C&~M),v=v&201326677?v&201326677|1:v?v|2:0}v!==0&&(l=!0,Vp(c,v))}else v=it,v=$i(c,c===ht?v:0),(v&3)===0||qn(c,v)||(l=!0,Vp(c,v));c=c.next}while(l);yc=!1}}function Z0(){qo=gc=!1;var n=0;hr!==0&&(r_()&&(n=hr),hr=0);for(var s=we(),l=null,c=Vo;c!==null;){var g=c.next,v=zp(c,s);v===0?(c.next=null,l===null?Vo=g:l.next=g,g===null&&(es=l)):(l=c,(n!==0||(v&3)!==0)&&(qo=!0)),c=g}ma(n)}function zp(n,s){for(var l=n.suspendedLanes,c=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var C=31-$e(v),M=1<<C,z=g[C];z===-1?((M&l)===0||(M&c)!==0)&&(g[C]=Ms(M,s)):z<=s&&(n.expiredLanes|=M),v&=~M}if(s=ht,l=it,l=$i(n,n===s?l:0),c=n.callbackNode,l===0||n===s&&pt===2||n.cancelPendingCommit!==null)return c!==null&&c!==null&&pe(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||qn(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(c!==null&&pe(c),Fd(l)){case 2:case 8:l=ot;break;case 32:l=Ye;break;case 268435456:l=Nn;break;default:l=Ye}return c=Bp.bind(null,n),l=fe(l,c),n.callbackPriority=s,n.callbackNode=l,s}return c!==null&&c!==null&&pe(c),n.callbackPriority=2,n.callbackNode=null,2}function Bp(n,s){var l=n.callbackNode;if(Qr()&&n.callbackNode!==l)return null;var c=it;return c=$i(n,n===ht?c:0),c===0?null:(Ep(n,c,s),zp(n,we()),n.callbackNode!=null&&n.callbackNode===l?Bp.bind(null,n):null)}function Vp(n,s){if(Qr())return null;Ep(n,s,!0)}function J0(n){a_(function(){(_t&6)!==0?fe(Oe,n):n()})}function vc(){return hr===0&&(hr=Lt()),hr}function qp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:eo(""+n)}function Gp(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function W0(n,s,l,c,g){if(s==="submit"&&l&&l.stateNode===g){var v=qp((g[sn]||null).action),C=c.submitter;C&&(s=(s=C[sn]||null)?qp(s.formAction):C.getAttribute("formAction"),s!==null&&(v=s,C=null));var M=new ro("action","action",null,c,g);n.push({event:M,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hr!==0){var z=C?Gp(g,C):new FormData(g);Au(l,{pending:!0,data:z,method:g.method,action:v},null,z)}}else typeof v=="function"&&(M.preventDefault(),z=C?Gp(g,C):new FormData(g),Au(l,{pending:!0,data:z,method:g.method,action:v},v,z))},currentTarget:g}]})}}for(var _c=0;_c<Of.length;_c++){var bc=Of[_c],X0=bc.toLowerCase(),Q0=bc[0].toUpperCase()+bc.slice(1);Dn(X0,"on"+Q0)}Dn(Rf,"onAnimationEnd"),Dn(Nf,"onAnimationIteration"),Dn(Mf,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(g0,"onTransitionRun"),Dn(y0,"onTransitionStart"),Dn(v0,"onTransitionCancel"),Dn(Df,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ga));function Fp(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],g=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var C=c.length-1;0<=C;C--){var M=c[C],z=M.instance,$=M.currentTarget;if(M=M.listener,z!==v&&g.isPropagationStopped())break e;v=M,g.currentTarget=$;try{v(g)}catch(oe){Ao(oe)}g.currentTarget=null,v=z}else for(C=0;C<c.length;C++){if(M=c[C],z=M.instance,$=M.currentTarget,M=M.listener,z!==v&&g.isPropagationStopped())break e;v=M,g.currentTarget=$;try{v(g)}catch(oe){Ao(oe)}g.currentTarget=null,v=z}}}}function et(n,s){var l=s[Ll];l===void 0&&(l=s[Ll]=new Set);var c=n+"__bubble";l.has(c)||(Hp(s,n,2,!1),l.add(c))}function xc(n,s,l){var c=0;s&&(c|=4),Hp(l,n,c,s)}var Go="_reactListening"+Math.random().toString(36).slice(2);function wc(n){if(!n[Go]){n[Go]=!0,$d.forEach(function(l){l!=="selectionchange"&&(e_.has(l)||xc(l,!1,n),xc(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Go]||(s[Go]=!0,xc("selectionchange",!1,s))}}function Hp(n,s,l,c){switch(hm(s)){case 2:var g=E_;break;case 8:g=A_;break;default:g=Uc}l=g.bind(null,s,l,n),g=void 0,!Hl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),c?g!==void 0?n.addEventListener(s,l,{capture:!0,passive:g}):n.addEventListener(s,l,!0):g!==void 0?n.addEventListener(s,l,{passive:g}):n.addEventListener(s,l,!1)}function Tc(n,s,l,c,g){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var M=c.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(C===4)for(C=c.return;C!==null;){var z=C.tag;if((z===3||z===4)&&(z=C.stateNode.containerInfo,z===g||z.nodeType===8&&z.parentNode===g))return;C=C.return}for(;M!==null;){if(C=Yi(M),C===null)return;if(z=C.tag,z===5||z===6||z===26||z===27){c=v=C;continue e}M=M.parentNode}}c=c.return}sf(function(){var $=v,oe=Gl(l),me=[];e:{var X=If.get(n);if(X!==void 0){var ae=ro,De=n;switch(n){case"keypress":if(no(l)===0)break e;case"keydown":case"keyup":ae=Yv;break;case"focusin":De="focus",ae=Kl;break;case"focusout":De="blur",ae=Kl;break;case"beforeblur":case"afterblur":ae=Kl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Uv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Jv;break;case Rf:case Nf:case Mf:ae=zv;break;case Df:ae=Xv;break;case"scroll":case"scrollend":ae=Iv;break;case"wheel":ae=e0;break;case"copy":case"cut":case"paste":ae=Vv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=cf;break;case"toggle":case"beforetoggle":ae=n0}var je=(s&4)!==0,Tt=!je&&(n==="scroll"||n==="scrollend"),K=je?X!==null?X+"Capture":null:X;je=[];for(var H=$,J;H!==null;){var de=H;if(J=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||J===null||K===null||(de=Us(H,K),de!=null&&je.push(ya(H,de,J))),Tt)break;H=H.return}0<je.length&&(X=new ae(X,De,null,l,oe),me.push({event:X,listeners:je}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",X&&l!==ql&&(De=l.relatedTarget||l.fromElement)&&(Yi(De)||De[Sr]))break e;if((ae||X)&&(X=oe.window===oe?oe:(X=oe.ownerDocument)?X.defaultView||X.parentWindow:window,ae?(De=l.relatedTarget||l.toElement,ae=$,De=De?Yi(De):null,De!==null&&(Tt=ye(De),je=De.tag,De!==Tt||je!==5&&je!==27&&je!==6)&&(De=null)):(ae=null,De=$),ae!==De)){if(je=lf,de="onMouseLeave",K="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(je=cf,de="onPointerLeave",K="onPointerEnter",H="pointer"),Tt=ae==null?X:Os(ae),J=De==null?X:Os(De),X=new je(de,H+"leave",ae,l,oe),X.target=Tt,X.relatedTarget=J,de=null,Yi(oe)===$&&(je=new je(K,H+"enter",De,l,oe),je.target=J,je.relatedTarget=Tt,de=je),Tt=de,ae&&De)t:{for(je=ae,K=De,H=0,J=je;J;J=ts(J))H++;for(J=0,de=K;de;de=ts(de))J++;for(;0<H-J;)je=ts(je),H--;for(;0<J-H;)K=ts(K),J--;for(;H--;){if(je===K||K!==null&&je===K.alternate)break t;je=ts(je),K=ts(K)}je=null}else je=null;ae!==null&&jp(me,X,ae,je,!1),De!==null&&Tt!==null&&jp(me,Tt,De,je,!0)}}e:{if(X=$?Os($):window,ae=X.nodeName&&X.nodeName.toLowerCase(),ae==="select"||ae==="input"&&X.type==="file")var Re=vf;else if(gf(X))if(_f)Re=f0;else{Re=c0;var We=u0}else ae=X.nodeName,!ae||ae.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?$&&Vl($.elementType)&&(Re=vf):Re=d0;if(Re&&(Re=Re(n,$))){yf(me,Re,l,oe);break e}We&&We(n,X,$),n==="focusout"&&$&&X.type==="number"&&$.memoizedProps.value!=null&&Bl(X,"number",X.value)}switch(We=$?Os($):window,n){case"focusin":(gf(We)||We.contentEditable==="true")&&(Ir=We,eu=$,Fs=null);break;case"focusout":Fs=eu=Ir=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,Af(me,l,oe);break;case"selectionchange":if(m0)break;case"keydown":case"keyup":Af(me,l,oe)}var Ue;if(Jl)e:{switch(n){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Dr?pf(n,l)&&(Pe="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(df&&l.locale!=="ko"&&(Dr||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Dr&&(Ue=af()):(vi=oe,jl="value"in vi?vi.value:vi.textContent,Dr=!0)),We=Fo($,Pe),0<We.length&&(Pe=new uf(Pe,n,null,l,oe),me.push({event:Pe,listeners:We}),Ue?Pe.data=Ue:(Ue=mf(l),Ue!==null&&(Pe.data=Ue)))),(Ue=r0?s0(n,l):a0(n,l))&&(Pe=Fo($,"onBeforeInput"),0<Pe.length&&(We=new uf("onBeforeInput","beforeinput",null,l,oe),me.push({event:We,listeners:Pe}),We.data=Ue)),W0(me,n,$,l,oe)}Fp(me,s)})}function ya(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Fo(n,s){for(var l=s+"Capture",c=[];n!==null;){var g=n,v=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Us(n,l),g!=null&&c.unshift(ya(n,g,v)),g=Us(n,s),g!=null&&c.push(ya(n,g,v))),n=n.return}return c}function ts(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function jp(n,s,l,c,g){for(var v=s._reactName,C=[];l!==null&&l!==c;){var M=l,z=M.alternate,$=M.stateNode;if(M=M.tag,z!==null&&z===c)break;M!==5&&M!==26&&M!==27||$===null||(z=$,g?($=Us(l,v),$!=null&&C.unshift(ya(l,$,z))):g||($=Us(l,v),$!=null&&C.push(ya(l,$,z)))),l=l.return}C.length!==0&&n.push({event:s,listeners:C})}var t_=/\r\n?/g,n_=/\u0000|\uFFFD/g;function $p(n){return(typeof n=="string"?n:""+n).replace(t_,`
`).replace(n_,"")}function Yp(n,s){return s=$p(s),$p(n)===s}function Ho(){}function ct(n,s,l,c,g,v){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Rr(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Rr(n,""+c);break;case"className":Wa(n,"class",c);break;case"tabIndex":Wa(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Wa(n,l,c);break;case"style":nf(n,c,v);break;case"data":if(s!=="object"){Wa(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=eo(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(s!=="input"&&ct(n,s,"name",g.name,g,null),ct(n,s,"formEncType",g.formEncType,g,null),ct(n,s,"formMethod",g.formMethod,g,null),ct(n,s,"formTarget",g.formTarget,g,null)):(ct(n,s,"encType",g.encType,g,null),ct(n,s,"method",g.method,g,null),ct(n,s,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=eo(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=Ho);break;case"onScroll":c!=null&&et("scroll",n);break;case"onScrollEnd":c!=null&&et("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=eo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":et("beforetoggle",n),et("toggle",n),Ja(n,"popover",c);break;case"xlinkActuate":Xn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Xn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Xn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Xn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Xn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Xn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ja(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Mv.get(l)||l,Ja(n,l,c))}}function Sc(n,s,l,c,g,v){switch(l){case"style":nf(n,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"children":typeof c=="string"?Rr(n,c):(typeof c=="number"||typeof c=="bigint")&&Rr(n,""+c);break;case"onScroll":c!=null&&et("scroll",n);break;case"onScrollEnd":c!=null&&et("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Ho);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yd.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),s=l.slice(2,g?l.length-7:void 0),v=n[sn]||null,v=v!=null?v[l]:null,typeof v=="function"&&n.removeEventListener(s,v,g),typeof c=="function")){typeof v!="function"&&v!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,c,g);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):Ja(n,l,c)}}}function Ft(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",n),et("load",n);var c=!1,g=!1,v;for(v in l)if(l.hasOwnProperty(v)){var C=l[v];if(C!=null)switch(v){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(n,s,v,C,l,null)}}g&&ct(n,s,"srcSet",l.srcSet,l,null),c&&ct(n,s,"src",l.src,l,null);return;case"input":et("invalid",n);var M=v=C=g=null,z=null,$=null;for(c in l)if(l.hasOwnProperty(c)){var oe=l[c];if(oe!=null)switch(c){case"name":g=oe;break;case"type":C=oe;break;case"checked":z=oe;break;case"defaultChecked":$=oe;break;case"value":v=oe;break;case"defaultValue":M=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:ct(n,s,c,oe,l,null)}}Xd(n,v,M,z,$,C,g,!1),Xa(n);return;case"select":et("invalid",n),c=C=v=null;for(g in l)if(l.hasOwnProperty(g)&&(M=l[g],M!=null))switch(g){case"value":v=M;break;case"defaultValue":C=M;break;case"multiple":c=M;default:ct(n,s,g,M,l,null)}s=v,l=C,n.multiple=!!c,s!=null?kr(n,!!c,s,!1):l!=null&&kr(n,!!c,l,!0);return;case"textarea":et("invalid",n),v=g=c=null;for(C in l)if(l.hasOwnProperty(C)&&(M=l[C],M!=null))switch(C){case"value":c=M;break;case"defaultValue":g=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:ct(n,s,C,M,l,null)}ef(n,c,g,v),Xa(n);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(c=l[z],c!=null))switch(z){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ct(n,s,z,c,l,null)}return;case"dialog":et("cancel",n),et("close",n);break;case"iframe":case"object":et("load",n);break;case"video":case"audio":for(c=0;c<ga.length;c++)et(ga[c],n);break;case"image":et("error",n),et("load",n);break;case"details":et("toggle",n);break;case"embed":case"source":case"link":et("error",n),et("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in l)if(l.hasOwnProperty($)&&(c=l[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(n,s,$,c,l,null)}return;default:if(Vl(s)){for(oe in l)l.hasOwnProperty(oe)&&(c=l[oe],c!==void 0&&Sc(n,s,oe,c,l,void 0));return}}for(M in l)l.hasOwnProperty(M)&&(c=l[M],c!=null&&ct(n,s,M,c,l,null))}function i_(n,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,C=null,M=null,z=null,$=null,oe=null;for(ae in l){var me=l[ae];if(l.hasOwnProperty(ae)&&me!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":z=me;default:c.hasOwnProperty(ae)||ct(n,s,ae,null,c,me)}}for(var X in c){var ae=c[X];if(me=l[X],c.hasOwnProperty(X)&&(ae!=null||me!=null))switch(X){case"type":v=ae;break;case"name":g=ae;break;case"checked":$=ae;break;case"defaultChecked":oe=ae;break;case"value":C=ae;break;case"defaultValue":M=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,s));break;default:ae!==me&&ct(n,s,X,ae,c,me)}}zl(n,C,M,z,$,oe,v,g);return;case"select":ae=C=M=X=null;for(v in l)if(z=l[v],l.hasOwnProperty(v)&&z!=null)switch(v){case"value":break;case"multiple":ae=z;default:c.hasOwnProperty(v)||ct(n,s,v,null,c,z)}for(g in c)if(v=c[g],z=l[g],c.hasOwnProperty(g)&&(v!=null||z!=null))switch(g){case"value":X=v;break;case"defaultValue":M=v;break;case"multiple":C=v;default:v!==z&&ct(n,s,g,v,c,z)}s=M,l=C,c=ae,X!=null?kr(n,!!l,X,!1):!!c!=!!l&&(s!=null?kr(n,!!l,s,!0):kr(n,!!l,l?[]:"",!1));return;case"textarea":ae=X=null;for(M in l)if(g=l[M],l.hasOwnProperty(M)&&g!=null&&!c.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:ct(n,s,M,null,c,g)}for(C in c)if(g=c[C],v=l[C],c.hasOwnProperty(C)&&(g!=null||v!=null))switch(C){case"value":X=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==v&&ct(n,s,C,g,c,v)}Qd(n,X,ae);return;case"option":for(var De in l)if(X=l[De],l.hasOwnProperty(De)&&X!=null&&!c.hasOwnProperty(De))switch(De){case"selected":n.selected=!1;break;default:ct(n,s,De,null,c,X)}for(z in c)if(X=c[z],ae=l[z],c.hasOwnProperty(z)&&X!==ae&&(X!=null||ae!=null))switch(z){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ct(n,s,z,X,c,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in l)X=l[je],l.hasOwnProperty(je)&&X!=null&&!c.hasOwnProperty(je)&&ct(n,s,je,null,c,X);for($ in c)if(X=c[$],ae=l[$],c.hasOwnProperty($)&&X!==ae&&(X!=null||ae!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:ct(n,s,$,X,c,ae)}return;default:if(Vl(s)){for(var Tt in l)X=l[Tt],l.hasOwnProperty(Tt)&&X!==void 0&&!c.hasOwnProperty(Tt)&&Sc(n,s,Tt,void 0,c,X);for(oe in c)X=c[oe],ae=l[oe],!c.hasOwnProperty(oe)||X===ae||X===void 0&&ae===void 0||Sc(n,s,oe,X,c,ae);return}}for(var K in l)X=l[K],l.hasOwnProperty(K)&&X!=null&&!c.hasOwnProperty(K)&&ct(n,s,K,null,c,X);for(me in c)X=c[me],ae=l[me],!c.hasOwnProperty(me)||X===ae||X==null&&ae==null||ct(n,s,me,X,c,ae)}var Cc=null,Ec=null;function jo(n){return n.nodeType===9?n:n.ownerDocument}function Kp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zp(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ac(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var kc=null;function r_(){var n=window.event;return n&&n.type==="popstate"?n===kc?!1:(kc=n,!0):(kc=null,!1)}var Jp=typeof setTimeout=="function"?setTimeout:void 0,s_=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,a_=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(n){return Wp.resolve(null).then(n).catch(o_)}:Jp;function o_(n){setTimeout(function(){throw n})}function Rc(n,s){var l=s,c=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(c===0){n.removeChild(g),Ca(s);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=g}while(l);Ca(s)}function Nc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Nc(l),Pl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function l_(n,s,l,c){for(;n.nodeType===1;){var g=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Is])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=Un(n.nextSibling),n===null)break}return null}function u_(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Un(n.nextSibling),n===null))return null;return n}function Un(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}function Xp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}function Qp(n,s,l){switch(s=jo(l),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}var An=new Map,em=new Set;function $o(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var hi=ie.d;ie.d={f:c_,r:d_,D:f_,C:h_,L:p_,m:m_,X:y_,S:g_,M:v_};function c_(){var n=hi.f(),s=zo();return n||s}function d_(n){var s=Cr(n);s!==null&&s.tag===5&&s.type==="form"?Ah(s):hi.r(n)}var ns=typeof document>"u"?null:document;function tm(n,s,l){var c=ns;if(c&&typeof s=="string"&&s){var g=yn(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),em.has(g)||(em.add(g),n={rel:n,crossOrigin:l,href:s},c.querySelector(g)===null&&(s=c.createElement("link"),Ft(s,"link",n),Pt(s),c.head.appendChild(s)))}}function f_(n){hi.D(n),tm("dns-prefetch",n,null)}function h_(n,s){hi.C(n,s),tm("preconnect",n,s)}function p_(n,s,l){hi.L(n,s,l);var c=ns;if(c&&n&&s){var g='link[rel="preload"][as="'+yn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+yn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+yn(l.imageSizes)+'"]')):g+='[href="'+yn(n)+'"]';var v=g;switch(s){case"style":v=is(n);break;case"script":v=rs(n)}An.has(v)||(n=Z({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),An.set(v,n),c.querySelector(g)!==null||s==="style"&&c.querySelector(va(v))||s==="script"&&c.querySelector(_a(v))||(s=c.createElement("link"),Ft(s,"link",n),Pt(s),c.head.appendChild(s)))}}function m_(n,s){hi.m(n,s);var l=ns;if(l&&n){var c=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+yn(c)+'"][href="'+yn(n)+'"]',v=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=rs(n)}if(!An.has(v)&&(n=Z({rel:"modulepreload",href:n},s),An.set(v,n),l.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_a(v)))return}c=l.createElement("link"),Ft(c,"link",n),Pt(c),l.head.appendChild(c)}}}function g_(n,s,l){hi.S(n,s,l);var c=ns;if(c&&n){var g=Er(c).hoistableStyles,v=is(n);s=s||"default";var C=g.get(v);if(!C){var M={loading:0,preload:null};if(C=c.querySelector(va(v)))M.loading=5;else{n=Z({rel:"stylesheet",href:n,"data-precedence":s},l),(l=An.get(v))&&Mc(n,l);var z=C=c.createElement("link");Pt(z),Ft(z,"link",n),z._p=new Promise(function($,oe){z.onload=$,z.onerror=oe}),z.addEventListener("load",function(){M.loading|=1}),z.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Yo(C,s,c)}C={type:"stylesheet",instance:C,count:1,state:M},g.set(v,C)}}}function y_(n,s){hi.X(n,s);var l=ns;if(l&&n){var c=Er(l).hoistableScripts,g=rs(n),v=c.get(g);v||(v=l.querySelector(_a(g)),v||(n=Z({src:n,async:!0},s),(s=An.get(g))&&Dc(n,s),v=l.createElement("script"),Pt(v),Ft(v,"link",n),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function v_(n,s){hi.M(n,s);var l=ns;if(l&&n){var c=Er(l).hoistableScripts,g=rs(n),v=c.get(g);v||(v=l.querySelector(_a(g)),v||(n=Z({src:n,async:!0,type:"module"},s),(s=An.get(g))&&Dc(n,s),v=l.createElement("script"),Pt(v),Ft(v,"link",n),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function nm(n,s,l,c){var g=(g=bt.current)?$o(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=is(l.href),l=Er(g).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=is(l.href);var v=Er(g).hoistableStyles,C=v.get(n);if(C||(g=g.ownerDocument||g,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,C),(v=g.querySelector(va(n)))&&!v._p&&(C.instance=v,C.state.loading=5),An.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},An.set(n,l),v||__(g,n,l,C.state))),s&&c===null)throw Error(i(528,""));return C}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=rs(l),l=Er(g).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function is(n){return'href="'+yn(n)+'"'}function va(n){return'link[rel="stylesheet"]['+n+"]"}function im(n){return Z({},n,{"data-precedence":n.precedence,precedence:null})}function __(n,s,l,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Ft(s,"link",l),Pt(s),n.head.appendChild(s))}function rs(n){return'[src="'+yn(n)+'"]'}function _a(n){return"script[async]"+n}function rm(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+yn(l.href)+'"]');if(c)return s.instance=c,Pt(c),c;var g=Z({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Pt(c),Ft(c,"style",g),Yo(c,l.precedence,n),s.instance=c;case"stylesheet":g=is(l.href);var v=n.querySelector(va(g));if(v)return s.state.loading|=4,s.instance=v,Pt(v),v;c=im(l),(g=An.get(g))&&Mc(c,g),v=(n.ownerDocument||n).createElement("link"),Pt(v);var C=v;return C._p=new Promise(function(M,z){C.onload=M,C.onerror=z}),Ft(v,"link",c),s.state.loading|=4,Yo(v,l.precedence,n),s.instance=v;case"script":return v=rs(l.src),(g=n.querySelector(_a(v)))?(s.instance=g,Pt(g),g):(c=l,(g=An.get(v))&&(c=Z({},l),Dc(c,g)),n=n.ownerDocument||n,g=n.createElement("script"),Pt(g),Ft(g,"link",c),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Yo(c,l.precedence,n));return s.instance}function Yo(n,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,v=g,C=0;C<c.length;C++){var M=c[C];if(M.dataset.precedence===s)v=M;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function Mc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Dc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Ko=null;function sm(n,s,l){if(Ko===null){var c=new Map,g=Ko=new Map;g.set(l,c)}else g=Ko,c=g.get(l),c||(c=new Map,g.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),g=0;g<l.length;g++){var v=l[g];if(!(v[Is]||v[Yt]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var C=v.getAttribute(s)||"";C=n+C;var M=c.get(C);M?M.push(v):c.set(C,[v])}}return c}function am(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function b_(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function om(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var ba=null;function x_(){}function w_(n,s,l){if(ba===null)throw Error(i(475));var c=ba;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=is(l.href),v=n.querySelector(va(g));if(v){n=v._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Zo.bind(c),n.then(c,c)),s.state.loading|=4,s.instance=v,Pt(v);return}v=n.ownerDocument||n,l=im(l),(g=An.get(g))&&Mc(l,g),v=v.createElement("link"),Pt(v);var C=v;C._p=new Promise(function(M,z){C.onload=M,C.onerror=z}),Ft(v,"link",l),s.instance=v}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Zo.bind(c),n.addEventListener("load",s),n.addEventListener("error",s))}}function T_(){if(ba===null)throw Error(i(475));var n=ba;return n.stylesheets&&n.count===0&&Ic(n,n.stylesheets),0<n.count?function(s){var l=setTimeout(function(){if(n.stylesheets&&Ic(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(l)}}:null}function Zo(){if(this.count--,this.count===0){if(this.stylesheets)Ic(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jo=null;function Ic(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jo=new Map,s.forEach(S_,n),Jo=null,Zo.call(n))}function S_(n,s){if(!(s.state.loading&4)){var l=Jo.get(n);if(l)var c=l.get(null);else{l=new Map,Jo.set(n,l);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var C=g[v];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),c=C)}c&&l.set(null,c)}g=s.instance,C=g.getAttribute("data-precedence"),v=l.get(C)||c,v===c&&l.set(null,g),l.set(C,g),this.count++,c=Zo.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var xa={$$typeof:b,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function C_(n,s,l,c,g,v,C,M){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mn(0),this.hiddenUpdates=Mn(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function lm(n,s,l,c,g,v,C,M,z,$,oe,me){return n=new C_(n,s,l,C,M,z,$,me),s=1,v===!0&&(s|=24),v=Cn(3,null,null,s),n.current=v,v.stateNode=n,s=du(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:s},ju(v),n}function um(n){return n?(n=Lr,n):Lr}function cm(n,s,l,c,g,v){g=um(g),c.context===null?c.context=g:c.pendingContext=g,c=Ei(s),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Ai(n,c,s),l!==null&&(Qt(l,n,s),ra(l,n,s))}function dm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function Oc(n,s){dm(n,s),(n=n.alternate)&&dm(n,s)}function fm(n){if(n.tag===13){var s=_i(n,67108864);s!==null&&Qt(s,n,67108864),Oc(n,67108864)}}var Wo=!0;function E_(n,s,l,c){var g=B.T;B.T=null;var v=ie.p;try{ie.p=2,Uc(n,s,l,c)}finally{ie.p=v,B.T=g}}function A_(n,s,l,c){var g=B.T;B.T=null;var v=ie.p;try{ie.p=8,Uc(n,s,l,c)}finally{ie.p=v,B.T=g}}function Uc(n,s,l,c){if(Wo){var g=Lc(c);if(g===null)Tc(n,s,c,Xo,l),pm(n,c);else if(R_(g,n,s,l,c))c.stopPropagation();else if(pm(n,c),s&4&&-1<k_.indexOf(n)){for(;g!==null;){var v=Cr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var C=rn(v.pendingLanes);if(C!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;C;){var z=1<<31-$e(C);M.entanglements[1]|=z,C&=~z}Yn(v),(_t&6)===0&&(Uo=we()+500,ma(0))}}break;case 13:M=_i(v,2),M!==null&&Qt(M,v,2),zo(),Oc(v,2)}if(v=Lc(c),v===null&&Tc(n,s,c,Xo,l),v===g)break;g=v}g!==null&&c.stopPropagation()}else Tc(n,s,c,null,l)}}function Lc(n){return n=Gl(n),Pc(n)}var Xo=null;function Pc(n){if(Xo=null,n=Yi(n),n!==null){var s=ye(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=ue(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Xo=n,null}function hm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case Oe:return 2;case ot:return 8;case Ye:case $t:return 32;case Nn:return 268435456;default:return 32}default:return 32}}var zc=!1,Oi=null,Ui=null,Li=null,wa=new Map,Ta=new Map,Pi=[],k_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pm(n,s){switch(n){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":wa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ta.delete(s.pointerId)}}function Sa(n,s,l,c,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[g]},s!==null&&(s=Cr(s),s!==null&&fm(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function R_(n,s,l,c,g){switch(s){case"focusin":return Oi=Sa(Oi,n,s,l,c,g),!0;case"dragenter":return Ui=Sa(Ui,n,s,l,c,g),!0;case"mouseover":return Li=Sa(Li,n,s,l,c,g),!0;case"pointerover":var v=g.pointerId;return wa.set(v,Sa(wa.get(v)||null,n,s,l,c,g)),!0;case"gotpointercapture":return v=g.pointerId,Ta.set(v,Sa(Ta.get(v)||null,n,s,l,c,g)),!0}return!1}function mm(n){var s=Yi(n.target);if(s!==null){var l=ye(s);if(l!==null){if(s=l.tag,s===13){if(s=ue(l),s!==null){n.blockedOn=s,Tv(n.priority,function(){if(l.tag===13){var c=hn(),g=_i(l,c);g!==null&&Qt(g,l,c),Oc(l,c)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qo(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=Lc(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);ql=c,l.target.dispatchEvent(c),ql=null}else return s=Cr(l),s!==null&&fm(s),n.blockedOn=l,!1;s.shift()}return!0}function gm(n,s,l){Qo(n)&&l.delete(s)}function N_(){zc=!1,Oi!==null&&Qo(Oi)&&(Oi=null),Ui!==null&&Qo(Ui)&&(Ui=null),Li!==null&&Qo(Li)&&(Li=null),wa.forEach(gm),Ta.forEach(gm)}function el(n,s){n.blockedOn===s&&(n.blockedOn=null,zc||(zc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,N_)))}var tl=null;function ym(n){tl!==n&&(tl=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){tl===n&&(tl=null);for(var s=0;s<n.length;s+=3){var l=n[s],c=n[s+1],g=n[s+2];if(typeof c!="function"){if(Pc(c||l)===null)continue;break}var v=Cr(l);v!==null&&(n.splice(s,3),s-=3,Au(v,{pending:!0,data:g,method:l.method,action:c},c,g))}}))}function Ca(n){function s(z){return el(z,n)}Oi!==null&&el(Oi,n),Ui!==null&&el(Ui,n),Li!==null&&el(Li,n),wa.forEach(s),Ta.forEach(s);for(var l=0;l<Pi.length;l++){var c=Pi[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Pi.length&&(l=Pi[0],l.blockedOn===null);)mm(l),l.blockedOn===null&&Pi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var g=l[c],v=l[c+1],C=g[sn]||null;if(typeof v=="function")C||ym(l);else if(C){var M=null;if(v&&v.hasAttribute("formAction")){if(g=v,C=v[sn]||null)M=C.formAction;else if(Pc(g)!==null)continue}else M=C.action;typeof M=="function"?l[c+1]=M:(l.splice(c,3),c-=3),ym(l)}}}function Bc(n){this._internalRoot=n}nl.prototype.render=Bc.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=hn();cm(l,c,n,s,null,null)},nl.prototype.unmount=Bc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;n.tag===0&&Qr(),cm(n.current,2,null,n,null,null),zo(),s[Sr]=null}};function nl(n){this._internalRoot=n}nl.prototype.unstable_scheduleHydration=function(n){if(n){var s=Hd();n={blockedOn:null,target:n,priority:s};for(var l=0;l<Pi.length&&s!==0&&s<Pi[l].priority;l++);Pi.splice(l,0,n),l===0&&mm(n)}};var vm=e.version;if(vm!=="19.0.0")throw Error(i(527,vm,"19.0.0"));ie.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=V(s),n=n!==null?F(n):null,n=n===null?null:n.stateNode,n};var M_={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:B,findFiberByHostInstance:Yi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{lt=il.inject(M_),ge=il}catch{}}return Aa.createRoot=function(n,s){if(!a(n))throw Error(i(299));var l=!1,c="",g=Uh,v=Lh,C=Ph,M=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks)),s=lm(n,1,!1,null,null,l,c,g,v,C,M,null),n[Sr]=s.current,wc(n.nodeType===8?n.parentNode:n),new Bc(s)},Aa.hydrateRoot=function(n,s,l){if(!a(n))throw Error(i(299));var c=!1,g="",v=Uh,C=Lh,M=Ph,z=null,$=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(z=l.unstable_transitionCallbacks),l.formState!==void 0&&($=l.formState)),s=lm(n,1,!0,s,l??null,c,g,v,C,M,z,$),s.context=um(null),l=s.current,c=hn(),g=Ei(c),g.callback=null,Ai(l,g,c),s.current.lanes=c,Ds(s,c),Yn(s),n[Sr]=s.current,wc(n),new nl(s)},Aa.version="19.0.0",Aa}var km;function G_(){if(km)return Gc.exports;km=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gc.exports=q_(),Gc.exports}var F_=G_();const H_=Rd(F_);var at;(function(r){r.assertEqual=a=>{};function e(a){}r.assertIs=e;function t(a){throw new Error}r.assertNever=t,r.arrayToEnum=a=>{const o={};for(const u of a)o[u]=u;return o},r.getValidEnumValues=a=>{const o=r.objectKeys(a).filter(d=>typeof a[a[d]]!="number"),u={};for(const d of o)u[d]=a[d];return r.objectValues(u)},r.objectValues=a=>r.objectKeys(a).map(function(o){return a[o]}),r.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&o.push(u);return o},r.find=(a,o)=>{for(const u of a)if(o(u))return u},r.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function i(a,o=" | "){return a.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}r.joinValues=i,r.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(at||(at={}));var Rm;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Rm||(Rm={}));const Ne=at.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Bi=r=>{switch(typeof r){case"undefined":return Ne.undefined;case"string":return Ne.string;case"number":return Number.isNaN(r)?Ne.nan:Ne.number;case"boolean":return Ne.boolean;case"function":return Ne.function;case"bigint":return Ne.bigint;case"symbol":return Ne.symbol;case"object":return Array.isArray(r)?Ne.array:r===null?Ne.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?Ne.promise:typeof Map<"u"&&r instanceof Map?Ne.map:typeof Set<"u"&&r instanceof Set?Ne.set:typeof Date<"u"&&r instanceof Date?Ne.date:Ne.object;default:return Ne.unknown}},be=at.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class mi extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(o){return o.message},i={_errors:[]},a=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(a);else if(u.code==="invalid_return_type")a(u.returnTypeError);else if(u.code==="invalid_arguments")a(u.argumentsError);else if(u.path.length===0)i._errors.push(t(u));else{let d=i,m=0;for(;m<u.path.length;){const p=u.path[m];m===u.path.length-1?(d[p]=d[p]||{_errors:[]},d[p]._errors.push(t(u))):d[p]=d[p]||{_errors:[]},d=d[p],m++}}};return a(this),i}static assert(e){if(!(e instanceof mi))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,at.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const a of this.issues)if(a.path.length>0){const o=a.path[0];t[o]=t[o]||[],t[o].push(e(a))}else i.push(e(a));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}mi.create=r=>new mi(r);const nd=(r,e)=>{let t;switch(r.code){case be.invalid_type:r.received===Ne.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case be.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,at.jsonStringifyReplacer)}`;break;case be.unrecognized_keys:t=`Unrecognized key(s) in object: ${at.joinValues(r.keys,", ")}`;break;case be.invalid_union:t="Invalid input";break;case be.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${at.joinValues(r.options)}`;break;case be.invalid_enum_value:t=`Invalid enum value. Expected ${at.joinValues(r.options)}, received '${r.received}'`;break;case be.invalid_arguments:t="Invalid function arguments";break;case be.invalid_return_type:t="Invalid function return type";break;case be.invalid_date:t="Invalid date";break;case be.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:at.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case be.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="bigint"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case be.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case be.custom:t="Invalid input";break;case be.invalid_intersection_types:t="Intersection results could not be merged";break;case be.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case be.not_finite:t="Number must be finite";break;default:t=e.defaultError,at.assertNever(r)}return{message:t}};let j_=nd;function $_(){return j_}const Y_=r=>{const{data:e,path:t,errorMaps:i,issueData:a}=r,o=[...t,...a.path||[]],u={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let d="";const m=i.filter(p=>!!p).slice().reverse();for(const p of m)d=p(u,{data:e,defaultError:d}).message;return{...a,path:o,message:d}};function Te(r,e){const t=$_(),i=Y_({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===nd?void 0:nd].filter(a=>!!a)});r.common.issues.push(i)}class nn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const a of t){if(a.status==="aborted")return He;a.status==="dirty"&&e.dirty(),i.push(a.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const a of t){const o=await a.key,u=await a.value;i.push({key:o,value:u})}return nn.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const a of t){const{key:o,value:u}=a;if(o.status==="aborted"||u.status==="aborted")return He;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||a.alwaysSet)&&(i[o.value]=u.value)}return{status:e.value,value:i}}}const He=Object.freeze({status:"aborted"}),Ma=r=>({status:"dirty",value:r}),Rn=r=>({status:"valid",value:r}),Nm=r=>r.status==="aborted",Mm=r=>r.status==="dirty",ws=r=>r.status==="valid",vl=r=>typeof Promise<"u"&&r instanceof Promise;var Me;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Me||(Me={}));class Jn{constructor(e,t,i,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Dm=(r,e)=>{if(ws(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new mi(r.common.issues);return this._error=t,this._error}}};function Ze(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:a}=r;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,d)=>{const{message:m}=r;return u.code==="invalid_enum_value"?{message:m??d.defaultError}:typeof d.data>"u"?{message:m??i??d.defaultError}:u.code!=="invalid_type"?{message:d.defaultError}:{message:m??t??d.defaultError}},description:a}}class tt{get description(){return this._def.description}_getType(e){return Bi(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Bi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new nn,ctx:{common:e.parent.common,data:e.data,parsedType:Bi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(vl(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){const i={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bi(e)},a=this._parseSync({data:e,path:i.path,parent:i});return Dm(i,a)}"~validate"(e){var i,a;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bi(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:t});return ws(o)?{value:o.value}:{issues:t.common.issues}}catch(o){(a=(i=o==null?void 0:o.message)==null?void 0:i.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(o=>ws(o)?{value:o.value}:{issues:t.common.issues})}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bi(e)},a=this._parse({data:e,path:i.path,parent:i}),o=await(vl(a)?a:Promise.resolve(a));return Dm(i,o)}refine(e,t){const i=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,o)=>{const u=e(a),d=()=>o.addIssue({code:be.custom,...i(a)});return typeof Promise<"u"&&u instanceof Promise?u.then(m=>m?!0:(d(),!1)):u?!0:(d(),!1)})}refinement(e,t){return this._refinement((i,a)=>e(i)?!0:(a.addIssue(typeof t=="function"?t(i,a):t),!1))}_refinement(e){return new Cs({schema:this,typeName:Ge.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Gi.create(this,this._def)}nullable(){return Es.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Zn.create(this)}promise(){return Tl.create(this,this._def)}or(e){return bl.create([this,e],this._def)}and(e){return xl.create(this,e,this._def)}transform(e){return new Cs({...Ze(this._def),schema:this,typeName:Ge.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ad({...Ze(this._def),innerType:this,defaultValue:t,typeName:Ge.ZodDefault})}brand(){return new gb({typeName:Ge.ZodBranded,type:this,...Ze(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new od({...Ze(this._def),innerType:this,catchValue:t,typeName:Ge.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Md.create(this,e)}readonly(){return ld.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const K_=/^c[^\s-]{8,}$/i,Z_=/^[0-9a-z]+$/,J_=/^[0-9A-HJKMNP-TV-Z]{26}$/i,W_=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,X_=/^[a-z0-9_-]{21}$/i,Q_=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eb=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tb=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nb="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let $c;const ib=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rb=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,sb=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ab=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ob=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lb=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ny="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ub=new RegExp(`^${Ny}$`);function My(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);const t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function cb(r){return new RegExp(`^${My(r)}$`)}function db(r){let e=`${Ny}T${My(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function fb(r,e){return!!((e==="v4"||!e)&&ib.test(r)||(e==="v6"||!e)&&sb.test(r))}function hb(r,e){if(!Q_.test(r))return!1;try{const[t]=r.split(".");if(!t)return!1;const i=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(i));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function pb(r,e){return!!((e==="v4"||!e)&&rb.test(r)||(e==="v6"||!e)&&ab.test(r))}class Kn extends tt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ne.string){const o=this._getOrReturnCtx(e);return Te(o,{code:be.invalid_type,expected:Ne.string,received:o.parsedType}),He}const i=new nn;let a;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(a=this._getOrReturnCtx(e,a),Te(a,{code:be.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if(o.kind==="max")e.data.length>o.value&&(a=this._getOrReturnCtx(e,a),Te(a,{code:be.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,d=e.data.length<o.value;(u||d)&&(a=this._getOrReturnCtx(e,a),u?Te(a,{code:be.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):d&&Te(a,{code:be.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),i.dirty())}else if(o.kind==="email")tb.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"email",code:be.invalid_string,message:o.message}),i.dirty());else if(o.kind==="emoji")$c||($c=new RegExp(nb,"u")),$c.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"emoji",code:be.invalid_string,message:o.message}),i.dirty());else if(o.kind==="uuid")W_.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"uuid",code:be.invalid_string,message:o.message}),i.dirty());else if(o.kind==="nanoid")X_.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"nanoid",code:be.invalid_string,message:o.message}),i.dirty());else if(o.kind==="cuid")K_.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"cuid",code:be.invalid_string,message:o.message}),i.dirty());else if(o.kind==="cuid2")Z_.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"cuid2",code:be.invalid_string,message:o.message}),i.dirty());else if(o.kind==="ulid")J_.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"ulid",code:be.invalid_string,message:o.message}),i.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),Te(a,{validation:"url",code:be.invalid_string,message:o.message}),i.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"regex",code:be.invalid_string,message:o.message}),i.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(e,a),Te(a,{code:be.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),i.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(a=this._getOrReturnCtx(e,a),Te(a,{code:be.invalid_string,validation:{startsWith:o.value},message:o.message}),i.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(a=this._getOrReturnCtx(e,a),Te(a,{code:be.invalid_string,validation:{endsWith:o.value},message:o.message}),i.dirty()):o.kind==="datetime"?db(o).test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{code:be.invalid_string,validation:"datetime",message:o.message}),i.dirty()):o.kind==="date"?ub.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{code:be.invalid_string,validation:"date",message:o.message}),i.dirty()):o.kind==="time"?cb(o).test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{code:be.invalid_string,validation:"time",message:o.message}),i.dirty()):o.kind==="duration"?eb.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"duration",code:be.invalid_string,message:o.message}),i.dirty()):o.kind==="ip"?fb(e.data,o.version)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"ip",code:be.invalid_string,message:o.message}),i.dirty()):o.kind==="jwt"?hb(e.data,o.alg)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"jwt",code:be.invalid_string,message:o.message}),i.dirty()):o.kind==="cidr"?pb(e.data,o.version)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"cidr",code:be.invalid_string,message:o.message}),i.dirty()):o.kind==="base64"?ob.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"base64",code:be.invalid_string,message:o.message}),i.dirty()):o.kind==="base64url"?lb.test(e.data)||(a=this._getOrReturnCtx(e,a),Te(a,{validation:"base64url",code:be.invalid_string,message:o.message}),i.dirty()):at.assertNever(o);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(a=>e.test(a),{validation:t,code:be.invalid_string,...Me.errToObj(i)})}_addCheck(e){return new Kn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Me.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Me.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Me.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Me.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Me.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Me.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Me.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Me.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Me.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Me.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Me.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Me.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Me.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Me.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Me.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Me.errToObj(t)})}nonempty(e){return this.min(1,Me.errToObj(e))}trim(){return new Kn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Kn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Kn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Kn.create=r=>new Kn({checks:[],typeName:Ge.ZodString,coerce:(r==null?void 0:r.coerce)??!1,...Ze(r)});function mb(r,e){const t=(r.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,a=t>i?t:i,o=Number.parseInt(r.toFixed(a).replace(".","")),u=Number.parseInt(e.toFixed(a).replace(".",""));return o%u/10**a}class xr extends tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ne.number){const o=this._getOrReturnCtx(e);return Te(o,{code:be.invalid_type,expected:Ne.number,received:o.parsedType}),He}let i;const a=new nn;for(const o of this._def.checks)o.kind==="int"?at.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:be.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(i=this._getOrReturnCtx(e,i),Te(i,{code:be.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(i=this._getOrReturnCtx(e,i),Te(i,{code:be.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?mb(e.data,o.value)!==0&&(i=this._getOrReturnCtx(e,i),Te(i,{code:be.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:be.not_finite,message:o.message}),a.dirty()):at.assertNever(o);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Me.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Me.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Me.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Me.toString(t))}setLimit(e,t,i,a){return new xr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:Me.toString(a)}]})}_addCheck(e){return new xr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Me.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Me.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&at.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}xr.create=r=>new xr({checks:[],typeName:Ge.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...Ze(r)});class wr extends tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ne.bigint)return this._getInvalidInput(e);let i;const a=new nn;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(i=this._getOrReturnCtx(e,i),Te(i,{code:be.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(i=this._getOrReturnCtx(e,i),Te(i,{code:be.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Te(i,{code:be.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):at.assertNever(o);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Te(t,{code:be.invalid_type,expected:Ne.bigint,received:t.parsedType}),He}gte(e,t){return this.setLimit("min",e,!0,Me.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Me.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Me.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Me.toString(t))}setLimit(e,t,i,a){return new wr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:Me.toString(a)}]})}_addCheck(e){return new wr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}wr.create=r=>new wr({checks:[],typeName:Ge.ZodBigInt,coerce:(r==null?void 0:r.coerce)??!1,...Ze(r)});class _l extends tt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ne.boolean){const i=this._getOrReturnCtx(e);return Te(i,{code:be.invalid_type,expected:Ne.boolean,received:i.parsedType}),He}return Rn(e.data)}}_l.create=r=>new _l({typeName:Ge.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...Ze(r)});class Ts extends tt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ne.date){const o=this._getOrReturnCtx(e);return Te(o,{code:be.invalid_type,expected:Ne.date,received:o.parsedType}),He}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Te(o,{code:be.invalid_date}),He}const i=new nn;let a;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(a=this._getOrReturnCtx(e,a),Te(a,{code:be.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),i.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(a=this._getOrReturnCtx(e,a),Te(a,{code:be.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),i.dirty()):at.assertNever(o);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ts({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Me.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Me.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ts.create=r=>new Ts({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:Ge.ZodDate,...Ze(r)});class Im extends tt{_parse(e){if(this._getType(e)!==Ne.symbol){const i=this._getOrReturnCtx(e);return Te(i,{code:be.invalid_type,expected:Ne.symbol,received:i.parsedType}),He}return Rn(e.data)}}Im.create=r=>new Im({typeName:Ge.ZodSymbol,...Ze(r)});class Om extends tt{_parse(e){if(this._getType(e)!==Ne.undefined){const i=this._getOrReturnCtx(e);return Te(i,{code:be.invalid_type,expected:Ne.undefined,received:i.parsedType}),He}return Rn(e.data)}}Om.create=r=>new Om({typeName:Ge.ZodUndefined,...Ze(r)});class Um extends tt{_parse(e){if(this._getType(e)!==Ne.null){const i=this._getOrReturnCtx(e);return Te(i,{code:be.invalid_type,expected:Ne.null,received:i.parsedType}),He}return Rn(e.data)}}Um.create=r=>new Um({typeName:Ge.ZodNull,...Ze(r)});class Lm extends tt{constructor(){super(...arguments),this._any=!0}_parse(e){return Rn(e.data)}}Lm.create=r=>new Lm({typeName:Ge.ZodAny,...Ze(r)});class id extends tt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Rn(e.data)}}id.create=r=>new id({typeName:Ge.ZodUnknown,...Ze(r)});class Fi extends tt{_parse(e){const t=this._getOrReturnCtx(e);return Te(t,{code:be.invalid_type,expected:Ne.never,received:t.parsedType}),He}}Fi.create=r=>new Fi({typeName:Ge.ZodNever,...Ze(r)});class Pm extends tt{_parse(e){if(this._getType(e)!==Ne.undefined){const i=this._getOrReturnCtx(e);return Te(i,{code:be.invalid_type,expected:Ne.void,received:i.parsedType}),He}return Rn(e.data)}}Pm.create=r=>new Pm({typeName:Ge.ZodVoid,...Ze(r)});class Zn extends tt{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),a=this._def;if(t.parsedType!==Ne.array)return Te(t,{code:be.invalid_type,expected:Ne.array,received:t.parsedType}),He;if(a.exactLength!==null){const u=t.data.length>a.exactLength.value,d=t.data.length<a.exactLength.value;(u||d)&&(Te(t,{code:u?be.too_big:be.too_small,minimum:d?a.exactLength.value:void 0,maximum:u?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),i.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(Te(t,{code:be.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),i.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(Te(t,{code:be.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((u,d)=>a.type._parseAsync(new Jn(t,u,t.path,d)))).then(u=>nn.mergeArray(i,u));const o=[...t.data].map((u,d)=>a.type._parseSync(new Jn(t,u,t.path,d)));return nn.mergeArray(i,o)}get element(){return this._def.type}min(e,t){return new Zn({...this._def,minLength:{value:e,message:Me.toString(t)}})}max(e,t){return new Zn({...this._def,maxLength:{value:e,message:Me.toString(t)}})}length(e,t){return new Zn({...this._def,exactLength:{value:e,message:Me.toString(t)}})}nonempty(e){return this.min(1,e)}}Zn.create=(r,e)=>new Zn({type:r,minLength:null,maxLength:null,exactLength:null,typeName:Ge.ZodArray,...Ze(e)});function fs(r){if(r instanceof Mt){const e={};for(const t in r.shape){const i=r.shape[t];e[t]=Gi.create(fs(i))}return new Mt({...r._def,shape:()=>e})}else return r instanceof Zn?new Zn({...r._def,type:fs(r.element)}):r instanceof Gi?Gi.create(fs(r.unwrap())):r instanceof Es?Es.create(fs(r.unwrap())):r instanceof Tr?Tr.create(r.items.map(e=>fs(e))):r}class Mt extends tt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=at.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Ne.object){const p=this._getOrReturnCtx(e);return Te(p,{code:be.invalid_type,expected:Ne.object,received:p.parsedType}),He}const{status:i,ctx:a}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),d=[];if(!(this._def.catchall instanceof Fi&&this._def.unknownKeys==="strip"))for(const p in a.data)u.includes(p)||d.push(p);const m=[];for(const p of u){const y=o[p],_=a.data[p];m.push({key:{status:"valid",value:p},value:y._parse(new Jn(a,_,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof Fi){const p=this._def.unknownKeys;if(p==="passthrough")for(const y of d)m.push({key:{status:"valid",value:y},value:{status:"valid",value:a.data[y]}});else if(p==="strict")d.length>0&&(Te(a,{code:be.unrecognized_keys,keys:d}),i.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const y of d){const _=a.data[y];m.push({key:{status:"valid",value:y},value:p._parse(new Jn(a,_,a.path,y)),alwaysSet:y in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const p=[];for(const y of m){const _=await y.key,x=await y.value;p.push({key:_,value:x,alwaysSet:y.alwaysSet})}return p}).then(p=>nn.mergeObjectSync(i,p)):nn.mergeObjectSync(i,m)}get shape(){return this._def.shape()}strict(e){return Me.errToObj,new Mt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{var o,u;const a=((u=(o=this._def).errorMap)==null?void 0:u.call(o,t,i).message)??i.defaultError;return t.code==="unrecognized_keys"?{message:Me.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new Mt({...this._def,unknownKeys:"strip"})}passthrough(){return new Mt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Mt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ge.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Mt({...this._def,catchall:e})}pick(e){const t={};for(const i of at.objectKeys(e))e[i]&&this.shape[i]&&(t[i]=this.shape[i]);return new Mt({...this._def,shape:()=>t})}omit(e){const t={};for(const i of at.objectKeys(this.shape))e[i]||(t[i]=this.shape[i]);return new Mt({...this._def,shape:()=>t})}deepPartial(){return fs(this)}partial(e){const t={};for(const i of at.objectKeys(this.shape)){const a=this.shape[i];e&&!e[i]?t[i]=a:t[i]=a.optional()}return new Mt({...this._def,shape:()=>t})}required(e){const t={};for(const i of at.objectKeys(this.shape))if(e&&!e[i])t[i]=this.shape[i];else{let o=this.shape[i];for(;o instanceof Gi;)o=o._def.innerType;t[i]=o}return new Mt({...this._def,shape:()=>t})}keyof(){return Dy(at.objectKeys(this.shape))}}Mt.create=(r,e)=>new Mt({shape:()=>r,unknownKeys:"strip",catchall:Fi.create(),typeName:Ge.ZodObject,...Ze(e)});Mt.strictCreate=(r,e)=>new Mt({shape:()=>r,unknownKeys:"strict",catchall:Fi.create(),typeName:Ge.ZodObject,...Ze(e)});Mt.lazycreate=(r,e)=>new Mt({shape:r,unknownKeys:"strip",catchall:Fi.create(),typeName:Ge.ZodObject,...Ze(e)});class bl extends tt{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function a(o){for(const d of o)if(d.result.status==="valid")return d.result;for(const d of o)if(d.result.status==="dirty")return t.common.issues.push(...d.ctx.common.issues),d.result;const u=o.map(d=>new mi(d.ctx.common.issues));return Te(t,{code:be.invalid_union,unionErrors:u}),He}if(t.common.async)return Promise.all(i.map(async o=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(a);{let o;const u=[];for(const m of i){const p={...t,common:{...t.common,issues:[]},parent:null},y=m._parseSync({data:t.data,path:t.path,parent:p});if(y.status==="valid")return y;y.status==="dirty"&&!o&&(o={result:y,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;const d=u.map(m=>new mi(m));return Te(t,{code:be.invalid_union,unionErrors:d}),He}}get options(){return this._def.options}}bl.create=(r,e)=>new bl({options:r,typeName:Ge.ZodUnion,...Ze(e)});function rd(r,e){const t=Bi(r),i=Bi(e);if(r===e)return{valid:!0,data:r};if(t===Ne.object&&i===Ne.object){const a=at.objectKeys(e),o=at.objectKeys(r).filter(d=>a.indexOf(d)!==-1),u={...r,...e};for(const d of o){const m=rd(r[d],e[d]);if(!m.valid)return{valid:!1};u[d]=m.data}return{valid:!0,data:u}}else if(t===Ne.array&&i===Ne.array){if(r.length!==e.length)return{valid:!1};const a=[];for(let o=0;o<r.length;o++){const u=r[o],d=e[o],m=rd(u,d);if(!m.valid)return{valid:!1};a.push(m.data)}return{valid:!0,data:a}}else return t===Ne.date&&i===Ne.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class xl extends tt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),a=(o,u)=>{if(Nm(o)||Nm(u))return He;const d=rd(o.value,u.value);return d.valid?((Mm(o)||Mm(u))&&t.dirty(),{status:t.value,value:d.data}):(Te(i,{code:be.invalid_intersection_types}),He)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([o,u])=>a(o,u)):a(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}xl.create=(r,e,t)=>new xl({left:r,right:e,typeName:Ge.ZodIntersection,...Ze(t)});class Tr extends tt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ne.array)return Te(i,{code:be.invalid_type,expected:Ne.array,received:i.parsedType}),He;if(i.data.length<this._def.items.length)return Te(i,{code:be.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&i.data.length>this._def.items.length&&(Te(i,{code:be.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...i.data].map((u,d)=>{const m=this._def.items[d]||this._def.rest;return m?m._parse(new Jn(i,u,i.path,d)):null}).filter(u=>!!u);return i.common.async?Promise.all(o).then(u=>nn.mergeArray(t,u)):nn.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new Tr({...this._def,rest:e})}}Tr.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Tr({items:r,typeName:Ge.ZodTuple,rest:null,...Ze(e)})};class wl extends tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ne.object)return Te(i,{code:be.invalid_type,expected:Ne.object,received:i.parsedType}),He;const a=[],o=this._def.keyType,u=this._def.valueType;for(const d in i.data)a.push({key:o._parse(new Jn(i,d,i.path,d)),value:u._parse(new Jn(i,i.data[d],i.path,d)),alwaysSet:d in i.data});return i.common.async?nn.mergeObjectAsync(t,a):nn.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,i){return t instanceof tt?new wl({keyType:e,valueType:t,typeName:Ge.ZodRecord,...Ze(i)}):new wl({keyType:Kn.create(),valueType:e,typeName:Ge.ZodRecord,...Ze(t)})}}class zm extends tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ne.map)return Te(i,{code:be.invalid_type,expected:Ne.map,received:i.parsedType}),He;const a=this._def.keyType,o=this._def.valueType,u=[...i.data.entries()].map(([d,m],p)=>({key:a._parse(new Jn(i,d,i.path,[p,"key"])),value:o._parse(new Jn(i,m,i.path,[p,"value"]))}));if(i.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const m of u){const p=await m.key,y=await m.value;if(p.status==="aborted"||y.status==="aborted")return He;(p.status==="dirty"||y.status==="dirty")&&t.dirty(),d.set(p.value,y.value)}return{status:t.value,value:d}})}else{const d=new Map;for(const m of u){const p=m.key,y=m.value;if(p.status==="aborted"||y.status==="aborted")return He;(p.status==="dirty"||y.status==="dirty")&&t.dirty(),d.set(p.value,y.value)}return{status:t.value,value:d}}}}zm.create=(r,e,t)=>new zm({valueType:e,keyType:r,typeName:Ge.ZodMap,...Ze(t)});class Pa extends tt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ne.set)return Te(i,{code:be.invalid_type,expected:Ne.set,received:i.parsedType}),He;const a=this._def;a.minSize!==null&&i.data.size<a.minSize.value&&(Te(i,{code:be.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&i.data.size>a.maxSize.value&&(Te(i,{code:be.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const o=this._def.valueType;function u(m){const p=new Set;for(const y of m){if(y.status==="aborted")return He;y.status==="dirty"&&t.dirty(),p.add(y.value)}return{status:t.value,value:p}}const d=[...i.data.values()].map((m,p)=>o._parse(new Jn(i,m,i.path,p)));return i.common.async?Promise.all(d).then(m=>u(m)):u(d)}min(e,t){return new Pa({...this._def,minSize:{value:e,message:Me.toString(t)}})}max(e,t){return new Pa({...this._def,maxSize:{value:e,message:Me.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Pa.create=(r,e)=>new Pa({valueType:r,minSize:null,maxSize:null,typeName:Ge.ZodSet,...Ze(e)});class sd extends tt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}sd.create=(r,e)=>new sd({getter:r,typeName:Ge.ZodLazy,...Ze(e)});class Bm extends tt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Te(t,{received:t.data,code:be.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bm.create=(r,e)=>new Bm({value:r,typeName:Ge.ZodLiteral,...Ze(e)});function Dy(r,e){return new Ss({values:r,typeName:Ge.ZodEnum,...Ze(e)})}class Ss extends tt{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return Te(t,{expected:at.joinValues(i),received:t.parsedType,code:be.invalid_type}),He}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return Te(t,{received:t.data,code:be.invalid_enum_value,options:i}),He}return Rn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ss.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ss.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}Ss.create=Dy;class Vm extends tt{_parse(e){const t=at.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Ne.string&&i.parsedType!==Ne.number){const a=at.objectValues(t);return Te(i,{expected:at.joinValues(a),received:i.parsedType,code:be.invalid_type}),He}if(this._cache||(this._cache=new Set(at.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=at.objectValues(t);return Te(i,{received:i.data,code:be.invalid_enum_value,options:a}),He}return Rn(e.data)}get enum(){return this._def.values}}Vm.create=(r,e)=>new Vm({values:r,typeName:Ge.ZodNativeEnum,...Ze(e)});class Tl extends tt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ne.promise&&t.common.async===!1)return Te(t,{code:be.invalid_type,expected:Ne.promise,received:t.parsedType}),He;const i=t.parsedType===Ne.promise?t.data:Promise.resolve(t.data);return Rn(i.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Tl.create=(r,e)=>new Tl({type:r,typeName:Ge.ZodPromise,...Ze(e)});class Cs extends tt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),a=this._def.effect||null,o={addIssue:u=>{Te(i,u),u.fatal?t.abort():t.dirty()},get path(){return i.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const u=a.transform(i.data,o);if(i.common.async)return Promise.resolve(u).then(async d=>{if(t.value==="aborted")return He;const m=await this._def.schema._parseAsync({data:d,path:i.path,parent:i});return m.status==="aborted"?He:m.status==="dirty"||t.value==="dirty"?Ma(m.value):m});{if(t.value==="aborted")return He;const d=this._def.schema._parseSync({data:u,path:i.path,parent:i});return d.status==="aborted"?He:d.status==="dirty"||t.value==="dirty"?Ma(d.value):d}}if(a.type==="refinement"){const u=d=>{const m=a.refinement(d,o);if(i.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(i.common.async===!1){const d=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return d.status==="aborted"?He:(d.status==="dirty"&&t.dirty(),u(d.value),{status:t.value,value:d.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(d=>d.status==="aborted"?He:(d.status==="dirty"&&t.dirty(),u(d.value).then(()=>({status:t.value,value:d.value}))))}if(a.type==="transform")if(i.common.async===!1){const u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!ws(u))return He;const d=a.transform(u.value,o);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:d}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>ws(u)?Promise.resolve(a.transform(u.value,o)).then(d=>({status:t.value,value:d})):He);at.assertNever(a)}}Cs.create=(r,e,t)=>new Cs({schema:r,typeName:Ge.ZodEffects,effect:e,...Ze(t)});Cs.createWithPreprocess=(r,e,t)=>new Cs({schema:e,effect:{type:"preprocess",transform:r},typeName:Ge.ZodEffects,...Ze(t)});class Gi extends tt{_parse(e){return this._getType(e)===Ne.undefined?Rn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gi.create=(r,e)=>new Gi({innerType:r,typeName:Ge.ZodOptional,...Ze(e)});class Es extends tt{_parse(e){return this._getType(e)===Ne.null?Rn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Es.create=(r,e)=>new Es({innerType:r,typeName:Ge.ZodNullable,...Ze(e)});class ad extends tt{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===Ne.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ad.create=(r,e)=>new ad({innerType:r,typeName:Ge.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ze(e)});class od extends tt{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return vl(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new mi(i.common.issues)},input:i.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new mi(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}od.create=(r,e)=>new od({innerType:r,typeName:Ge.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ze(e)});class qm extends tt{_parse(e){if(this._getType(e)!==Ne.nan){const i=this._getOrReturnCtx(e);return Te(i,{code:be.invalid_type,expected:Ne.nan,received:i.parsedType}),He}return{status:"valid",value:e.data}}}qm.create=r=>new qm({typeName:Ge.ZodNaN,...Ze(r)});class gb extends tt{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class Md extends tt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?He:o.status==="dirty"?(t.dirty(),Ma(o.value)):this._def.out._parseAsync({data:o.value,path:i.path,parent:i})})();{const a=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?He:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:i.path,parent:i})}}static create(e,t){return new Md({in:e,out:t,typeName:Ge.ZodPipeline})}}class ld extends tt{_parse(e){const t=this._def.innerType._parse(e),i=a=>(ws(a)&&(a.value=Object.freeze(a.value)),a);return vl(t)?t.then(a=>i(a)):i(t)}unwrap(){return this._def.innerType}}ld.create=(r,e)=>new ld({innerType:r,typeName:Ge.ZodReadonly,...Ze(e)});var Ge;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(Ge||(Ge={}));const pr=Kn.create,Gm=xr.create;wr.create;const yb=_l.create;Ts.create;const Fm=id.create;Fi.create;const Da=Zn.create,vb=Mt.create,_b=bl.create;xl.create;Tr.create;const bb=wl.create,xb=sd.create,wb=Ss.create;Tl.create;Gi.create;Es.create;const ss={string:(r=>Kn.create({...r,coerce:!0})),number:(r=>xr.create({...r,coerce:!0})),boolean:(r=>_l.create({...r,coerce:!0})),bigint:(r=>wr.create({...r,coerce:!0})),date:(r=>Ts.create({...r,coerce:!0}))};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Tb,Sb;function Cb(){return{geminiUrl:Tb,vertexUrl:Sb}}function Eb(r,e,t){var i,a,o;if(!(!((i=r.httpOptions)===null||i===void 0)&&i.baseUrl)){const u=Cb();return r.vertexai?(a=u.vertexUrl)!==null&&a!==void 0?a:e:(o=u.geminiUrl)!==null&&o!==void 0?o:t}return r.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ks{}function Ve(r,e){const t=/\{([^}]+)\}/g;return r.replace(t,(i,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const o=e[a];return o!=null?String(o):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function h(r,e,t){for(let o=0;o<e.length-1;o++){const u=e[o];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in r))if(Array.isArray(t))r[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(r[d])){const m=r[d];if(Array.isArray(t))for(let p=0;p<m.length;p++){const y=m[p];h(y,e.slice(o+1),t[p])}else for(const p of m)h(p,e.slice(o+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in r||(r[d]=[{}]);const m=r[d];h(m[0],e.slice(o+1),t);return}(!r[u]||typeof r[u]!="object")&&(r[u]={}),r=r[u]}const i=e[e.length-1],a=r[i];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else r[i]=t}function f(r,e){try{if(e.length===1&&e[0]==="_self")return r;for(let t=0;t<e.length;t++){if(typeof r!="object"||r===null)return;const i=e[t];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in r){const o=r[a];return Array.isArray(o)?o.map(u=>f(u,e.slice(t+1))):void 0}else return}else r=r[i]}return r}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hm;(function(r){r.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",r.OUTCOME_OK="OUTCOME_OK",r.OUTCOME_FAILED="OUTCOME_FAILED",r.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Hm||(Hm={}));var jm;(function(r){r.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",r.PYTHON="PYTHON"})(jm||(jm={}));var kn;(function(r){r.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",r.STRING="STRING",r.NUMBER="NUMBER",r.INTEGER="INTEGER",r.BOOLEAN="BOOLEAN",r.ARRAY="ARRAY",r.OBJECT="OBJECT",r.NULL="NULL"})(kn||(kn={}));var $m;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})($m||($m={}));var Ym;(function(r){r.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",r.SEVERITY="SEVERITY",r.PROBABILITY="PROBABILITY"})(Ym||(Ym={}));var Km;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE",r.OFF="OFF"})(Km||(Km={}));var Zm;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(Zm||(Zm={}));var Jm;(function(r){r.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",r.NO_AUTH="NO_AUTH",r.API_KEY_AUTH="API_KEY_AUTH",r.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",r.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",r.OAUTH="OAUTH",r.OIDC_AUTH="OIDC_AUTH"})(Jm||(Jm={}));var Wm;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.IMAGE_SAFETY="IMAGE_SAFETY",r.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Wm||(Wm={}));var Xm;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(Xm||(Xm={}));var Qm;(function(r){r.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",r.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",r.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",r.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",r.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Qm||(Qm={}));var eg;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(eg||(eg={}));var tg;(function(r){r.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",r.ON_DEMAND="ON_DEMAND",r.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(tg||(tg={}));var za;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.AUDIO="AUDIO"})(za||(za={}));var ng;(function(r){r.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",r.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",r.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",r.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ng||(ng={}));var ud;(function(r){r.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",r.JOB_STATE_QUEUED="JOB_STATE_QUEUED",r.JOB_STATE_PENDING="JOB_STATE_PENDING",r.JOB_STATE_RUNNING="JOB_STATE_RUNNING",r.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",r.JOB_STATE_FAILED="JOB_STATE_FAILED",r.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",r.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",r.JOB_STATE_PAUSED="JOB_STATE_PAUSED",r.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",r.JOB_STATE_UPDATING="JOB_STATE_UPDATING",r.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ud||(ud={}));var ig;(function(r){r.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",r.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",r.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",r.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",r.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",r.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",r.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ig||(ig={}));var rg;(function(r){r.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",r.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",r.BALANCED="BALANCED",r.PRIORITIZE_COST="PRIORITIZE_COST"})(rg||(rg={}));var sg;(function(r){r.UNSPECIFIED="UNSPECIFIED",r.BLOCKING="BLOCKING",r.NON_BLOCKING="NON_BLOCKING"})(sg||(sg={}));var ag;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(ag||(ag={}));var og;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(og||(og={}));var lg;(function(r){r.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",r.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",r.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(lg||(lg={}));var ug;(function(r){r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(ug||(ug={}));var cg;(function(r){r.DONT_ALLOW="DONT_ALLOW",r.ALLOW_ADULT="ALLOW_ADULT",r.ALLOW_ALL="ALLOW_ALL"})(cg||(cg={}));var dg;(function(r){r.auto="auto",r.en="en",r.ja="ja",r.ko="ko",r.hi="hi"})(dg||(dg={}));var fg;(function(r){r.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",r.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",r.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",r.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",r.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fg||(fg={}));var hg;(function(r){r.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",r.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",r.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",r.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(hg||(hg={}));var pg;(function(r){r.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",r.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",r.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",r.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(pg||(pg={}));var mg;(function(r){r.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",r.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",r.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",r.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",r.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",r.EDIT_MODE_STYLE="EDIT_MODE_STYLE",r.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",r.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(mg||(mg={}));var gg;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.PROCESSING="PROCESSING",r.ACTIVE="ACTIVE",r.FAILED="FAILED"})(gg||(gg={}));var yg;(function(r){r.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",r.UPLOADED="UPLOADED",r.GENERATED="GENERATED"})(yg||(yg={}));var vg;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.VIDEO="VIDEO",r.AUDIO="AUDIO",r.DOCUMENT="DOCUMENT"})(vg||(vg={}));var _g;(function(r){r.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",r.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",r.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_g||(_g={}));var bg;(function(r){r.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",r.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",r.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(bg||(bg={}));var xg;(function(r){r.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",r.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",r.NO_INTERRUPTION="NO_INTERRUPTION"})(xg||(xg={}));var wg;(function(r){r.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",r.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",r.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wg||(wg={}));var Tg;(function(r){r.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",r.SILENT="SILENT",r.WHEN_IDLE="WHEN_IDLE",r.INTERRUPT="INTERRUPT"})(Tg||(Tg={}));var Sg;(function(r){r.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",r.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",r.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",r.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",r.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",r.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",r.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",r.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",r.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",r.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",r.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",r.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",r.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Sg||(Sg={}));var gs;(function(r){r.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",r.PLAY="PLAY",r.PAUSE="PAUSE",r.STOP="STOP",r.RESET_CONTEXT="RESET_CONTEXT"})(gs||(gs={}));class ka{get text(){var e,t,i,a,o,u,d,m;if(((a=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",y=!1;const _=[];for(const x of(m=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[b,w]of Object.entries(x))b!=="text"&&b!=="thought"&&(w!==null||w!==void 0)&&_.push(b);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;y=!0,p+=x.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?p:void 0}get data(){var e,t,i,a,o,u,d,m;if(((a=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const y=[];for(const _ of(m=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[x,b]of Object.entries(_))x!=="inlineData"&&(b!==null||b!==void 0)&&y.push(x);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,a,o,u,d,m;if(((a=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,a,o,u,d,m,p;if(((a=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,a,o,u,d,m,p;if(((a=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.output}}class Cg{}class Eg{}class Ab{}class kb{}class Ag{}class kg{}class Rg{}class Rb{}class Ng{}class Mg{}class Dg{}class Nb{}class cd{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Mb{}class Db{}class Ib{get text(){var e,t,i;let a="",o=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,p]of Object.entries(d))m!=="text"&&m!=="thought"&&p!==null&&u.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;o=!0,a+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var e,t,i;let a="";const o=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,m]of Object.entries(u))d!=="inlineData"&&m!==null&&o.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Ob{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(r,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(r.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Iy(r,e){const t=gt(r,e);return t?t.startsWith("publishers/")&&r.isVertexAI()?`projects/${r.getProject()}/locations/${r.getLocation()}/${t}`:t.startsWith("models/")&&r.isVertexAI()?`projects/${r.getProject()}/locations/${r.getLocation()}/publishers/google/${t}`:t:""}function Oy(r,e){return Array.isArray(e)?e.map(t=>Sl(r,t)):[Sl(r,e)]}function Sl(r,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Ub(r,e){const t=Sl(r,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Lb(r,e){const t=Sl(r,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Ig(r,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Uy(r,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Ig(r,t)):[Ig(r,e)]}function dd(r){return r!=null&&typeof r=="object"&&"parts"in r&&Array.isArray(r.parts)}function Og(r){return r!=null&&typeof r=="object"&&"functionCall"in r}function Ug(r){return r!=null&&typeof r=="object"&&"functionResponse"in r}function tn(r,e){if(e==null)throw new Error("ContentUnion is required");return dd(e)?e:{role:"user",parts:Uy(r,e)}}function Ly(r,e){if(!e)return[];if(r.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=tn(r,t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(r.isVertexAI()){const t=tn(r,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>tn(r,t)):[tn(r,e)]}function Bn(r,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Og(e)||Ug(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(r,e)]}const t=[],i=[],a=dd(e[0]);for(const o of e){const u=dd(o);if(u!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)t.push(o);else{if(Og(o)||Ug(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(o)}}return a||t.push({role:"user",parts:Uy(r,i)}),t}const Pb=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Lg=wb(["string","number","integer","object","array","boolean","null"]),zb=_b([Lg,Da(Lg)]);function Bb(r=!0){const e=xb(()=>{const t=vb({type:zb.optional(),format:pr().optional(),title:pr().optional(),description:pr().optional(),default:Fm().optional(),items:e.optional(),minItems:ss.string().optional(),maxItems:ss.string().optional(),enum:Da(Fm()).optional(),properties:bb(pr(),e).optional(),required:Da(pr()).optional(),minProperties:ss.string().optional(),maxProperties:ss.string().optional(),propertyOrdering:Da(pr()).optional(),minimum:Gm().optional(),maximum:Gm().optional(),minLength:ss.string().optional(),maxLength:ss.string().optional(),pattern:pr().optional(),anyOf:Da(e).optional(),additionalProperties:yb().optional()});return r?t.strict():t});return e}function Vb(r,e){r.includes("null")&&(e.nullable=!0);const t=r.filter(i=>i!=="null");if(t.length===1)e.type=Object.keys(kn).includes(t[0].toUpperCase())?kn[t[0].toUpperCase()]:kn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.keys(kn).includes(i.toUpperCase())?kn[i.toUpperCase()]:kn.TYPE_UNSPECIFIED})}}function _s(r){const e={},t=["items"],i=["anyOf"],a=["properties"];if(r.type&&r.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=r.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,r=o[1]):o[1].type==="null"&&(e.nullable=!0,r=o[0])),r.type instanceof Array&&Vb(r.type,e);for(const[u,d]of Object.entries(r))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.keys(kn).includes(d.toUpperCase())?d.toUpperCase():kn.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=_s(d);else if(i.includes(u)){const m=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}m.push(_s(p))}e[u]=m}else if(a.includes(u)){const m={};for(const[p,y]of Object.entries(d))m[p]=_s(y);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Cl(r,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=Bb().parse(e);return _s(t)}else return _s(e)}function Py(r,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Dd(r,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ya(r,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=Cl(r,t.parameters)),t.response&&(t.response=Cl(r,t.response));return e}function Ka(r,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const i of e)t.push(i);return t}function qb(r,e,t,i=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===i;return r.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${r.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${r.getProject()}/locations/${r.getLocation()}/${e}`:a?`projects/${r.getProject()}/locations/${r.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function Hi(r,e){if(typeof e!="string")throw new Error("name must be a string");return qb(r,e,"cachedContents")}function zy(r,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ji(r,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Gb(r){return r!=null&&typeof r=="object"&&"name"in r}function Fb(r){return r!=null&&typeof r=="object"&&"video"in r}function Hb(r){return r!=null&&typeof r=="object"&&"uri"in r}function By(r,e){var t;let i;if(Gb(e)&&(i=e.name),!(Hb(e)&&(i=e.uri,i===void 0))&&!(Fb(e)&&(i=(t=e.video)===null||t===void 0?void 0:t.uri,i===void 0))){if(typeof e=="string"&&(i=e),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const o=i.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${i}`);i=o[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Vy(r,e){let t;return r.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function qy(r,e){for(const t of["models","tunedModels","publisherModels"])if(jb(e,t))return e[t];return[]}function jb(r,e){return r!==null&&typeof r=="object"&&e in r}function $b(r,e={}){const t=r,i={name:t.name,description:t.description,parameters:_s(Rl(t.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Yb(r,e={}){const t=[],i=new Set;for(const a of r){const o=a.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const u=$b(a,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function Kb(r){const e=[];for(const t of r)e.push(Rl(t));return e}function Zb(r){const e={};for(const[t,i]of Object.entries(r)){const a=i;e[t]=Rl(a)}return e}function Rl(r){const e=new Set(["items"]),t=new Set(["anyOf"]),i=new Set(["properties"]),a={};for(const[o,u]of Object.entries(r))if(e.has(o))a[o]=Rl(u);else if(t.has(o))a[o]=Kb(u);else if(i.has(o))a[o]=Zb(u);else if(o==="type"){const d=u.toUpperCase();a[o]=Object.keys(kn).includes(d)?d:kn.TYPE_UNSPECIFIED}else Pb.has(o)&&(a[o]=u);return a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jb(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function Wb(r,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["data"]);i!=null&&h(t,["data"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function Xb(r,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["fileUri"]);i!=null&&h(t,["fileUri"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function Qb(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],Jb(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],Wb(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],Xb(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function Pg(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>Qb(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function ex(r,e){const t={},i=f(e,["behavior"]);i!=null&&h(t,["behavior"],i);const a=f(e,["description"]);a!=null&&h(t,["description"],a);const o=f(e,["name"]);o!=null&&h(t,["name"],o);const u=f(e,["parameters"]);u!=null&&h(t,["parameters"],u);const d=f(e,["response"]);return d!=null&&h(t,["response"],d),t}function tx(r,e){const t={},i=f(e,["startTime"]);i!=null&&h(t,["startTime"],i);const a=f(e,["endTime"]);return a!=null&&h(t,["endTime"],a),t}function nx(r,e){const t={},i=f(e,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],tx(r,i)),t}function ix(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["dynamicThreshold"]);return a!=null&&h(t,["dynamicThreshold"],a),t}function rx(r,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],ix(r,i)),t}function sx(){return{}}function ax(r,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>ex(r,p))),h(t,["functionDeclarations"],m)}if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(e,["googleSearch"]);a!=null&&h(t,["googleSearch"],nx(r,a));const o=f(e,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],rx(r,o)),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(e,["urlContext"])!=null&&h(t,["urlContext"],sx());const d=f(e,["codeExecution"]);return d!=null&&h(t,["codeExecution"],d),t}function ox(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["allowedFunctionNames"]);return a!=null&&h(t,["allowedFunctionNames"],a),t}function lx(r,e){const t={},i=f(e,["latitude"]);i!=null&&h(t,["latitude"],i);const a=f(e,["longitude"]);return a!=null&&h(t,["longitude"],a),t}function ux(r,e){const t={},i=f(e,["latLng"]);i!=null&&h(t,["latLng"],lx(r,i));const a=f(e,["languageCode"]);return a!=null&&h(t,["languageCode"],a),t}function cx(r,e){const t={},i=f(e,["functionCallingConfig"]);i!=null&&h(t,["functionCallingConfig"],ox(r,i));const a=f(e,["retrievalConfig"]);return a!=null&&h(t,["retrievalConfig"],ux(r,a)),t}function dx(r,e,t){const i={},a=f(e,["ttl"]);t!==void 0&&a!=null&&h(t,["ttl"],a);const o=f(e,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const u=f(e,["displayName"]);t!==void 0&&u!=null&&h(t,["displayName"],u);const d=f(e,["contents"]);if(t!==void 0&&d!=null){let _=Bn(r,d);Array.isArray(_)&&(_=_.map(x=>Pg(r,x))),h(t,["contents"],_)}const m=f(e,["systemInstruction"]);t!==void 0&&m!=null&&h(t,["systemInstruction"],Pg(r,tn(r,m)));const p=f(e,["tools"]);if(t!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(x=>ax(r,x))),h(t,["tools"],_)}const y=f(e,["toolConfig"]);if(t!==void 0&&y!=null&&h(t,["toolConfig"],cx(r,y)),f(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function fx(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],Iy(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],dx(r,a,t)),t}function hx(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Hi(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function px(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Hi(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function mx(r,e,t){const i={},a=f(e,["ttl"]);t!==void 0&&a!=null&&h(t,["ttl"],a);const o=f(e,["expireTime"]);return t!==void 0&&o!=null&&h(t,["expireTime"],o),i}function gx(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Hi(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],mx(r,a,t)),t}function yx(r,e,t){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);return t!==void 0&&o!=null&&h(t,["_query","pageToken"],o),i}function vx(r,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],yx(r,i,t)),t}function _x(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function bx(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["data"]);a!=null&&h(t,["data"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function xx(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["fileUri"]);a!=null&&h(t,["fileUri"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function wx(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],_x(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],bx(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],xx(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function zg(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>wx(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function Tx(r,e){const t={};if(f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(e,["description"]);i!=null&&h(t,["description"],i);const a=f(e,["name"]);a!=null&&h(t,["name"],a);const o=f(e,["parameters"]);o!=null&&h(t,["parameters"],o);const u=f(e,["response"]);return u!=null&&h(t,["response"],u),t}function Sx(r,e){const t={},i=f(e,["startTime"]);i!=null&&h(t,["startTime"],i);const a=f(e,["endTime"]);return a!=null&&h(t,["endTime"],a),t}function Cx(r,e){const t={},i=f(e,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],Sx(r,i)),t}function Ex(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["dynamicThreshold"]);return a!=null&&h(t,["dynamicThreshold"],a),t}function Ax(r,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],Ex(r,i)),t}function kx(){return{}}function Rx(r,e){const t={},i=f(e,["apiKeyString"]);return i!=null&&h(t,["apiKeyString"],i),t}function Nx(r,e){const t={},i=f(e,["apiKeyConfig"]);i!=null&&h(t,["apiKeyConfig"],Rx(r,i));const a=f(e,["authType"]);a!=null&&h(t,["authType"],a);const o=f(e,["googleServiceAccountConfig"]);o!=null&&h(t,["googleServiceAccountConfig"],o);const u=f(e,["httpBasicAuthConfig"]);u!=null&&h(t,["httpBasicAuthConfig"],u);const d=f(e,["oauthConfig"]);d!=null&&h(t,["oauthConfig"],d);const m=f(e,["oidcConfig"]);return m!=null&&h(t,["oidcConfig"],m),t}function Mx(r,e){const t={},i=f(e,["authConfig"]);return i!=null&&h(t,["authConfig"],Nx(r,i)),t}function Dx(r,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>Tx(r,_))),h(t,["functionDeclarations"],y)}const a=f(e,["retrieval"]);a!=null&&h(t,["retrieval"],a);const o=f(e,["googleSearch"]);o!=null&&h(t,["googleSearch"],Cx(r,o));const u=f(e,["googleSearchRetrieval"]);u!=null&&h(t,["googleSearchRetrieval"],Ax(r,u)),f(e,["enterpriseWebSearch"])!=null&&h(t,["enterpriseWebSearch"],kx());const m=f(e,["googleMaps"]);if(m!=null&&h(t,["googleMaps"],Mx(r,m)),f(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=f(e,["codeExecution"]);return p!=null&&h(t,["codeExecution"],p),t}function Ix(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["allowedFunctionNames"]);return a!=null&&h(t,["allowedFunctionNames"],a),t}function Ox(r,e){const t={},i=f(e,["latitude"]);i!=null&&h(t,["latitude"],i);const a=f(e,["longitude"]);return a!=null&&h(t,["longitude"],a),t}function Ux(r,e){const t={},i=f(e,["latLng"]);i!=null&&h(t,["latLng"],Ox(r,i));const a=f(e,["languageCode"]);return a!=null&&h(t,["languageCode"],a),t}function Lx(r,e){const t={},i=f(e,["functionCallingConfig"]);i!=null&&h(t,["functionCallingConfig"],Ix(r,i));const a=f(e,["retrievalConfig"]);return a!=null&&h(t,["retrievalConfig"],Ux(r,a)),t}function Px(r,e,t){const i={},a=f(e,["ttl"]);t!==void 0&&a!=null&&h(t,["ttl"],a);const o=f(e,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const u=f(e,["displayName"]);t!==void 0&&u!=null&&h(t,["displayName"],u);const d=f(e,["contents"]);if(t!==void 0&&d!=null){let x=Bn(r,d);Array.isArray(x)&&(x=x.map(b=>zg(r,b))),h(t,["contents"],x)}const m=f(e,["systemInstruction"]);t!==void 0&&m!=null&&h(t,["systemInstruction"],zg(r,tn(r,m)));const p=f(e,["tools"]);if(t!==void 0&&p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>Dx(r,b))),h(t,["tools"],x)}const y=f(e,["toolConfig"]);t!==void 0&&y!=null&&h(t,["toolConfig"],Lx(r,y));const _=f(e,["kmsKeyName"]);return t!==void 0&&_!=null&&h(t,["encryption_spec","kmsKeyName"],_),i}function zx(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],Iy(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],Px(r,a,t)),t}function Bx(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Hi(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function Vx(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Hi(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function qx(r,e,t){const i={},a=f(e,["ttl"]);t!==void 0&&a!=null&&h(t,["ttl"],a);const o=f(e,["expireTime"]);return t!==void 0&&o!=null&&h(t,["expireTime"],o),i}function Gx(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Hi(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],qx(r,a,t)),t}function Fx(r,e,t){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);return t!==void 0&&o!=null&&h(t,["_query","pageToken"],o),i}function Hx(r,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],Fx(r,i,t)),t}function ml(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["displayName"]);a!=null&&h(t,["displayName"],a);const o=f(e,["model"]);o!=null&&h(t,["model"],o);const u=f(e,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(e,["updateTime"]);d!=null&&h(t,["updateTime"],d);const m=f(e,["expireTime"]);m!=null&&h(t,["expireTime"],m);const p=f(e,["usageMetadata"]);return p!=null&&h(t,["usageMetadata"],p),t}function jx(){return{}}function $x(r,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=f(e,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>ml(r,u))),h(t,["cachedContents"],o)}return t}function gl(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["displayName"]);a!=null&&h(t,["displayName"],a);const o=f(e,["model"]);o!=null&&h(t,["model"],o);const u=f(e,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(e,["updateTime"]);d!=null&&h(t,["updateTime"],d);const m=f(e,["expireTime"]);m!=null&&h(t,["expireTime"],m);const p=f(e,["usageMetadata"]);return p!=null&&h(t,["usageMetadata"],p),t}function Yx(){return{}}function Kx(r,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=f(e,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>gl(r,u))),h(t,["cachedContents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var As;(function(r){r.PAGED_ITEM_BATCH_JOBS="batchJobs",r.PAGED_ITEM_MODELS="models",r.PAGED_ITEM_TUNING_JOBS="tuningJobs",r.PAGED_ITEM_FILES="files",r.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(As||(As={}));class Nl{constructor(e,t,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,a)}init(e,t,i){var a,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let u={config:{}};i?typeof i=="object"?u=Object.assign({},i):u=i:u={config:{}},u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(o=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zx extends ks{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Nl(As.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=zx(this.apiClient,e);return d=Ve("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>gl(this.apiClient,y))}else{const p=fx(this.apiClient,e);return d=Ve("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>ml(this.apiClient,y))}}async get(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=Bx(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>gl(this.apiClient,y))}else{const p=hx(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>ml(this.apiClient,y))}}async delete(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=Vx(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(()=>{const y=Yx(),_=new Mg;return Object.assign(_,y),_})}else{const p=px(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(()=>{const y=jx(),_=new Mg;return Object.assign(_,y),_})}}async update(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=Gx(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>gl(this.apiClient,y))}else{const p=gx(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>ml(this.apiClient,y))}}async listInternal(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=Hx(this.apiClient,e);return d=Ve("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const _=Kx(this.apiClient,y),x=new Dg;return Object.assign(x,_),x})}else{const p=vx(this.apiClient,e);return d=Ve("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>{const _=$x(this.apiClient,y),x=new Dg;return Object.assign(x,_),x})}}}function Bg(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(r){return this instanceof yt?(this.v=r,this):new yt(r)}function bs(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(b){return function(w){return Promise.resolve(w).then(b,_)}}function d(b,w){i[b]&&(a[b]=function(T){return new Promise(function(A,k){o.push([b,T,A,k])>1||m(b,T)})},w&&(a[b]=w(a[b])))}function m(b,w){try{p(i[b](w))}catch(T){x(o[0][3],T)}}function p(b){b.value instanceof yt?Promise.resolve(b.value.v).then(y,_):x(o[0][2],b)}function y(b){m("next",b)}function _(b){m("throw",b)}function x(b,w){b(w),o.shift(),o.length&&m(o[0][0],o[0][1])}}function Oa(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Bg=="function"?Bg(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=r[o]&&function(u){return new Promise(function(d,m){u=r[o](u),a(d,m,u.done,u.value)})}}function a(o,u,d,m){Promise.resolve(m).then(function(p){o({value:p,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jx(r){var e;if(r.candidates==null||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Gy(t)}function Gy(r){if(r.parts===void 0||r.parts.length===0)return!1;for(const e of r.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Wx(r){if(r.length!==0){for(const e of r)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Vg(r){if(r===void 0||r.length===0)return[];const e=[],t=r.length;let i=0;for(;i<t;)if(r[i].role==="user")e.push(r[i]),i++;else{const a=[];let o=!0;for(;i<t&&r[i].role==="model";)a.push(r[i]),o&&!Gy(r[i])&&(o=!1),i++;o?e.push(...a):e.pop()}return e}class Xx{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Qx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Qx{constructor(e,t,i,a={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),Wx(o)}async sendMessage(e){var t;await this.sendPromise;const i=tn(this.apiClient,e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,u,d;const m=await a,p=(u=(o=m.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content,y=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let x=[];y!=null&&(x=(d=y.slice(_))!==null&&d!==void 0?d:[]);const b=p?[p]:[];this.recordHistory(i,b,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const i=tn(this.apiClient,e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const o=await a;return this.processStreamResponse(o,i)}getHistory(e=!1){const t=e?Vg(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,a;return bs(this,arguments,function*(){var u,d,m,p;const y=[];try{for(var _=!0,x=Oa(e),b;b=yield yt(x.next()),u=b.done,!u;_=!0){p=b.value,_=!1;const w=p;if(Jx(w)){const T=(a=(i=w.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content;T!==void 0&&y.push(T)}yield yield yt(w)}}catch(w){d={error:w}}finally{try{!_&&!u&&(m=x.return)&&(yield yt(m.call(x)))}finally{if(d)throw d.error}}this.recordHistory(t,y)})}recordHistory(e,t,i){let a=[];t.length>0&&t.every(o=>o.role!==void 0)?a=t:a.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Vg(i)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ew(r,e,t){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);return t!==void 0&&o!=null&&h(t,["_query","pageToken"],o),i}function tw(r,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],ew(r,i,t)),t}function nw(r,e){const t={},i=f(e,["details"]);i!=null&&h(t,["details"],i);const a=f(e,["message"]);a!=null&&h(t,["message"],a);const o=f(e,["code"]);return o!=null&&h(t,["code"],o),t}function iw(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["displayName"]);a!=null&&h(t,["displayName"],a);const o=f(e,["mimeType"]);o!=null&&h(t,["mimeType"],o);const u=f(e,["sizeBytes"]);u!=null&&h(t,["sizeBytes"],u);const d=f(e,["createTime"]);d!=null&&h(t,["createTime"],d);const m=f(e,["expirationTime"]);m!=null&&h(t,["expirationTime"],m);const p=f(e,["updateTime"]);p!=null&&h(t,["updateTime"],p);const y=f(e,["sha256Hash"]);y!=null&&h(t,["sha256Hash"],y);const _=f(e,["uri"]);_!=null&&h(t,["uri"],_);const x=f(e,["downloadUri"]);x!=null&&h(t,["downloadUri"],x);const b=f(e,["state"]);b!=null&&h(t,["state"],b);const w=f(e,["source"]);w!=null&&h(t,["source"],w);const T=f(e,["videoMetadata"]);T!=null&&h(t,["videoMetadata"],T);const A=f(e,["error"]);return A!=null&&h(t,["error"],nw(r,A)),t}function rw(r,e){const t={},i=f(e,["file"]);i!=null&&h(t,["file"],iw(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function sw(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","file"],By(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function aw(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","file"],By(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function ow(r,e){const t={},i=f(e,["details"]);i!=null&&h(t,["details"],i);const a=f(e,["message"]);a!=null&&h(t,["message"],a);const o=f(e,["code"]);return o!=null&&h(t,["code"],o),t}function fd(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["displayName"]);a!=null&&h(t,["displayName"],a);const o=f(e,["mimeType"]);o!=null&&h(t,["mimeType"],o);const u=f(e,["sizeBytes"]);u!=null&&h(t,["sizeBytes"],u);const d=f(e,["createTime"]);d!=null&&h(t,["createTime"],d);const m=f(e,["expirationTime"]);m!=null&&h(t,["expirationTime"],m);const p=f(e,["updateTime"]);p!=null&&h(t,["updateTime"],p);const y=f(e,["sha256Hash"]);y!=null&&h(t,["sha256Hash"],y);const _=f(e,["uri"]);_!=null&&h(t,["uri"],_);const x=f(e,["downloadUri"]);x!=null&&h(t,["downloadUri"],x);const b=f(e,["state"]);b!=null&&h(t,["state"],b);const w=f(e,["source"]);w!=null&&h(t,["source"],w);const T=f(e,["videoMetadata"]);T!=null&&h(t,["videoMetadata"],T);const A=f(e,["error"]);return A!=null&&h(t,["error"],ow(r,A)),t}function lw(r,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=f(e,["files"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>fd(r,u))),h(t,["files"],o)}return t}function uw(){return{}}function cw(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dw extends ks{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Nl(As.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>fd(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tw(this.apiClient,e);return o=Ve("files",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const p=lw(this.apiClient,m),y=new Nb;return Object.assign(y,p),y})}}async createInternal(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rw(this.apiClient,e);return o=Ve("upload/v1beta/files",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(()=>{const m=uw(),p=new Mb;return Object.assign(p,m),p})}}async get(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sw(this.apiClient,e);return o=Ve("files/{file}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>fd(this.apiClient,m))}}async delete(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aw(this.apiClient,e);return o=Ve("files/{file}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(()=>{const m=cw(),p=new Db;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fw(r,e){const t={},i=f(e,["voiceName"]);return i!=null&&h(t,["voiceName"],i),t}function hw(r,e){const t={},i=f(e,["voiceName"]);return i!=null&&h(t,["voiceName"],i),t}function Fy(r,e){const t={},i=f(e,["prebuiltVoiceConfig"]);return i!=null&&h(t,["prebuiltVoiceConfig"],fw(r,i)),t}function pw(r,e){const t={},i=f(e,["prebuiltVoiceConfig"]);return i!=null&&h(t,["prebuiltVoiceConfig"],hw(r,i)),t}function mw(r,e){const t={},i=f(e,["speaker"]);i!=null&&h(t,["speaker"],i);const a=f(e,["voiceConfig"]);return a!=null&&h(t,["voiceConfig"],Fy(r,a)),t}function gw(r,e){const t={},i=f(e,["speakerVoiceConfigs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>mw(r,o))),h(t,["speakerVoiceConfigs"],a)}return t}function yw(r,e){const t={},i=f(e,["voiceConfig"]);i!=null&&h(t,["voiceConfig"],Fy(r,i));const a=f(e,["multiSpeakerVoiceConfig"]);a!=null&&h(t,["multiSpeakerVoiceConfig"],gw(r,a));const o=f(e,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function vw(r,e){const t={},i=f(e,["voiceConfig"]);if(i!=null&&h(t,["voiceConfig"],pw(r,i)),f(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=f(e,["languageCode"]);return a!=null&&h(t,["languageCode"],a),t}function _w(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function bw(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function xw(r,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["data"]);i!=null&&h(t,["data"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function ww(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["data"]);a!=null&&h(t,["data"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function Tw(r,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["fileUri"]);i!=null&&h(t,["fileUri"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function Sw(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["fileUri"]);a!=null&&h(t,["fileUri"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function Cw(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],_w(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],xw(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],Tw(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function Ew(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],bw(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],ww(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],Sw(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function Aw(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>Cw(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function kw(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>Ew(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function Rw(r,e){const t={},i=f(e,["behavior"]);i!=null&&h(t,["behavior"],i);const a=f(e,["description"]);a!=null&&h(t,["description"],a);const o=f(e,["name"]);o!=null&&h(t,["name"],o);const u=f(e,["parameters"]);u!=null&&h(t,["parameters"],u);const d=f(e,["response"]);return d!=null&&h(t,["response"],d),t}function Nw(r,e){const t={};if(f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(e,["description"]);i!=null&&h(t,["description"],i);const a=f(e,["name"]);a!=null&&h(t,["name"],a);const o=f(e,["parameters"]);o!=null&&h(t,["parameters"],o);const u=f(e,["response"]);return u!=null&&h(t,["response"],u),t}function Mw(r,e){const t={},i=f(e,["startTime"]);i!=null&&h(t,["startTime"],i);const a=f(e,["endTime"]);return a!=null&&h(t,["endTime"],a),t}function Dw(r,e){const t={},i=f(e,["startTime"]);i!=null&&h(t,["startTime"],i);const a=f(e,["endTime"]);return a!=null&&h(t,["endTime"],a),t}function Iw(r,e){const t={},i=f(e,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],Mw(r,i)),t}function Ow(r,e){const t={},i=f(e,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],Dw(r,i)),t}function Uw(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["dynamicThreshold"]);return a!=null&&h(t,["dynamicThreshold"],a),t}function Lw(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["dynamicThreshold"]);return a!=null&&h(t,["dynamicThreshold"],a),t}function Pw(r,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],Uw(r,i)),t}function zw(r,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],Lw(r,i)),t}function Bw(){return{}}function Vw(r,e){const t={},i=f(e,["apiKeyString"]);return i!=null&&h(t,["apiKeyString"],i),t}function qw(r,e){const t={},i=f(e,["apiKeyConfig"]);i!=null&&h(t,["apiKeyConfig"],Vw(r,i));const a=f(e,["authType"]);a!=null&&h(t,["authType"],a);const o=f(e,["googleServiceAccountConfig"]);o!=null&&h(t,["googleServiceAccountConfig"],o);const u=f(e,["httpBasicAuthConfig"]);u!=null&&h(t,["httpBasicAuthConfig"],u);const d=f(e,["oauthConfig"]);d!=null&&h(t,["oauthConfig"],d);const m=f(e,["oidcConfig"]);return m!=null&&h(t,["oidcConfig"],m),t}function Gw(r,e){const t={},i=f(e,["authConfig"]);return i!=null&&h(t,["authConfig"],qw(r,i)),t}function Fw(){return{}}function Hw(r,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>Rw(r,p))),h(t,["functionDeclarations"],m)}if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(e,["googleSearch"]);a!=null&&h(t,["googleSearch"],Iw(r,a));const o=f(e,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],Pw(r,o)),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(e,["urlContext"])!=null&&h(t,["urlContext"],Fw());const d=f(e,["codeExecution"]);return d!=null&&h(t,["codeExecution"],d),t}function jw(r,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>Nw(r,_))),h(t,["functionDeclarations"],y)}const a=f(e,["retrieval"]);a!=null&&h(t,["retrieval"],a);const o=f(e,["googleSearch"]);o!=null&&h(t,["googleSearch"],Ow(r,o));const u=f(e,["googleSearchRetrieval"]);u!=null&&h(t,["googleSearchRetrieval"],zw(r,u)),f(e,["enterpriseWebSearch"])!=null&&h(t,["enterpriseWebSearch"],Bw());const m=f(e,["googleMaps"]);if(m!=null&&h(t,["googleMaps"],Gw(r,m)),f(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=f(e,["codeExecution"]);return p!=null&&h(t,["codeExecution"],p),t}function $w(r,e){const t={},i=f(e,["handle"]);if(i!=null&&h(t,["handle"],i),f(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Yw(r,e){const t={},i=f(e,["handle"]);i!=null&&h(t,["handle"],i);const a=f(e,["transparent"]);return a!=null&&h(t,["transparent"],a),t}function qg(){return{}}function Gg(){return{}}function Kw(r,e){const t={},i=f(e,["disabled"]);i!=null&&h(t,["disabled"],i);const a=f(e,["startOfSpeechSensitivity"]);a!=null&&h(t,["startOfSpeechSensitivity"],a);const o=f(e,["endOfSpeechSensitivity"]);o!=null&&h(t,["endOfSpeechSensitivity"],o);const u=f(e,["prefixPaddingMs"]);u!=null&&h(t,["prefixPaddingMs"],u);const d=f(e,["silenceDurationMs"]);return d!=null&&h(t,["silenceDurationMs"],d),t}function Zw(r,e){const t={},i=f(e,["disabled"]);i!=null&&h(t,["disabled"],i);const a=f(e,["startOfSpeechSensitivity"]);a!=null&&h(t,["startOfSpeechSensitivity"],a);const o=f(e,["endOfSpeechSensitivity"]);o!=null&&h(t,["endOfSpeechSensitivity"],o);const u=f(e,["prefixPaddingMs"]);u!=null&&h(t,["prefixPaddingMs"],u);const d=f(e,["silenceDurationMs"]);return d!=null&&h(t,["silenceDurationMs"],d),t}function Jw(r,e){const t={},i=f(e,["automaticActivityDetection"]);i!=null&&h(t,["automaticActivityDetection"],Kw(r,i));const a=f(e,["activityHandling"]);a!=null&&h(t,["activityHandling"],a);const o=f(e,["turnCoverage"]);return o!=null&&h(t,["turnCoverage"],o),t}function Ww(r,e){const t={},i=f(e,["automaticActivityDetection"]);i!=null&&h(t,["automaticActivityDetection"],Zw(r,i));const a=f(e,["activityHandling"]);a!=null&&h(t,["activityHandling"],a);const o=f(e,["turnCoverage"]);return o!=null&&h(t,["turnCoverage"],o),t}function Xw(r,e){const t={},i=f(e,["targetTokens"]);return i!=null&&h(t,["targetTokens"],i),t}function Qw(r,e){const t={},i=f(e,["targetTokens"]);return i!=null&&h(t,["targetTokens"],i),t}function eT(r,e){const t={},i=f(e,["triggerTokens"]);i!=null&&h(t,["triggerTokens"],i);const a=f(e,["slidingWindow"]);return a!=null&&h(t,["slidingWindow"],Xw(r,a)),t}function tT(r,e){const t={},i=f(e,["triggerTokens"]);i!=null&&h(t,["triggerTokens"],i);const a=f(e,["slidingWindow"]);return a!=null&&h(t,["slidingWindow"],Qw(r,a)),t}function nT(r,e){const t={},i=f(e,["proactiveAudio"]);return i!=null&&h(t,["proactiveAudio"],i),t}function iT(r,e){const t={},i=f(e,["proactiveAudio"]);return i!=null&&h(t,["proactiveAudio"],i),t}function rT(r,e,t){const i={},a=f(e,["generationConfig"]);t!==void 0&&a!=null&&h(t,["setup","generationConfig"],a);const o=f(e,["responseModalities"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig","responseModalities"],o);const u=f(e,["temperature"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","temperature"],u);const d=f(e,["topP"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","topP"],d);const m=f(e,["topK"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","topK"],m);const p=f(e,["maxOutputTokens"]);t!==void 0&&p!=null&&h(t,["setup","generationConfig","maxOutputTokens"],p);const y=f(e,["mediaResolution"]);t!==void 0&&y!=null&&h(t,["setup","generationConfig","mediaResolution"],y);const _=f(e,["seed"]);t!==void 0&&_!=null&&h(t,["setup","generationConfig","seed"],_);const x=f(e,["speechConfig"]);t!==void 0&&x!=null&&h(t,["setup","generationConfig","speechConfig"],yw(r,Dd(r,x)));const b=f(e,["enableAffectiveDialog"]);t!==void 0&&b!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],b);const w=f(e,["systemInstruction"]);t!==void 0&&w!=null&&h(t,["setup","systemInstruction"],Aw(r,tn(r,w)));const T=f(e,["tools"]);if(t!==void 0&&T!=null){let G=Ka(r,T);Array.isArray(G)&&(G=G.map(j=>Hw(r,Ya(r,j)))),h(t,["setup","tools"],G)}const A=f(e,["sessionResumption"]);t!==void 0&&A!=null&&h(t,["setup","sessionResumption"],$w(r,A));const k=f(e,["inputAudioTranscription"]);t!==void 0&&k!=null&&h(t,["setup","inputAudioTranscription"],qg());const N=f(e,["outputAudioTranscription"]);t!==void 0&&N!=null&&h(t,["setup","outputAudioTranscription"],qg());const D=f(e,["realtimeInputConfig"]);t!==void 0&&D!=null&&h(t,["setup","realtimeInputConfig"],Jw(r,D));const I=f(e,["contextWindowCompression"]);t!==void 0&&I!=null&&h(t,["setup","contextWindowCompression"],eT(r,I));const O=f(e,["proactivity"]);return t!==void 0&&O!=null&&h(t,["setup","proactivity"],nT(r,O)),i}function sT(r,e,t){const i={},a=f(e,["generationConfig"]);t!==void 0&&a!=null&&h(t,["setup","generationConfig"],a);const o=f(e,["responseModalities"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig","responseModalities"],o);const u=f(e,["temperature"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","temperature"],u);const d=f(e,["topP"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","topP"],d);const m=f(e,["topK"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","topK"],m);const p=f(e,["maxOutputTokens"]);t!==void 0&&p!=null&&h(t,["setup","generationConfig","maxOutputTokens"],p);const y=f(e,["mediaResolution"]);t!==void 0&&y!=null&&h(t,["setup","generationConfig","mediaResolution"],y);const _=f(e,["seed"]);t!==void 0&&_!=null&&h(t,["setup","generationConfig","seed"],_);const x=f(e,["speechConfig"]);t!==void 0&&x!=null&&h(t,["setup","generationConfig","speechConfig"],vw(r,Dd(r,x)));const b=f(e,["enableAffectiveDialog"]);t!==void 0&&b!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],b);const w=f(e,["systemInstruction"]);t!==void 0&&w!=null&&h(t,["setup","systemInstruction"],kw(r,tn(r,w)));const T=f(e,["tools"]);if(t!==void 0&&T!=null){let G=Ka(r,T);Array.isArray(G)&&(G=G.map(j=>jw(r,Ya(r,j)))),h(t,["setup","tools"],G)}const A=f(e,["sessionResumption"]);t!==void 0&&A!=null&&h(t,["setup","sessionResumption"],Yw(r,A));const k=f(e,["inputAudioTranscription"]);t!==void 0&&k!=null&&h(t,["setup","inputAudioTranscription"],Gg());const N=f(e,["outputAudioTranscription"]);t!==void 0&&N!=null&&h(t,["setup","outputAudioTranscription"],Gg());const D=f(e,["realtimeInputConfig"]);t!==void 0&&D!=null&&h(t,["setup","realtimeInputConfig"],Ww(r,D));const I=f(e,["contextWindowCompression"]);t!==void 0&&I!=null&&h(t,["setup","contextWindowCompression"],tT(r,I));const O=f(e,["proactivity"]);return t!==void 0&&O!=null&&h(t,["setup","proactivity"],iT(r,O)),i}function aT(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],rT(r,a,t)),t}function oT(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],sT(r,a,t)),t}function lT(){return{}}function uT(){return{}}function cT(){return{}}function dT(){return{}}function fT(r,e){const t={},i=f(e,["media"]);i!=null&&h(t,["mediaChunks"],Oy(r,i));const a=f(e,["audio"]);a!=null&&h(t,["audio"],Lb(r,a));const o=f(e,["audioStreamEnd"]);o!=null&&h(t,["audioStreamEnd"],o);const u=f(e,["video"]);u!=null&&h(t,["video"],Ub(r,u));const d=f(e,["text"]);return d!=null&&h(t,["text"],d),f(e,["activityStart"])!=null&&h(t,["activityStart"],lT()),f(e,["activityEnd"])!=null&&h(t,["activityEnd"],cT()),t}function hT(r,e){const t={},i=f(e,["media"]);if(i!=null&&h(t,["mediaChunks"],Oy(r,i)),f(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const a=f(e,["audioStreamEnd"]);if(a!=null&&h(t,["audioStreamEnd"],a),f(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(f(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return f(e,["activityStart"])!=null&&h(t,["activityStart"],uT()),f(e,["activityEnd"])!=null&&h(t,["activityEnd"],dT()),t}function Hy(r,e){const t={},i=f(e,["text"]);i!=null&&h(t,["text"],i);const a=f(e,["weight"]);return a!=null&&h(t,["weight"],a),t}function pT(r,e){const t={},i=f(e,["weightedPrompts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Hy(r,o))),h(t,["weightedPrompts"],a)}return t}function jy(r,e){const t={},i=f(e,["temperature"]);i!=null&&h(t,["temperature"],i);const a=f(e,["topK"]);a!=null&&h(t,["topK"],a);const o=f(e,["seed"]);o!=null&&h(t,["seed"],o);const u=f(e,["guidance"]);u!=null&&h(t,["guidance"],u);const d=f(e,["bpm"]);d!=null&&h(t,["bpm"],d);const m=f(e,["density"]);m!=null&&h(t,["density"],m);const p=f(e,["brightness"]);p!=null&&h(t,["brightness"],p);const y=f(e,["scale"]);y!=null&&h(t,["scale"],y);const _=f(e,["muteBass"]);_!=null&&h(t,["muteBass"],_);const x=f(e,["muteDrums"]);x!=null&&h(t,["muteDrums"],x);const b=f(e,["onlyBassAndDrums"]);return b!=null&&h(t,["onlyBassAndDrums"],b),t}function mT(r,e){const t={},i=f(e,["musicGenerationConfig"]);return i!=null&&h(t,["musicGenerationConfig"],jy(r,i)),t}function $y(r,e){const t={},i=f(e,["model"]);return i!=null&&h(t,["model"],i),t}function Yy(r,e){const t={},i=f(e,["weightedPrompts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Hy(r,o))),h(t,["weightedPrompts"],a)}return t}function hd(r,e){const t={},i=f(e,["setup"]);i!=null&&h(t,["setup"],$y(r,i));const a=f(e,["clientContent"]);a!=null&&h(t,["clientContent"],Yy(r,a));const o=f(e,["musicGenerationConfig"]);o!=null&&h(t,["musicGenerationConfig"],jy(r,o));const u=f(e,["playbackControl"]);return u!=null&&h(t,["playbackControl"],u),t}function gT(){return{}}function yT(){return{}}function vT(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function _T(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function bT(r,e){const t={},i=f(e,["data"]);i!=null&&h(t,["data"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function xT(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["data"]);a!=null&&h(t,["data"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function wT(r,e){const t={},i=f(e,["fileUri"]);i!=null&&h(t,["fileUri"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function TT(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["fileUri"]);a!=null&&h(t,["fileUri"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function ST(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],vT(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],bT(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],wT(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function CT(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],_T(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],xT(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],TT(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function ET(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>ST(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function AT(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>CT(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function Fg(r,e){const t={},i=f(e,["text"]);i!=null&&h(t,["text"],i);const a=f(e,["finished"]);return a!=null&&h(t,["finished"],a),t}function Hg(r,e){const t={},i=f(e,["text"]);i!=null&&h(t,["text"],i);const a=f(e,["finished"]);return a!=null&&h(t,["finished"],a),t}function kT(r,e){const t={},i=f(e,["retrievedUrl"]);i!=null&&h(t,["retrievedUrl"],i);const a=f(e,["urlRetrievalStatus"]);return a!=null&&h(t,["urlRetrievalStatus"],a),t}function RT(r,e){const t={},i=f(e,["urlMetadata"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>kT(r,o))),h(t,["urlMetadata"],a)}return t}function NT(r,e){const t={},i=f(e,["modelTurn"]);i!=null&&h(t,["modelTurn"],ET(r,i));const a=f(e,["turnComplete"]);a!=null&&h(t,["turnComplete"],a);const o=f(e,["interrupted"]);o!=null&&h(t,["interrupted"],o);const u=f(e,["groundingMetadata"]);u!=null&&h(t,["groundingMetadata"],u);const d=f(e,["generationComplete"]);d!=null&&h(t,["generationComplete"],d);const m=f(e,["inputTranscription"]);m!=null&&h(t,["inputTranscription"],Fg(r,m));const p=f(e,["outputTranscription"]);p!=null&&h(t,["outputTranscription"],Fg(r,p));const y=f(e,["urlContextMetadata"]);return y!=null&&h(t,["urlContextMetadata"],RT(r,y)),t}function MT(r,e){const t={},i=f(e,["modelTurn"]);i!=null&&h(t,["modelTurn"],AT(r,i));const a=f(e,["turnComplete"]);a!=null&&h(t,["turnComplete"],a);const o=f(e,["interrupted"]);o!=null&&h(t,["interrupted"],o);const u=f(e,["groundingMetadata"]);u!=null&&h(t,["groundingMetadata"],u);const d=f(e,["generationComplete"]);d!=null&&h(t,["generationComplete"],d);const m=f(e,["inputTranscription"]);m!=null&&h(t,["inputTranscription"],Hg(r,m));const p=f(e,["outputTranscription"]);return p!=null&&h(t,["outputTranscription"],Hg(r,p)),t}function DT(r,e){const t={},i=f(e,["id"]);i!=null&&h(t,["id"],i);const a=f(e,["args"]);a!=null&&h(t,["args"],a);const o=f(e,["name"]);return o!=null&&h(t,["name"],o),t}function IT(r,e){const t={},i=f(e,["args"]);i!=null&&h(t,["args"],i);const a=f(e,["name"]);return a!=null&&h(t,["name"],a),t}function OT(r,e){const t={},i=f(e,["functionCalls"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>DT(r,o))),h(t,["functionCalls"],a)}return t}function UT(r,e){const t={},i=f(e,["functionCalls"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>IT(r,o))),h(t,["functionCalls"],a)}return t}function LT(r,e){const t={},i=f(e,["ids"]);return i!=null&&h(t,["ids"],i),t}function PT(r,e){const t={},i=f(e,["ids"]);return i!=null&&h(t,["ids"],i),t}function sl(r,e){const t={},i=f(e,["modality"]);i!=null&&h(t,["modality"],i);const a=f(e,["tokenCount"]);return a!=null&&h(t,["tokenCount"],a),t}function al(r,e){const t={},i=f(e,["modality"]);i!=null&&h(t,["modality"],i);const a=f(e,["tokenCount"]);return a!=null&&h(t,["tokenCount"],a),t}function zT(r,e){const t={},i=f(e,["promptTokenCount"]);i!=null&&h(t,["promptTokenCount"],i);const a=f(e,["cachedContentTokenCount"]);a!=null&&h(t,["cachedContentTokenCount"],a);const o=f(e,["responseTokenCount"]);o!=null&&h(t,["responseTokenCount"],o);const u=f(e,["toolUsePromptTokenCount"]);u!=null&&h(t,["toolUsePromptTokenCount"],u);const d=f(e,["thoughtsTokenCount"]);d!=null&&h(t,["thoughtsTokenCount"],d);const m=f(e,["totalTokenCount"]);m!=null&&h(t,["totalTokenCount"],m);const p=f(e,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(w=>sl(r,w))),h(t,["promptTokensDetails"],b)}const y=f(e,["cacheTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(w=>sl(r,w))),h(t,["cacheTokensDetails"],b)}const _=f(e,["responseTokensDetails"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(w=>sl(r,w))),h(t,["responseTokensDetails"],b)}const x=f(e,["toolUsePromptTokensDetails"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(w=>sl(r,w))),h(t,["toolUsePromptTokensDetails"],b)}return t}function BT(r,e){const t={},i=f(e,["promptTokenCount"]);i!=null&&h(t,["promptTokenCount"],i);const a=f(e,["cachedContentTokenCount"]);a!=null&&h(t,["cachedContentTokenCount"],a);const o=f(e,["candidatesTokenCount"]);o!=null&&h(t,["responseTokenCount"],o);const u=f(e,["toolUsePromptTokenCount"]);u!=null&&h(t,["toolUsePromptTokenCount"],u);const d=f(e,["thoughtsTokenCount"]);d!=null&&h(t,["thoughtsTokenCount"],d);const m=f(e,["totalTokenCount"]);m!=null&&h(t,["totalTokenCount"],m);const p=f(e,["promptTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(T=>al(r,T))),h(t,["promptTokensDetails"],w)}const y=f(e,["cacheTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(T=>al(r,T))),h(t,["cacheTokensDetails"],w)}const _=f(e,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(T=>al(r,T))),h(t,["responseTokensDetails"],w)}const x=f(e,["toolUsePromptTokensDetails"]);if(x!=null){let w=x;Array.isArray(w)&&(w=w.map(T=>al(r,T))),h(t,["toolUsePromptTokensDetails"],w)}const b=f(e,["trafficType"]);return b!=null&&h(t,["trafficType"],b),t}function VT(r,e){const t={},i=f(e,["timeLeft"]);return i!=null&&h(t,["timeLeft"],i),t}function qT(r,e){const t={},i=f(e,["timeLeft"]);return i!=null&&h(t,["timeLeft"],i),t}function GT(r,e){const t={},i=f(e,["newHandle"]);i!=null&&h(t,["newHandle"],i);const a=f(e,["resumable"]);a!=null&&h(t,["resumable"],a);const o=f(e,["lastConsumedClientMessageIndex"]);return o!=null&&h(t,["lastConsumedClientMessageIndex"],o),t}function FT(r,e){const t={},i=f(e,["newHandle"]);i!=null&&h(t,["newHandle"],i);const a=f(e,["resumable"]);a!=null&&h(t,["resumable"],a);const o=f(e,["lastConsumedClientMessageIndex"]);return o!=null&&h(t,["lastConsumedClientMessageIndex"],o),t}function HT(r,e){const t={};f(e,["setupComplete"])!=null&&h(t,["setupComplete"],gT());const a=f(e,["serverContent"]);a!=null&&h(t,["serverContent"],NT(r,a));const o=f(e,["toolCall"]);o!=null&&h(t,["toolCall"],OT(r,o));const u=f(e,["toolCallCancellation"]);u!=null&&h(t,["toolCallCancellation"],LT(r,u));const d=f(e,["usageMetadata"]);d!=null&&h(t,["usageMetadata"],zT(r,d));const m=f(e,["goAway"]);m!=null&&h(t,["goAway"],VT(r,m));const p=f(e,["sessionResumptionUpdate"]);return p!=null&&h(t,["sessionResumptionUpdate"],GT(r,p)),t}function jT(r,e){const t={};f(e,["setupComplete"])!=null&&h(t,["setupComplete"],yT());const a=f(e,["serverContent"]);a!=null&&h(t,["serverContent"],MT(r,a));const o=f(e,["toolCall"]);o!=null&&h(t,["toolCall"],UT(r,o));const u=f(e,["toolCallCancellation"]);u!=null&&h(t,["toolCallCancellation"],PT(r,u));const d=f(e,["usageMetadata"]);d!=null&&h(t,["usageMetadata"],BT(r,d));const m=f(e,["goAway"]);m!=null&&h(t,["goAway"],qT(r,m));const p=f(e,["sessionResumptionUpdate"]);return p!=null&&h(t,["sessionResumptionUpdate"],FT(r,p)),t}function $T(){return{}}function YT(r,e){const t={},i=f(e,["text"]);i!=null&&h(t,["text"],i);const a=f(e,["weight"]);return a!=null&&h(t,["weight"],a),t}function KT(r,e){const t={},i=f(e,["weightedPrompts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>YT(r,o))),h(t,["weightedPrompts"],a)}return t}function ZT(r,e){const t={},i=f(e,["temperature"]);i!=null&&h(t,["temperature"],i);const a=f(e,["topK"]);a!=null&&h(t,["topK"],a);const o=f(e,["seed"]);o!=null&&h(t,["seed"],o);const u=f(e,["guidance"]);u!=null&&h(t,["guidance"],u);const d=f(e,["bpm"]);d!=null&&h(t,["bpm"],d);const m=f(e,["density"]);m!=null&&h(t,["density"],m);const p=f(e,["brightness"]);p!=null&&h(t,["brightness"],p);const y=f(e,["scale"]);y!=null&&h(t,["scale"],y);const _=f(e,["muteBass"]);_!=null&&h(t,["muteBass"],_);const x=f(e,["muteDrums"]);x!=null&&h(t,["muteDrums"],x);const b=f(e,["onlyBassAndDrums"]);return b!=null&&h(t,["onlyBassAndDrums"],b),t}function JT(r,e){const t={},i=f(e,["clientContent"]);i!=null&&h(t,["clientContent"],KT(r,i));const a=f(e,["musicGenerationConfig"]);return a!=null&&h(t,["musicGenerationConfig"],ZT(r,a)),t}function WT(r,e){const t={},i=f(e,["data"]);i!=null&&h(t,["data"],i);const a=f(e,["mimeType"]);a!=null&&h(t,["mimeType"],a);const o=f(e,["sourceMetadata"]);return o!=null&&h(t,["sourceMetadata"],JT(r,o)),t}function XT(r,e){const t={},i=f(e,["audioChunks"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>WT(r,o))),h(t,["audioChunks"],a)}return t}function QT(r,e){const t={},i=f(e,["text"]);i!=null&&h(t,["text"],i);const a=f(e,["filteredReason"]);return a!=null&&h(t,["filteredReason"],a),t}function eS(r,e){const t={};f(e,["setupComplete"])!=null&&h(t,["setupComplete"],$T());const a=f(e,["serverContent"]);a!=null&&h(t,["serverContent"],XT(r,a));const o=f(e,["filteredPrompt"]);return o!=null&&h(t,["filteredPrompt"],QT(r,o)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tS(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function nS(r,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["data"]);i!=null&&h(t,["data"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function iS(r,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["fileUri"]);i!=null&&h(t,["fileUri"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function rS(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],tS(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],nS(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],iS(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function Ml(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>rS(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function sS(r,e){const t={},i=f(e,["anyOf"]);i!=null&&h(t,["anyOf"],i);const a=f(e,["default"]);a!=null&&h(t,["default"],a);const o=f(e,["description"]);o!=null&&h(t,["description"],o);const u=f(e,["enum"]);u!=null&&h(t,["enum"],u);const d=f(e,["example"]);d!=null&&h(t,["example"],d);const m=f(e,["format"]);m!=null&&h(t,["format"],m);const p=f(e,["items"]);p!=null&&h(t,["items"],p);const y=f(e,["maxItems"]);y!=null&&h(t,["maxItems"],y);const _=f(e,["maxLength"]);_!=null&&h(t,["maxLength"],_);const x=f(e,["maxProperties"]);x!=null&&h(t,["maxProperties"],x);const b=f(e,["maximum"]);b!=null&&h(t,["maximum"],b);const w=f(e,["minItems"]);w!=null&&h(t,["minItems"],w);const T=f(e,["minLength"]);T!=null&&h(t,["minLength"],T);const A=f(e,["minProperties"]);A!=null&&h(t,["minProperties"],A);const k=f(e,["minimum"]);k!=null&&h(t,["minimum"],k);const N=f(e,["nullable"]);N!=null&&h(t,["nullable"],N);const D=f(e,["pattern"]);D!=null&&h(t,["pattern"],D);const I=f(e,["properties"]);I!=null&&h(t,["properties"],I);const O=f(e,["propertyOrdering"]);O!=null&&h(t,["propertyOrdering"],O);const G=f(e,["required"]);G!=null&&h(t,["required"],G);const j=f(e,["title"]);j!=null&&h(t,["title"],j);const ee=f(e,["type"]);return ee!=null&&h(t,["type"],ee),t}function aS(r,e){const t={};if(f(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(e,["category"]);i!=null&&h(t,["category"],i);const a=f(e,["threshold"]);return a!=null&&h(t,["threshold"],a),t}function oS(r,e){const t={},i=f(e,["behavior"]);i!=null&&h(t,["behavior"],i);const a=f(e,["description"]);a!=null&&h(t,["description"],a);const o=f(e,["name"]);o!=null&&h(t,["name"],o);const u=f(e,["parameters"]);u!=null&&h(t,["parameters"],u);const d=f(e,["response"]);return d!=null&&h(t,["response"],d),t}function lS(r,e){const t={},i=f(e,["startTime"]);i!=null&&h(t,["startTime"],i);const a=f(e,["endTime"]);return a!=null&&h(t,["endTime"],a),t}function uS(r,e){const t={},i=f(e,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],lS(r,i)),t}function cS(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["dynamicThreshold"]);return a!=null&&h(t,["dynamicThreshold"],a),t}function dS(r,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],cS(r,i)),t}function fS(){return{}}function hS(r,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>oS(r,p))),h(t,["functionDeclarations"],m)}if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(e,["googleSearch"]);a!=null&&h(t,["googleSearch"],uS(r,a));const o=f(e,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],dS(r,o)),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(e,["urlContext"])!=null&&h(t,["urlContext"],fS());const d=f(e,["codeExecution"]);return d!=null&&h(t,["codeExecution"],d),t}function pS(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["allowedFunctionNames"]);return a!=null&&h(t,["allowedFunctionNames"],a),t}function mS(r,e){const t={},i=f(e,["latitude"]);i!=null&&h(t,["latitude"],i);const a=f(e,["longitude"]);return a!=null&&h(t,["longitude"],a),t}function gS(r,e){const t={},i=f(e,["latLng"]);i!=null&&h(t,["latLng"],mS(r,i));const a=f(e,["languageCode"]);return a!=null&&h(t,["languageCode"],a),t}function yS(r,e){const t={},i=f(e,["functionCallingConfig"]);i!=null&&h(t,["functionCallingConfig"],pS(r,i));const a=f(e,["retrievalConfig"]);return a!=null&&h(t,["retrievalConfig"],gS(r,a)),t}function vS(r,e){const t={},i=f(e,["voiceName"]);return i!=null&&h(t,["voiceName"],i),t}function Ky(r,e){const t={},i=f(e,["prebuiltVoiceConfig"]);return i!=null&&h(t,["prebuiltVoiceConfig"],vS(r,i)),t}function _S(r,e){const t={},i=f(e,["speaker"]);i!=null&&h(t,["speaker"],i);const a=f(e,["voiceConfig"]);return a!=null&&h(t,["voiceConfig"],Ky(r,a)),t}function bS(r,e){const t={},i=f(e,["speakerVoiceConfigs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>_S(r,o))),h(t,["speakerVoiceConfigs"],a)}return t}function xS(r,e){const t={},i=f(e,["voiceConfig"]);i!=null&&h(t,["voiceConfig"],Ky(r,i));const a=f(e,["multiSpeakerVoiceConfig"]);a!=null&&h(t,["multiSpeakerVoiceConfig"],bS(r,a));const o=f(e,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function wS(r,e){const t={},i=f(e,["includeThoughts"]);i!=null&&h(t,["includeThoughts"],i);const a=f(e,["thinkingBudget"]);return a!=null&&h(t,["thinkingBudget"],a),t}function TS(r,e,t){const i={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&h(t,["systemInstruction"],Ml(r,tn(r,a)));const o=f(e,["temperature"]);o!=null&&h(i,["temperature"],o);const u=f(e,["topP"]);u!=null&&h(i,["topP"],u);const d=f(e,["topK"]);d!=null&&h(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&h(i,["candidateCount"],m);const p=f(e,["maxOutputTokens"]);p!=null&&h(i,["maxOutputTokens"],p);const y=f(e,["stopSequences"]);y!=null&&h(i,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&h(i,["responseLogprobs"],_);const x=f(e,["logprobs"]);x!=null&&h(i,["logprobs"],x);const b=f(e,["presencePenalty"]);b!=null&&h(i,["presencePenalty"],b);const w=f(e,["frequencyPenalty"]);w!=null&&h(i,["frequencyPenalty"],w);const T=f(e,["seed"]);T!=null&&h(i,["seed"],T);const A=f(e,["responseMimeType"]);A!=null&&h(i,["responseMimeType"],A);const k=f(e,["responseSchema"]);if(k!=null&&h(i,["responseSchema"],sS(r,Cl(r,k))),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=f(e,["safetySettings"]);if(t!==void 0&&N!=null){let Z=N;Array.isArray(Z)&&(Z=Z.map(ve=>aS(r,ve))),h(t,["safetySettings"],Z)}const D=f(e,["tools"]);if(t!==void 0&&D!=null){let Z=Ka(r,D);Array.isArray(Z)&&(Z=Z.map(ve=>hS(r,Ya(r,ve)))),h(t,["tools"],Z)}const I=f(e,["toolConfig"]);if(t!==void 0&&I!=null&&h(t,["toolConfig"],yS(r,I)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=f(e,["cachedContent"]);t!==void 0&&O!=null&&h(t,["cachedContent"],Hi(r,O));const G=f(e,["responseModalities"]);G!=null&&h(i,["responseModalities"],G);const j=f(e,["mediaResolution"]);j!=null&&h(i,["mediaResolution"],j);const ee=f(e,["speechConfig"]);if(ee!=null&&h(i,["speechConfig"],xS(r,Py(r,ee))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=f(e,["thinkingConfig"]);return B!=null&&h(i,["thinkingConfig"],wS(r,B)),i}function jg(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["contents"]);if(a!=null){let u=Bn(r,a);Array.isArray(u)&&(u=u.map(d=>Ml(r,d))),h(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&h(t,["generationConfig"],TS(r,o,t)),t}function SS(r,e,t){const i={},a=f(e,["taskType"]);t!==void 0&&a!=null&&h(t,["requests[]","taskType"],a);const o=f(e,["title"]);t!==void 0&&o!=null&&h(t,["requests[]","title"],o);const u=f(e,["outputDimensionality"]);if(t!==void 0&&u!=null&&h(t,["requests[]","outputDimensionality"],u),f(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function CS(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["contents"]);a!=null&&h(t,["requests[]","content"],Ly(r,a));const o=f(e,["config"]);o!=null&&h(t,["config"],SS(r,o,t));const u=f(e,["model"]);return u!==void 0&&h(t,["requests[]","model"],gt(r,u)),t}function ES(r,e,t){const i={};if(f(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=f(e,["numberOfImages"]);t!==void 0&&a!=null&&h(t,["parameters","sampleCount"],a);const o=f(e,["aspectRatio"]);t!==void 0&&o!=null&&h(t,["parameters","aspectRatio"],o);const u=f(e,["guidanceScale"]);if(t!==void 0&&u!=null&&h(t,["parameters","guidanceScale"],u),f(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&h(t,["parameters","safetySetting"],d);const m=f(e,["personGeneration"]);t!==void 0&&m!=null&&h(t,["parameters","personGeneration"],m);const p=f(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&h(t,["parameters","includeSafetyAttributes"],p);const y=f(e,["includeRaiReason"]);t!==void 0&&y!=null&&h(t,["parameters","includeRaiReason"],y);const _=f(e,["language"]);t!==void 0&&_!=null&&h(t,["parameters","language"],_);const x=f(e,["outputMimeType"]);t!==void 0&&x!=null&&h(t,["parameters","outputOptions","mimeType"],x);const b=f(e,["outputCompressionQuality"]);if(t!==void 0&&b!=null&&h(t,["parameters","outputOptions","compressionQuality"],b),f(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function AS(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["prompt"]);a!=null&&h(t,["instances[0]","prompt"],a);const o=f(e,["config"]);return o!=null&&h(t,["config"],ES(r,o,t)),t}function kS(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function RS(r,e,t){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],Vy(r,d)),i}function NS(r,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],RS(r,i,t)),t}function MS(r,e,t){const i={},a=f(e,["displayName"]);t!==void 0&&a!=null&&h(t,["displayName"],a);const o=f(e,["description"]);t!==void 0&&o!=null&&h(t,["description"],o);const u=f(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&h(t,["defaultCheckpointId"],u),i}function DS(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],MS(r,a,t)),t}function IS(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function OS(r,e){const t={};if(f(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function US(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["contents"]);if(a!=null){let u=Bn(r,a);Array.isArray(u)&&(u=u.map(d=>Ml(r,d))),h(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&h(t,["config"],OS(r,o)),t}function LS(r,e){const t={};if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(e,["imageBytes"]);i!=null&&h(t,["bytesBase64Encoded"],ji(r,i));const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function PS(r,e,t){const i={},a=f(e,["numberOfVideos"]);if(t!==void 0&&a!=null&&h(t,["parameters","sampleCount"],a),f(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(e,["durationSeconds"]);if(t!==void 0&&o!=null&&h(t,["parameters","durationSeconds"],o),f(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(e,["aspectRatio"]);if(t!==void 0&&u!=null&&h(t,["parameters","aspectRatio"],u),f(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=f(e,["personGeneration"]);if(t!==void 0&&d!=null&&h(t,["parameters","personGeneration"],d),f(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(e,["negativePrompt"]);if(t!==void 0&&m!=null&&h(t,["parameters","negativePrompt"],m),f(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(f(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return i}function zS(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["prompt"]);a!=null&&h(t,["instances[0]","prompt"],a);const o=f(e,["image"]);o!=null&&h(t,["instances[0]","image"],LS(r,o));const u=f(e,["config"]);return u!=null&&h(t,["config"],PS(r,u,t)),t}function BS(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function VS(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["data"]);a!=null&&h(t,["data"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function qS(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["fileUri"]);a!=null&&h(t,["fileUri"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function GS(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],BS(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],VS(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],qS(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function Rs(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>GS(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function FS(r,e){const t={},i=f(e,["anyOf"]);i!=null&&h(t,["anyOf"],i);const a=f(e,["default"]);a!=null&&h(t,["default"],a);const o=f(e,["description"]);o!=null&&h(t,["description"],o);const u=f(e,["enum"]);u!=null&&h(t,["enum"],u);const d=f(e,["example"]);d!=null&&h(t,["example"],d);const m=f(e,["format"]);m!=null&&h(t,["format"],m);const p=f(e,["items"]);p!=null&&h(t,["items"],p);const y=f(e,["maxItems"]);y!=null&&h(t,["maxItems"],y);const _=f(e,["maxLength"]);_!=null&&h(t,["maxLength"],_);const x=f(e,["maxProperties"]);x!=null&&h(t,["maxProperties"],x);const b=f(e,["maximum"]);b!=null&&h(t,["maximum"],b);const w=f(e,["minItems"]);w!=null&&h(t,["minItems"],w);const T=f(e,["minLength"]);T!=null&&h(t,["minLength"],T);const A=f(e,["minProperties"]);A!=null&&h(t,["minProperties"],A);const k=f(e,["minimum"]);k!=null&&h(t,["minimum"],k);const N=f(e,["nullable"]);N!=null&&h(t,["nullable"],N);const D=f(e,["pattern"]);D!=null&&h(t,["pattern"],D);const I=f(e,["properties"]);I!=null&&h(t,["properties"],I);const O=f(e,["propertyOrdering"]);O!=null&&h(t,["propertyOrdering"],O);const G=f(e,["required"]);G!=null&&h(t,["required"],G);const j=f(e,["title"]);j!=null&&h(t,["title"],j);const ee=f(e,["type"]);return ee!=null&&h(t,["type"],ee),t}function HS(r,e){const t={},i=f(e,["featureSelectionPreference"]);return i!=null&&h(t,["featureSelectionPreference"],i),t}function jS(r,e){const t={},i=f(e,["method"]);i!=null&&h(t,["method"],i);const a=f(e,["category"]);a!=null&&h(t,["category"],a);const o=f(e,["threshold"]);return o!=null&&h(t,["threshold"],o),t}function $S(r,e){const t={};if(f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(e,["description"]);i!=null&&h(t,["description"],i);const a=f(e,["name"]);a!=null&&h(t,["name"],a);const o=f(e,["parameters"]);o!=null&&h(t,["parameters"],o);const u=f(e,["response"]);return u!=null&&h(t,["response"],u),t}function YS(r,e){const t={},i=f(e,["startTime"]);i!=null&&h(t,["startTime"],i);const a=f(e,["endTime"]);return a!=null&&h(t,["endTime"],a),t}function KS(r,e){const t={},i=f(e,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],YS(r,i)),t}function ZS(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["dynamicThreshold"]);return a!=null&&h(t,["dynamicThreshold"],a),t}function JS(r,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],ZS(r,i)),t}function WS(){return{}}function XS(r,e){const t={},i=f(e,["apiKeyString"]);return i!=null&&h(t,["apiKeyString"],i),t}function QS(r,e){const t={},i=f(e,["apiKeyConfig"]);i!=null&&h(t,["apiKeyConfig"],XS(r,i));const a=f(e,["authType"]);a!=null&&h(t,["authType"],a);const o=f(e,["googleServiceAccountConfig"]);o!=null&&h(t,["googleServiceAccountConfig"],o);const u=f(e,["httpBasicAuthConfig"]);u!=null&&h(t,["httpBasicAuthConfig"],u);const d=f(e,["oauthConfig"]);d!=null&&h(t,["oauthConfig"],d);const m=f(e,["oidcConfig"]);return m!=null&&h(t,["oidcConfig"],m),t}function eC(r,e){const t={},i=f(e,["authConfig"]);return i!=null&&h(t,["authConfig"],QS(r,i)),t}function Zy(r,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>$S(r,_))),h(t,["functionDeclarations"],y)}const a=f(e,["retrieval"]);a!=null&&h(t,["retrieval"],a);const o=f(e,["googleSearch"]);o!=null&&h(t,["googleSearch"],KS(r,o));const u=f(e,["googleSearchRetrieval"]);u!=null&&h(t,["googleSearchRetrieval"],JS(r,u)),f(e,["enterpriseWebSearch"])!=null&&h(t,["enterpriseWebSearch"],WS());const m=f(e,["googleMaps"]);if(m!=null&&h(t,["googleMaps"],eC(r,m)),f(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=f(e,["codeExecution"]);return p!=null&&h(t,["codeExecution"],p),t}function tC(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["allowedFunctionNames"]);return a!=null&&h(t,["allowedFunctionNames"],a),t}function nC(r,e){const t={},i=f(e,["latitude"]);i!=null&&h(t,["latitude"],i);const a=f(e,["longitude"]);return a!=null&&h(t,["longitude"],a),t}function iC(r,e){const t={},i=f(e,["latLng"]);i!=null&&h(t,["latLng"],nC(r,i));const a=f(e,["languageCode"]);return a!=null&&h(t,["languageCode"],a),t}function rC(r,e){const t={},i=f(e,["functionCallingConfig"]);i!=null&&h(t,["functionCallingConfig"],tC(r,i));const a=f(e,["retrievalConfig"]);return a!=null&&h(t,["retrievalConfig"],iC(r,a)),t}function sC(r,e){const t={},i=f(e,["voiceName"]);return i!=null&&h(t,["voiceName"],i),t}function aC(r,e){const t={},i=f(e,["prebuiltVoiceConfig"]);return i!=null&&h(t,["prebuiltVoiceConfig"],sC(r,i)),t}function oC(r,e){const t={},i=f(e,["voiceConfig"]);if(i!=null&&h(t,["voiceConfig"],aC(r,i)),f(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=f(e,["languageCode"]);return a!=null&&h(t,["languageCode"],a),t}function lC(r,e){const t={},i=f(e,["includeThoughts"]);i!=null&&h(t,["includeThoughts"],i);const a=f(e,["thinkingBudget"]);return a!=null&&h(t,["thinkingBudget"],a),t}function uC(r,e,t){const i={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&h(t,["systemInstruction"],Rs(r,tn(r,a)));const o=f(e,["temperature"]);o!=null&&h(i,["temperature"],o);const u=f(e,["topP"]);u!=null&&h(i,["topP"],u);const d=f(e,["topK"]);d!=null&&h(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&h(i,["candidateCount"],m);const p=f(e,["maxOutputTokens"]);p!=null&&h(i,["maxOutputTokens"],p);const y=f(e,["stopSequences"]);y!=null&&h(i,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&h(i,["responseLogprobs"],_);const x=f(e,["logprobs"]);x!=null&&h(i,["logprobs"],x);const b=f(e,["presencePenalty"]);b!=null&&h(i,["presencePenalty"],b);const w=f(e,["frequencyPenalty"]);w!=null&&h(i,["frequencyPenalty"],w);const T=f(e,["seed"]);T!=null&&h(i,["seed"],T);const A=f(e,["responseMimeType"]);A!=null&&h(i,["responseMimeType"],A);const k=f(e,["responseSchema"]);k!=null&&h(i,["responseSchema"],FS(r,Cl(r,k)));const N=f(e,["routingConfig"]);N!=null&&h(i,["routingConfig"],N);const D=f(e,["modelSelectionConfig"]);D!=null&&h(i,["modelConfig"],HS(r,D));const I=f(e,["safetySettings"]);if(t!==void 0&&I!=null){let R=I;Array.isArray(R)&&(R=R.map(re=>jS(r,re))),h(t,["safetySettings"],R)}const O=f(e,["tools"]);if(t!==void 0&&O!=null){let R=Ka(r,O);Array.isArray(R)&&(R=R.map(re=>Zy(r,Ya(r,re)))),h(t,["tools"],R)}const G=f(e,["toolConfig"]);t!==void 0&&G!=null&&h(t,["toolConfig"],rC(r,G));const j=f(e,["labels"]);t!==void 0&&j!=null&&h(t,["labels"],j);const ee=f(e,["cachedContent"]);t!==void 0&&ee!=null&&h(t,["cachedContent"],Hi(r,ee));const B=f(e,["responseModalities"]);B!=null&&h(i,["responseModalities"],B);const Z=f(e,["mediaResolution"]);Z!=null&&h(i,["mediaResolution"],Z);const ve=f(e,["speechConfig"]);ve!=null&&h(i,["speechConfig"],oC(r,Py(r,ve)));const q=f(e,["audioTimestamp"]);q!=null&&h(i,["audioTimestamp"],q);const Q=f(e,["thinkingConfig"]);return Q!=null&&h(i,["thinkingConfig"],lC(r,Q)),i}function $g(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["contents"]);if(a!=null){let u=Bn(r,a);Array.isArray(u)&&(u=u.map(d=>Rs(r,d))),h(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&h(t,["generationConfig"],uC(r,o,t)),t}function cC(r,e,t){const i={},a=f(e,["taskType"]);t!==void 0&&a!=null&&h(t,["instances[]","task_type"],a);const o=f(e,["title"]);t!==void 0&&o!=null&&h(t,["instances[]","title"],o);const u=f(e,["outputDimensionality"]);t!==void 0&&u!=null&&h(t,["parameters","outputDimensionality"],u);const d=f(e,["mimeType"]);t!==void 0&&d!=null&&h(t,["instances[]","mimeType"],d);const m=f(e,["autoTruncate"]);return t!==void 0&&m!=null&&h(t,["parameters","autoTruncate"],m),i}function dC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["contents"]);a!=null&&h(t,["instances[]","content"],Ly(r,a));const o=f(e,["config"]);return o!=null&&h(t,["config"],cC(r,o,t)),t}function fC(r,e,t){const i={},a=f(e,["outputGcsUri"]);t!==void 0&&a!=null&&h(t,["parameters","storageUri"],a);const o=f(e,["negativePrompt"]);t!==void 0&&o!=null&&h(t,["parameters","negativePrompt"],o);const u=f(e,["numberOfImages"]);t!==void 0&&u!=null&&h(t,["parameters","sampleCount"],u);const d=f(e,["aspectRatio"]);t!==void 0&&d!=null&&h(t,["parameters","aspectRatio"],d);const m=f(e,["guidanceScale"]);t!==void 0&&m!=null&&h(t,["parameters","guidanceScale"],m);const p=f(e,["seed"]);t!==void 0&&p!=null&&h(t,["parameters","seed"],p);const y=f(e,["safetyFilterLevel"]);t!==void 0&&y!=null&&h(t,["parameters","safetySetting"],y);const _=f(e,["personGeneration"]);t!==void 0&&_!=null&&h(t,["parameters","personGeneration"],_);const x=f(e,["includeSafetyAttributes"]);t!==void 0&&x!=null&&h(t,["parameters","includeSafetyAttributes"],x);const b=f(e,["includeRaiReason"]);t!==void 0&&b!=null&&h(t,["parameters","includeRaiReason"],b);const w=f(e,["language"]);t!==void 0&&w!=null&&h(t,["parameters","language"],w);const T=f(e,["outputMimeType"]);t!==void 0&&T!=null&&h(t,["parameters","outputOptions","mimeType"],T);const A=f(e,["outputCompressionQuality"]);t!==void 0&&A!=null&&h(t,["parameters","outputOptions","compressionQuality"],A);const k=f(e,["addWatermark"]);t!==void 0&&k!=null&&h(t,["parameters","addWatermark"],k);const N=f(e,["enhancePrompt"]);return t!==void 0&&N!=null&&h(t,["parameters","enhancePrompt"],N),i}function hC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["prompt"]);a!=null&&h(t,["instances[0]","prompt"],a);const o=f(e,["config"]);return o!=null&&h(t,["config"],fC(r,o,t)),t}function Id(r,e){const t={},i=f(e,["gcsUri"]);i!=null&&h(t,["gcsUri"],i);const a=f(e,["imageBytes"]);a!=null&&h(t,["bytesBase64Encoded"],ji(r,a));const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function pC(r,e){const t={},i=f(e,["maskMode"]);i!=null&&h(t,["maskMode"],i);const a=f(e,["segmentationClasses"]);a!=null&&h(t,["maskClasses"],a);const o=f(e,["maskDilation"]);return o!=null&&h(t,["dilation"],o),t}function mC(r,e){const t={},i=f(e,["controlType"]);i!=null&&h(t,["controlType"],i);const a=f(e,["enableControlImageComputation"]);return a!=null&&h(t,["computeControl"],a),t}function gC(r,e){const t={},i=f(e,["styleDescription"]);return i!=null&&h(t,["styleDescription"],i),t}function yC(r,e){const t={},i=f(e,["subjectType"]);i!=null&&h(t,["subjectType"],i);const a=f(e,["subjectDescription"]);return a!=null&&h(t,["subjectDescription"],a),t}function vC(r,e){const t={},i=f(e,["referenceImage"]);i!=null&&h(t,["referenceImage"],Id(r,i));const a=f(e,["referenceId"]);a!=null&&h(t,["referenceId"],a);const o=f(e,["referenceType"]);o!=null&&h(t,["referenceType"],o);const u=f(e,["maskImageConfig"]);u!=null&&h(t,["maskImageConfig"],pC(r,u));const d=f(e,["controlImageConfig"]);d!=null&&h(t,["controlImageConfig"],mC(r,d));const m=f(e,["styleImageConfig"]);m!=null&&h(t,["styleImageConfig"],gC(r,m));const p=f(e,["subjectImageConfig"]);return p!=null&&h(t,["subjectImageConfig"],yC(r,p)),t}function _C(r,e,t){const i={},a=f(e,["outputGcsUri"]);t!==void 0&&a!=null&&h(t,["parameters","storageUri"],a);const o=f(e,["negativePrompt"]);t!==void 0&&o!=null&&h(t,["parameters","negativePrompt"],o);const u=f(e,["numberOfImages"]);t!==void 0&&u!=null&&h(t,["parameters","sampleCount"],u);const d=f(e,["aspectRatio"]);t!==void 0&&d!=null&&h(t,["parameters","aspectRatio"],d);const m=f(e,["guidanceScale"]);t!==void 0&&m!=null&&h(t,["parameters","guidanceScale"],m);const p=f(e,["seed"]);t!==void 0&&p!=null&&h(t,["parameters","seed"],p);const y=f(e,["safetyFilterLevel"]);t!==void 0&&y!=null&&h(t,["parameters","safetySetting"],y);const _=f(e,["personGeneration"]);t!==void 0&&_!=null&&h(t,["parameters","personGeneration"],_);const x=f(e,["includeSafetyAttributes"]);t!==void 0&&x!=null&&h(t,["parameters","includeSafetyAttributes"],x);const b=f(e,["includeRaiReason"]);t!==void 0&&b!=null&&h(t,["parameters","includeRaiReason"],b);const w=f(e,["language"]);t!==void 0&&w!=null&&h(t,["parameters","language"],w);const T=f(e,["outputMimeType"]);t!==void 0&&T!=null&&h(t,["parameters","outputOptions","mimeType"],T);const A=f(e,["outputCompressionQuality"]);t!==void 0&&A!=null&&h(t,["parameters","outputOptions","compressionQuality"],A);const k=f(e,["editMode"]);t!==void 0&&k!=null&&h(t,["parameters","editMode"],k);const N=f(e,["baseSteps"]);return t!==void 0&&N!=null&&h(t,["parameters","editConfig","baseSteps"],N),i}function bC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["prompt"]);a!=null&&h(t,["instances[0]","prompt"],a);const o=f(e,["referenceImages"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>vC(r,m))),h(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&h(t,["config"],_C(r,u,t)),t}function xC(r,e,t){const i={},a=f(e,["includeRaiReason"]);t!==void 0&&a!=null&&h(t,["parameters","includeRaiReason"],a);const o=f(e,["outputMimeType"]);t!==void 0&&o!=null&&h(t,["parameters","outputOptions","mimeType"],o);const u=f(e,["outputCompressionQuality"]);t!==void 0&&u!=null&&h(t,["parameters","outputOptions","compressionQuality"],u);const d=f(e,["numberOfImages"]);t!==void 0&&d!=null&&h(t,["parameters","sampleCount"],d);const m=f(e,["mode"]);return t!==void 0&&m!=null&&h(t,["parameters","mode"],m),i}function wC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["image"]);a!=null&&h(t,["instances[0]","image"],Id(r,a));const o=f(e,["upscaleFactor"]);o!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],o);const u=f(e,["config"]);return u!=null&&h(t,["config"],xC(r,u,t)),t}function TC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function SC(r,e,t){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],Vy(r,d)),i}function CC(r,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],SC(r,i,t)),t}function EC(r,e,t){const i={},a=f(e,["displayName"]);t!==void 0&&a!=null&&h(t,["displayName"],a);const o=f(e,["description"]);t!==void 0&&o!=null&&h(t,["description"],o);const u=f(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&h(t,["defaultCheckpointId"],u),i}function AC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],EC(r,a,t)),t}function kC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function RC(r,e,t){const i={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&h(t,["systemInstruction"],Rs(r,tn(r,a)));const o=f(e,["tools"]);if(t!==void 0&&o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>Zy(r,m))),h(t,["tools"],d)}const u=f(e,["generationConfig"]);return t!==void 0&&u!=null&&h(t,["generationConfig"],u),i}function NC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["contents"]);if(a!=null){let u=Bn(r,a);Array.isArray(u)&&(u=u.map(d=>Rs(r,d))),h(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&h(t,["config"],RC(r,o,t)),t}function MC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["contents"]);if(a!=null){let u=Bn(r,a);Array.isArray(u)&&(u=u.map(d=>Rs(r,d))),h(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&h(t,["config"],o),t}function DC(r,e,t){const i={},a=f(e,["numberOfVideos"]);t!==void 0&&a!=null&&h(t,["parameters","sampleCount"],a);const o=f(e,["outputGcsUri"]);t!==void 0&&o!=null&&h(t,["parameters","storageUri"],o);const u=f(e,["fps"]);t!==void 0&&u!=null&&h(t,["parameters","fps"],u);const d=f(e,["durationSeconds"]);t!==void 0&&d!=null&&h(t,["parameters","durationSeconds"],d);const m=f(e,["seed"]);t!==void 0&&m!=null&&h(t,["parameters","seed"],m);const p=f(e,["aspectRatio"]);t!==void 0&&p!=null&&h(t,["parameters","aspectRatio"],p);const y=f(e,["resolution"]);t!==void 0&&y!=null&&h(t,["parameters","resolution"],y);const _=f(e,["personGeneration"]);t!==void 0&&_!=null&&h(t,["parameters","personGeneration"],_);const x=f(e,["pubsubTopic"]);t!==void 0&&x!=null&&h(t,["parameters","pubsubTopic"],x);const b=f(e,["negativePrompt"]);t!==void 0&&b!=null&&h(t,["parameters","negativePrompt"],b);const w=f(e,["enhancePrompt"]);t!==void 0&&w!=null&&h(t,["parameters","enhancePrompt"],w);const T=f(e,["generateAudio"]);return t!==void 0&&T!=null&&h(t,["parameters","generateAudio"],T),i}function IC(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],gt(r,i));const a=f(e,["prompt"]);a!=null&&h(t,["instances[0]","prompt"],a);const o=f(e,["image"]);o!=null&&h(t,["instances[0]","image"],Id(r,o));const u=f(e,["config"]);return u!=null&&h(t,["config"],DC(r,u,t)),t}function OC(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function UC(r,e){const t={},i=f(e,["data"]);i!=null&&h(t,["data"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function LC(r,e){const t={},i=f(e,["fileUri"]);i!=null&&h(t,["fileUri"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function PC(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],OC(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],UC(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],LC(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function zC(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>PC(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function BC(r,e){const t={},i=f(e,["citationSources"]);return i!=null&&h(t,["citations"],i),t}function VC(r,e){const t={},i=f(e,["retrievedUrl"]);i!=null&&h(t,["retrievedUrl"],i);const a=f(e,["urlRetrievalStatus"]);return a!=null&&h(t,["urlRetrievalStatus"],a),t}function qC(r,e){const t={},i=f(e,["urlMetadata"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>VC(r,o))),h(t,["urlMetadata"],a)}return t}function GC(r,e){const t={},i=f(e,["content"]);i!=null&&h(t,["content"],zC(r,i));const a=f(e,["citationMetadata"]);a!=null&&h(t,["citationMetadata"],BC(r,a));const o=f(e,["tokenCount"]);o!=null&&h(t,["tokenCount"],o);const u=f(e,["finishReason"]);u!=null&&h(t,["finishReason"],u);const d=f(e,["urlContextMetadata"]);d!=null&&h(t,["urlContextMetadata"],qC(r,d));const m=f(e,["avgLogprobs"]);m!=null&&h(t,["avgLogprobs"],m);const p=f(e,["groundingMetadata"]);p!=null&&h(t,["groundingMetadata"],p);const y=f(e,["index"]);y!=null&&h(t,["index"],y);const _=f(e,["logprobsResult"]);_!=null&&h(t,["logprobsResult"],_);const x=f(e,["safetyRatings"]);return x!=null&&h(t,["safetyRatings"],x),t}function Yg(r,e){const t={},i=f(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>GC(r,m))),h(t,["candidates"],d)}const a=f(e,["modelVersion"]);a!=null&&h(t,["modelVersion"],a);const o=f(e,["promptFeedback"]);o!=null&&h(t,["promptFeedback"],o);const u=f(e,["usageMetadata"]);return u!=null&&h(t,["usageMetadata"],u),t}function FC(r,e){const t={},i=f(e,["values"]);return i!=null&&h(t,["values"],i),t}function HC(){return{}}function jC(r,e){const t={},i=f(e,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>FC(r,u))),h(t,["embeddings"],o)}return f(e,["metadata"])!=null&&h(t,["metadata"],HC()),t}function $C(r,e){const t={},i=f(e,["bytesBase64Encoded"]);i!=null&&h(t,["imageBytes"],ji(r,i));const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function Jy(r,e){const t={},i=f(e,["safetyAttributes","categories"]);i!=null&&h(t,["categories"],i);const a=f(e,["safetyAttributes","scores"]);a!=null&&h(t,["scores"],a);const o=f(e,["contentType"]);return o!=null&&h(t,["contentType"],o),t}function YC(r,e){const t={},i=f(e,["_self"]);i!=null&&h(t,["image"],$C(r,i));const a=f(e,["raiFilteredReason"]);a!=null&&h(t,["raiFilteredReason"],a);const o=f(e,["_self"]);return o!=null&&h(t,["safetyAttributes"],Jy(r,o)),t}function KC(r,e){const t={},i=f(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>YC(r,u))),h(t,["generatedImages"],o)}const a=f(e,["positivePromptSafetyAttributes"]);return a!=null&&h(t,["positivePromptSafetyAttributes"],Jy(r,a)),t}function ZC(r,e){const t={},i=f(e,["baseModel"]);i!=null&&h(t,["baseModel"],i);const a=f(e,["createTime"]);a!=null&&h(t,["createTime"],a);const o=f(e,["updateTime"]);return o!=null&&h(t,["updateTime"],o),t}function pd(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["displayName"]);a!=null&&h(t,["displayName"],a);const o=f(e,["description"]);o!=null&&h(t,["description"],o);const u=f(e,["version"]);u!=null&&h(t,["version"],u);const d=f(e,["_self"]);d!=null&&h(t,["tunedModelInfo"],ZC(r,d));const m=f(e,["inputTokenLimit"]);m!=null&&h(t,["inputTokenLimit"],m);const p=f(e,["outputTokenLimit"]);p!=null&&h(t,["outputTokenLimit"],p);const y=f(e,["supportedGenerationMethods"]);return y!=null&&h(t,["supportedActions"],y),t}function JC(r,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=f(e,["_self"]);if(a!=null){let o=qy(r,a);Array.isArray(o)&&(o=o.map(u=>pd(r,u))),h(t,["models"],o)}return t}function WC(){return{}}function XC(r,e){const t={},i=f(e,["totalTokens"]);i!=null&&h(t,["totalTokens"],i);const a=f(e,["cachedContentTokenCount"]);return a!=null&&h(t,["cachedContentTokenCount"],a),t}function QC(r,e){const t={},i=f(e,["video","uri"]);i!=null&&h(t,["uri"],i);const a=f(e,["video","encodedVideo"]);a!=null&&h(t,["videoBytes"],ji(r,a));const o=f(e,["encoding"]);return o!=null&&h(t,["mimeType"],o),t}function eE(r,e){const t={},i=f(e,["_self"]);return i!=null&&h(t,["video"],QC(r,i)),t}function tE(r,e){const t={},i=f(e,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>eE(r,d))),h(t,["generatedVideos"],u)}const a=f(e,["raiMediaFilteredCount"]);a!=null&&h(t,["raiMediaFilteredCount"],a);const o=f(e,["raiMediaFilteredReasons"]);return o!=null&&h(t,["raiMediaFilteredReasons"],o),t}function nE(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["metadata"]);a!=null&&h(t,["metadata"],a);const o=f(e,["done"]);o!=null&&h(t,["done"],o);const u=f(e,["error"]);u!=null&&h(t,["error"],u);const d=f(e,["response","generateVideoResponse"]);return d!=null&&h(t,["response"],tE(r,d)),t}function iE(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function rE(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["data"]);a!=null&&h(t,["data"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function sE(r,e){const t={},i=f(e,["displayName"]);i!=null&&h(t,["displayName"],i);const a=f(e,["fileUri"]);a!=null&&h(t,["fileUri"],a);const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function aE(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],iE(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],rE(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],sE(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function oE(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>aE(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function lE(r,e){const t={},i=f(e,["citations"]);return i!=null&&h(t,["citations"],i),t}function uE(r,e){const t={},i=f(e,["content"]);i!=null&&h(t,["content"],oE(r,i));const a=f(e,["citationMetadata"]);a!=null&&h(t,["citationMetadata"],lE(r,a));const o=f(e,["finishMessage"]);o!=null&&h(t,["finishMessage"],o);const u=f(e,["finishReason"]);u!=null&&h(t,["finishReason"],u);const d=f(e,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const m=f(e,["groundingMetadata"]);m!=null&&h(t,["groundingMetadata"],m);const p=f(e,["index"]);p!=null&&h(t,["index"],p);const y=f(e,["logprobsResult"]);y!=null&&h(t,["logprobsResult"],y);const _=f(e,["safetyRatings"]);return _!=null&&h(t,["safetyRatings"],_),t}function Kg(r,e){const t={},i=f(e,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(y=>uE(r,y))),h(t,["candidates"],p)}const a=f(e,["createTime"]);a!=null&&h(t,["createTime"],a);const o=f(e,["responseId"]);o!=null&&h(t,["responseId"],o);const u=f(e,["modelVersion"]);u!=null&&h(t,["modelVersion"],u);const d=f(e,["promptFeedback"]);d!=null&&h(t,["promptFeedback"],d);const m=f(e,["usageMetadata"]);return m!=null&&h(t,["usageMetadata"],m),t}function cE(r,e){const t={},i=f(e,["truncated"]);i!=null&&h(t,["truncated"],i);const a=f(e,["token_count"]);return a!=null&&h(t,["tokenCount"],a),t}function dE(r,e){const t={},i=f(e,["values"]);i!=null&&h(t,["values"],i);const a=f(e,["statistics"]);return a!=null&&h(t,["statistics"],cE(r,a)),t}function fE(r,e){const t={},i=f(e,["billableCharacterCount"]);return i!=null&&h(t,["billableCharacterCount"],i),t}function hE(r,e){const t={},i=f(e,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>dE(r,u))),h(t,["embeddings"],o)}const a=f(e,["metadata"]);return a!=null&&h(t,["metadata"],fE(r,a)),t}function pE(r,e){const t={},i=f(e,["gcsUri"]);i!=null&&h(t,["gcsUri"],i);const a=f(e,["bytesBase64Encoded"]);a!=null&&h(t,["imageBytes"],ji(r,a));const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function Wy(r,e){const t={},i=f(e,["safetyAttributes","categories"]);i!=null&&h(t,["categories"],i);const a=f(e,["safetyAttributes","scores"]);a!=null&&h(t,["scores"],a);const o=f(e,["contentType"]);return o!=null&&h(t,["contentType"],o),t}function Od(r,e){const t={},i=f(e,["_self"]);i!=null&&h(t,["image"],pE(r,i));const a=f(e,["raiFilteredReason"]);a!=null&&h(t,["raiFilteredReason"],a);const o=f(e,["_self"]);o!=null&&h(t,["safetyAttributes"],Wy(r,o));const u=f(e,["prompt"]);return u!=null&&h(t,["enhancedPrompt"],u),t}function mE(r,e){const t={},i=f(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>Od(r,u))),h(t,["generatedImages"],o)}const a=f(e,["positivePromptSafetyAttributes"]);return a!=null&&h(t,["positivePromptSafetyAttributes"],Wy(r,a)),t}function gE(r,e){const t={},i=f(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Od(r,o))),h(t,["generatedImages"],a)}return t}function yE(r,e){const t={},i=f(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Od(r,o))),h(t,["generatedImages"],a)}return t}function vE(r,e){const t={},i=f(e,["endpoint"]);i!=null&&h(t,["name"],i);const a=f(e,["deployedModelId"]);return a!=null&&h(t,["deployedModelId"],a),t}function _E(r,e){const t={},i=f(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&h(t,["baseModel"],i);const a=f(e,["createTime"]);a!=null&&h(t,["createTime"],a);const o=f(e,["updateTime"]);return o!=null&&h(t,["updateTime"],o),t}function bE(r,e){const t={},i=f(e,["checkpointId"]);i!=null&&h(t,["checkpointId"],i);const a=f(e,["epoch"]);a!=null&&h(t,["epoch"],a);const o=f(e,["step"]);return o!=null&&h(t,["step"],o),t}function md(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["displayName"]);a!=null&&h(t,["displayName"],a);const o=f(e,["description"]);o!=null&&h(t,["description"],o);const u=f(e,["versionId"]);u!=null&&h(t,["version"],u);const d=f(e,["deployedModels"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(b=>vE(r,b))),h(t,["endpoints"],x)}const m=f(e,["labels"]);m!=null&&h(t,["labels"],m);const p=f(e,["_self"]);p!=null&&h(t,["tunedModelInfo"],_E(r,p));const y=f(e,["defaultCheckpointId"]);y!=null&&h(t,["defaultCheckpointId"],y);const _=f(e,["checkpoints"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(b=>bE(r,b))),h(t,["checkpoints"],x)}return t}function xE(r,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=f(e,["_self"]);if(a!=null){let o=qy(r,a);Array.isArray(o)&&(o=o.map(u=>md(r,u))),h(t,["models"],o)}return t}function wE(){return{}}function TE(r,e){const t={},i=f(e,["totalTokens"]);return i!=null&&h(t,["totalTokens"],i),t}function SE(r,e){const t={},i=f(e,["tokensInfo"]);return i!=null&&h(t,["tokensInfo"],i),t}function CE(r,e){const t={},i=f(e,["gcsUri"]);i!=null&&h(t,["uri"],i);const a=f(e,["bytesBase64Encoded"]);a!=null&&h(t,["videoBytes"],ji(r,a));const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function EE(r,e){const t={},i=f(e,["_self"]);return i!=null&&h(t,["video"],CE(r,i)),t}function AE(r,e){const t={},i=f(e,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>EE(r,d))),h(t,["generatedVideos"],u)}const a=f(e,["raiMediaFilteredCount"]);a!=null&&h(t,["raiMediaFilteredCount"],a);const o=f(e,["raiMediaFilteredReasons"]);return o!=null&&h(t,["raiMediaFilteredReasons"],o),t}function kE(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["metadata"]);a!=null&&h(t,["metadata"],a);const o=f(e,["done"]);o!=null&&h(t,["done"],o);const u=f(e,["error"]);u!=null&&h(t,["error"],u);const d=f(e,["response"]);return d!=null&&h(t,["response"],AE(r,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RE="Content-Type",NE="X-Server-Timeout",ME="User-Agent",gd="x-goog-api-client",DE="1.3.0",IE=`google-genai-sdk/${DE}`,OE="v1beta1",UE="v1beta",Zg=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Xy extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class yd extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class LE{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:OE,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:UE,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const a=[this.getRequestUrlInternal(t)];return i&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))a.searchParams.append(u,String(d));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.unaryApiCall(a,o,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[a,o]of Object.entries(t))typeof o=="object"?i[a]=Object.assign(Object.assign({},i[a]),o):o!==void 0&&(i[a]=o);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.streamApiCall(a,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const a=new AbortController,o=a.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>a.abort(),t.timeout),i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=o}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async a=>(await Jg(a),new cd(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async a=>(await Jg(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var t;return bs(this,arguments,function*(){const a=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:m}=yield yt(a.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=o.decode(m);try{const _=JSON.parse(p);if("error"in _){const x=JSON.parse(JSON.stringify(_.error)),b=x.status,w=x.code,T=`got status: ${b}. ${JSON.stringify(_)}`;if(w>=400&&w<500)throw new Xy(T);if(w>=500&&w<600)throw new yd(T)}}catch(_){const x=_;if(x.name==="ClientError"||x.name==="ServerError")throw _}u+=p;let y=u.match(Zg);for(;y;){const _=y[1];try{const x=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield yt(new cd(x)),u=u.slice(y[0].length),y=u.match(Zg)}catch(x){throw new Error(`exception parsing stream chunk ${_}. ${x}`)}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=IE+" "+this.clientOptions.userAgentExtra;return e[ME]=t,e[gd]=t,e[RE]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))t.append(i,a);e.timeout&&e.timeout>0&&t.append(NE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,u=await o.stat(e);a.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=d;const m=await this.fetchUploadUrl(a,t);return o.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let a={};t!=null&&t.httpOptions?a=t.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},u=await this.request({path:Ve("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:a});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Jg(r){var e;if(r===void 0)throw new yd("response is undefined");if(!r.ok){const t=r.status,i=r.statusText;let a;!((e=r.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await r.json():a={error:{message:await r.text(),code:r.status,status:r.statusText}};const o=`got status: ${t} ${i}. ${JSON.stringify(a)}`;throw t>=400&&t<500?new Xy(o):t>=500&&t<600?new yd(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PE="mcp_used/unknown";function Qy(r){for(const e of r)if(Ud(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function ev(r){var e;const t=(e=r[gd])!==null&&e!==void 0?e:"";r[gd]=(t+` ${PE}`).trimStart()}function zE(r){var e,t,i;return(i=(t=(e=r.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>Ud(a)))!==null&&i!==void 0?i:!1}function BE(r){var e,t,i;return(i=(t=(e=r.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>!Ud(a)))!==null&&i!==void 0?i:!1}function Ud(r){return r!==null&&typeof r=="object"&&r instanceof Ld}function VE(r,e=100){return bs(this,arguments,function*(){let i,a=0;for(;a<e;){const o=yield yt(r.listTools({cursor:i}));for(const u of o.tools)yield yield yt(u),a++;if(!o.nextCursor)break;i=o.nextCursor}})}class Ld{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ld(e,t)}async initialize(){var e,t,i,a;if(this.mcpTools.length>0)return;const o={},u=[];for(const y of this.mcpClients)try{for(var d=!0,m=(t=void 0,Oa(VE(y))),p;p=await m.next(),e=p.done,!e;d=!0){a=p.value,d=!1;const _=a;u.push(_);const x=_.name;if(o[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);o[x]=y}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Yb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=await this.functionNameToMcpClient[i.name].callTool({name:i.name,arguments:i.args});t.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qE(r,e,t){const i=new Ob;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data);const o=eS(r,a);Object.assign(i,o),e(i)}class GE{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),u=jE(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const y=new Promise(D=>{p=D}),_=e.callbacks,x=function(){p({})},b=this.apiClient,w={onopen:x,onmessage:D=>{qE(b,_.onmessage,D)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=_==null?void 0:_.onclose)!==null&&i!==void 0?i:function(D){}},T=this.webSocketFactory.create(m,HE(u),w);T.connect(),await y;const A=gt(this.apiClient,e.model),k=$y(this.apiClient,{model:A}),N=hd(this.apiClient,{setup:k});return T.send(JSON.stringify(N)),new FE(T,this.apiClient)}}class FE{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=pT(this.apiClient,e),i=Yy(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=mT(this.apiClient,e),i=hd(this.apiClient,t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=hd(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(gs.PLAY)}pause(){this.sendPlaybackControl(gs.PAUSE)}stop(){this.sendPlaybackControl(gs.STOP)}resetContext(){this.sendPlaybackControl(gs.RESET_CONTEXT)}close(){this.conn.close()}}function HE(r){const e={};return r.forEach((t,i)=>{e[i]=t}),e}function jE(r){const e=new Headers;for(const[t,i]of Object.entries(r))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $E="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function YE(r,e,t){const i=new Ib;let a;if(t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),r.isVertexAI()){const o=jT(r,a);Object.assign(i,o)}else{const o=HT(r,a);Object.assign(i,o)}e(i)}class KE{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new GE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,a,o,u,d;const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let y;const _=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Qy(e.config.tools)&&ev(_);const x=XE(_);if(this.apiClient.isVertexAI())y=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x);else{const B=this.apiClient.getApiKey();let Z="BidiGenerateContent",ve="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),Z="BidiGenerateContentConstrained",ve="access_token"),y=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${Z}?${ve}=${B}`}let b=()=>{};const w=new Promise(B=>{b=B}),T=e.callbacks,A=function(){var B;(B=T==null?void 0:T.onopen)===null||B===void 0||B.call(T),b({})},k=this.apiClient,N={onopen:A,onmessage:B=>{YE(k,T.onmessage,B)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(B){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(B){}},D=this.webSocketFactory.create(y,WE(x),N);D.connect(),await w;let I=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const B=this.apiClient.getProject(),Z=this.apiClient.getLocation();I=`projects/${B}/locations/${Z}/`+I}let O={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[za.AUDIO]}:e.config.responseModalities=[za.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],j=[];for(const B of G)if(this.isCallableTool(B)){const Z=B;j.push(await Z.tool())}else j.push(B);j.length>0&&(e.config.tools=j);const ee={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=oT(this.apiClient,ee):O=aT(this.apiClient,ee),delete O.config,D.send(JSON.stringify(O)),new JE(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ZE={turnComplete:!0};class JE{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Bn(e,t.turns),e.isVertexAI()?i=i.map(a=>Rs(e,a)):i=i.map(a=>Ml(e,a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error($E)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},ZE),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:hT(this.apiClient,e)}:t={realtimeInput:fT(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function WE(r){const e={};return r.forEach((t,i)=>{e[i]=t}),e}function XE(r){const e=new Headers;for(const[t,i]of Object.entries(r))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wg=10;function Xg(r){var e,t,i;if(!((e=r==null?void 0:r.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(t=r==null?void 0:r.tools)!==null&&t!==void 0?t:[])if(yl(u)){a=!0;break}if(!a)return!0;const o=(i=r==null?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function yl(r){return"callTool"in r&&typeof r.callTool=="function"}function Qg(r){var e;return!(!((e=r==null?void 0:r.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QE extends ks{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,a,o,u,d;const m=await this.processParamsForMcpUsage(t);if(!zE(t)||Xg(t.config))return await this.generateContentInternal(m);if(BE(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,y;const _=Bn(this.apiClient,m.contents),x=(o=(a=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&o!==void 0?o:Wg;let b=0;for(;b<x&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const w=p.candidates[0].content,T=[];for(const A of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(yl(A)){const N=await A.callTool(p.functionCalls);T.push(...N)}b++,y={role:"user",parts:T},m.contents=Bn(this.apiClient,m.contents),m.contents.push(w),m.contents.push(y),Qg(m.config)&&(_.push(w),_.push(y))}return Qg(m.config)&&(p.automaticFunctionCallingHistory=_),p},this.generateContentStream=async t=>{if(Xg(t.config)){const i=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var a;let o;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((a=m==null?void 0:m.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?o=m==null?void 0:m.safetyAttributes:u.push(m);let d;return o?d={generatedImages:u,positivePromptSafetyAttributes:o}:d={generatedImages:u},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Nl(As.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(a)}}async processParamsForMcpUsage(e){var t,i,a;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const u=await Promise.all(o.map(async m=>yl(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&Qy(e.config.tools)){const m=(a=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&a!==void 0?a:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),ev(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,i,a;const o=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(yl(u)){const d=u,m=await d.tool();for(const p of(a=m.functionDeclarations)!==null&&a!==void 0?a:[]){if(!p.name)throw new Error("Function declaration name is required.");if(o.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);o.set(p.name,d)}}return o}async processAfcStream(e){var t,i,a;const o=(a=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:Wg;let u=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(p,y,_){var x,b;return bs(this,arguments,function*(){for(var w,T,A,k;d<o;){u&&(d++,u=!1);const O=yield yt(p.processParamsForMcpUsage(_)),G=yield yt(p.generateContentStreamInternal(O)),j=[],ee=[];try{for(var N=!0,D=(T=void 0,Oa(G)),I;I=yield yt(D.next()),w=I.done,!w;N=!0){k=I.value,N=!1;const B=k;if(yield yield yt(B),B.candidates&&(!((x=B.candidates[0])===null||x===void 0)&&x.content)){ee.push(B.candidates[0].content);for(const Z of(b=B.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(d<o&&Z.functionCall){if(!Z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(Z.functionCall.name)){const ve=yield yt(y.get(Z.functionCall.name).callTool([Z.functionCall]));j.push(...ve)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${Z.functionCall.name}`)}}}}catch(B){T={error:B}}finally{try{!N&&!w&&(A=D.return)&&(yield yt(A.call(D)))}finally{if(T)throw T.error}}if(j.length>0){u=!0;const B=new ka;B.candidates=[{content:{role:"user",parts:j}}],yield yield yt(B);const Z=[];Z.push(...ee),Z.push({role:"user",parts:j});const ve=Bn(p.apiClient,_.contents).concat(Z);_.contents=ve}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=$g(this.apiClient,e);return d=Ve("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const _=Kg(this.apiClient,y),x=new ka;return Object.assign(x,_),x})}else{const p=jg(this.apiClient,e);return d=Ve("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>{const _=Yg(this.apiClient,y),x=new ka;return Object.assign(x,_),x})}}async generateContentStreamInternal(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=$g(this.apiClient,e);d=Ve("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query;const y=this.apiClient;return u=y.requestStream({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(_){return bs(this,arguments,function*(){var x,b,w,T;try{for(var A=!0,k=Oa(_),N;N=yield yt(k.next()),x=N.done,!x;A=!0){T=N.value,A=!1;const I=Kg(y,yield yt(T.json())),O=new ka;Object.assign(O,I),yield yield yt(O)}}catch(D){b={error:D}}finally{try{!A&&!x&&(w=k.return)&&(yield yt(w.call(k)))}finally{if(b)throw b.error}}})})}else{const p=jg(this.apiClient,e);d=Ve("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query;const y=this.apiClient;return u=y.requestStream({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(_){return bs(this,arguments,function*(){var x,b,w,T;try{for(var A=!0,k=Oa(_),N;N=yield yt(k.next()),x=N.done,!x;A=!0){T=N.value,A=!1;const I=Yg(y,yield yt(T.json())),O=new ka;Object.assign(O,I),yield yield yt(O)}}catch(D){b={error:D}}finally{try{!A&&!x&&(w=k.return)&&(yield yt(w.call(k)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=dC(this.apiClient,e);return d=Ve("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const _=hE(this.apiClient,y),x=new Cg;return Object.assign(x,_),x})}else{const p=CS(this.apiClient,e);return d=Ve("{model}:batchEmbedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>{const _=jC(this.apiClient,y),x=new Cg;return Object.assign(x,_),x})}}async generateImagesInternal(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=hC(this.apiClient,e);return d=Ve("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const _=mE(this.apiClient,y),x=new Eg;return Object.assign(x,_),x})}else{const p=AS(this.apiClient,e);return d=Ve("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>{const _=KC(this.apiClient,y),x=new Eg;return Object.assign(x,_),x})}}async editImageInternal(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI()){const d=bC(this.apiClient,e);return o=Ve("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const p=gE(this.apiClient,m),y=new Ab;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI()){const d=wC(this.apiClient,e);return o=Ve("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const p=yE(this.apiClient,m),y=new kb;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=TC(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>md(this.apiClient,y))}else{const p=kS(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>pd(this.apiClient,y))}}async listInternal(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=CC(this.apiClient,e);return d=Ve("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const _=xE(this.apiClient,y),x=new Ag;return Object.assign(x,_),x})}else{const p=NS(this.apiClient,e);return d=Ve("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>{const _=JC(this.apiClient,y),x=new Ag;return Object.assign(x,_),x})}}async update(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=AC(this.apiClient,e);return d=Ve("{model}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>md(this.apiClient,y))}else{const p=DS(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>pd(this.apiClient,y))}}async delete(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=kC(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(()=>{const y=wE(),_=new kg;return Object.assign(_,y),_})}else{const p=IS(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(()=>{const y=WC(),_=new kg;return Object.assign(_,y),_})}}async countTokens(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=NC(this.apiClient,e);return d=Ve("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const _=TE(this.apiClient,y),x=new Rg;return Object.assign(x,_),x})}else{const p=US(this.apiClient,e);return d=Ve("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>{const _=XC(this.apiClient,y),x=new Rg;return Object.assign(x,_),x})}}async computeTokens(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI()){const d=MC(this.apiClient,e);return o=Ve("{model}:computeTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const p=SE(this.apiClient,m),y=new Rb;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=IC(this.apiClient,e);return d=Ve("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>kE(this.apiClient,y))}else{const p=zS(this.apiClient,e);return d=Ve("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>nE(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e1(r,e){const t={},i=f(e,["operationName"]);i!=null&&h(t,["_url","operationName"],i);const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function t1(r,e){const t={},i=f(e,["operationName"]);i!=null&&h(t,["_url","operationName"],i);const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function n1(r,e){const t={},i=f(e,["operationName"]);i!=null&&h(t,["operationName"],i);const a=f(e,["resourceName"]);a!=null&&h(t,["_url","resourceName"],a);const o=f(e,["config"]);return o!=null&&h(t,["config"],o),t}function i1(r,e){const t={},i=f(e,["video","uri"]);i!=null&&h(t,["uri"],i);const a=f(e,["video","encodedVideo"]);a!=null&&h(t,["videoBytes"],ji(r,a));const o=f(e,["encoding"]);return o!=null&&h(t,["mimeType"],o),t}function r1(r,e){const t={},i=f(e,["_self"]);return i!=null&&h(t,["video"],i1(r,i)),t}function s1(r,e){const t={},i=f(e,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>r1(r,d))),h(t,["generatedVideos"],u)}const a=f(e,["raiMediaFilteredCount"]);a!=null&&h(t,["raiMediaFilteredCount"],a);const o=f(e,["raiMediaFilteredReasons"]);return o!=null&&h(t,["raiMediaFilteredReasons"],o),t}function a1(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["metadata"]);a!=null&&h(t,["metadata"],a);const o=f(e,["done"]);o!=null&&h(t,["done"],o);const u=f(e,["error"]);u!=null&&h(t,["error"],u);const d=f(e,["response","generateVideoResponse"]);return d!=null&&h(t,["response"],s1(r,d)),t}function o1(r,e){const t={},i=f(e,["gcsUri"]);i!=null&&h(t,["uri"],i);const a=f(e,["bytesBase64Encoded"]);a!=null&&h(t,["videoBytes"],ji(r,a));const o=f(e,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function l1(r,e){const t={},i=f(e,["_self"]);return i!=null&&h(t,["video"],o1(r,i)),t}function u1(r,e){const t={},i=f(e,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>l1(r,d))),h(t,["generatedVideos"],u)}const a=f(e,["raiMediaFilteredCount"]);a!=null&&h(t,["raiMediaFilteredCount"],a);const o=f(e,["raiMediaFilteredReasons"]);return o!=null&&h(t,["raiMediaFilteredReasons"],o),t}function ey(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["metadata"]);a!=null&&h(t,["metadata"],a);const o=f(e,["done"]);o!=null&&h(t,["done"],o);const u=f(e,["error"]);u!=null&&h(t,["error"],u);const d=f(e,["response"]);return d!=null&&h(t,["response"],u1(r,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c1 extends ks{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let o;return i&&"httpOptions"in i&&(o=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:t.name,config:i})}async getVideosOperationInternal(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=t1(this.apiClient,e);return d=Ve("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>ey(this.apiClient,y))}else{const p=e1(this.apiClient,e);return d=Ve("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>a1(this.apiClient,y))}}async fetchPredictVideosOperationInternal(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI()){const d=n1(this.apiClient,e);return o=Ve("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>ey(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d1(r,e){const t={},i=f(e,["voiceName"]);return i!=null&&h(t,["voiceName"],i),t}function tv(r,e){const t={},i=f(e,["prebuiltVoiceConfig"]);return i!=null&&h(t,["prebuiltVoiceConfig"],d1(r,i)),t}function f1(r,e){const t={},i=f(e,["speaker"]);i!=null&&h(t,["speaker"],i);const a=f(e,["voiceConfig"]);return a!=null&&h(t,["voiceConfig"],tv(r,a)),t}function h1(r,e){const t={},i=f(e,["speakerVoiceConfigs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>f1(r,o))),h(t,["speakerVoiceConfigs"],a)}return t}function p1(r,e){const t={},i=f(e,["voiceConfig"]);i!=null&&h(t,["voiceConfig"],tv(r,i));const a=f(e,["multiSpeakerVoiceConfig"]);a!=null&&h(t,["multiSpeakerVoiceConfig"],h1(r,a));const o=f(e,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function m1(r,e){const t={},i=f(e,["fps"]);i!=null&&h(t,["fps"],i);const a=f(e,["endOffset"]);a!=null&&h(t,["endOffset"],a);const o=f(e,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function g1(r,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["data"]);i!=null&&h(t,["data"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function y1(r,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["fileUri"]);i!=null&&h(t,["fileUri"],i);const a=f(e,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function v1(r,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],m1(r,i));const a=f(e,["thought"]);a!=null&&h(t,["thought"],a);const o=f(e,["inlineData"]);o!=null&&h(t,["inlineData"],g1(r,o));const u=f(e,["fileData"]);u!=null&&h(t,["fileData"],y1(r,u));const d=f(e,["thoughtSignature"]);d!=null&&h(t,["thoughtSignature"],d);const m=f(e,["codeExecutionResult"]);m!=null&&h(t,["codeExecutionResult"],m);const p=f(e,["executableCode"]);p!=null&&h(t,["executableCode"],p);const y=f(e,["functionCall"]);y!=null&&h(t,["functionCall"],y);const _=f(e,["functionResponse"]);_!=null&&h(t,["functionResponse"],_);const x=f(e,["text"]);return x!=null&&h(t,["text"],x),t}function _1(r,e){const t={},i=f(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>v1(r,u))),h(t,["parts"],o)}const a=f(e,["role"]);return a!=null&&h(t,["role"],a),t}function b1(r,e){const t={},i=f(e,["behavior"]);i!=null&&h(t,["behavior"],i);const a=f(e,["description"]);a!=null&&h(t,["description"],a);const o=f(e,["name"]);o!=null&&h(t,["name"],o);const u=f(e,["parameters"]);u!=null&&h(t,["parameters"],u);const d=f(e,["response"]);return d!=null&&h(t,["response"],d),t}function x1(r,e){const t={},i=f(e,["startTime"]);i!=null&&h(t,["startTime"],i);const a=f(e,["endTime"]);return a!=null&&h(t,["endTime"],a),t}function w1(r,e){const t={},i=f(e,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],x1(r,i)),t}function T1(r,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const a=f(e,["dynamicThreshold"]);return a!=null&&h(t,["dynamicThreshold"],a),t}function S1(r,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],T1(r,i)),t}function C1(){return{}}function E1(r,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>b1(r,p))),h(t,["functionDeclarations"],m)}if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(e,["googleSearch"]);a!=null&&h(t,["googleSearch"],w1(r,a));const o=f(e,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],S1(r,o)),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(e,["urlContext"])!=null&&h(t,["urlContext"],C1());const d=f(e,["codeExecution"]);return d!=null&&h(t,["codeExecution"],d),t}function A1(r,e){const t={},i=f(e,["handle"]);if(i!=null&&h(t,["handle"],i),f(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ty(){return{}}function k1(r,e){const t={},i=f(e,["disabled"]);i!=null&&h(t,["disabled"],i);const a=f(e,["startOfSpeechSensitivity"]);a!=null&&h(t,["startOfSpeechSensitivity"],a);const o=f(e,["endOfSpeechSensitivity"]);o!=null&&h(t,["endOfSpeechSensitivity"],o);const u=f(e,["prefixPaddingMs"]);u!=null&&h(t,["prefixPaddingMs"],u);const d=f(e,["silenceDurationMs"]);return d!=null&&h(t,["silenceDurationMs"],d),t}function R1(r,e){const t={},i=f(e,["automaticActivityDetection"]);i!=null&&h(t,["automaticActivityDetection"],k1(r,i));const a=f(e,["activityHandling"]);a!=null&&h(t,["activityHandling"],a);const o=f(e,["turnCoverage"]);return o!=null&&h(t,["turnCoverage"],o),t}function N1(r,e){const t={},i=f(e,["targetTokens"]);return i!=null&&h(t,["targetTokens"],i),t}function M1(r,e){const t={},i=f(e,["triggerTokens"]);i!=null&&h(t,["triggerTokens"],i);const a=f(e,["slidingWindow"]);return a!=null&&h(t,["slidingWindow"],N1(r,a)),t}function D1(r,e){const t={},i=f(e,["proactiveAudio"]);return i!=null&&h(t,["proactiveAudio"],i),t}function I1(r,e,t){const i={},a=f(e,["generationConfig"]);t!==void 0&&a!=null&&h(t,["setup","generationConfig"],a);const o=f(e,["responseModalities"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig","responseModalities"],o);const u=f(e,["temperature"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","temperature"],u);const d=f(e,["topP"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","topP"],d);const m=f(e,["topK"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","topK"],m);const p=f(e,["maxOutputTokens"]);t!==void 0&&p!=null&&h(t,["setup","generationConfig","maxOutputTokens"],p);const y=f(e,["mediaResolution"]);t!==void 0&&y!=null&&h(t,["setup","generationConfig","mediaResolution"],y);const _=f(e,["seed"]);t!==void 0&&_!=null&&h(t,["setup","generationConfig","seed"],_);const x=f(e,["speechConfig"]);t!==void 0&&x!=null&&h(t,["setup","generationConfig","speechConfig"],p1(r,Dd(r,x)));const b=f(e,["enableAffectiveDialog"]);t!==void 0&&b!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],b);const w=f(e,["systemInstruction"]);t!==void 0&&w!=null&&h(t,["setup","systemInstruction"],_1(r,tn(r,w)));const T=f(e,["tools"]);if(t!==void 0&&T!=null){let G=Ka(r,T);Array.isArray(G)&&(G=G.map(j=>E1(r,Ya(r,j)))),h(t,["setup","tools"],G)}const A=f(e,["sessionResumption"]);t!==void 0&&A!=null&&h(t,["setup","sessionResumption"],A1(r,A));const k=f(e,["inputAudioTranscription"]);t!==void 0&&k!=null&&h(t,["setup","inputAudioTranscription"],ty());const N=f(e,["outputAudioTranscription"]);t!==void 0&&N!=null&&h(t,["setup","outputAudioTranscription"],ty());const D=f(e,["realtimeInputConfig"]);t!==void 0&&D!=null&&h(t,["setup","realtimeInputConfig"],R1(r,D));const I=f(e,["contextWindowCompression"]);t!==void 0&&I!=null&&h(t,["setup","contextWindowCompression"],M1(r,I));const O=f(e,["proactivity"]);return t!==void 0&&O!=null&&h(t,["setup","proactivity"],D1(r,O)),i}function O1(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],gt(r,i));const a=f(e,["config"]);return a!=null&&h(t,["config"],I1(r,a,t)),t}function U1(r,e,t){const i={},a=f(e,["expireTime"]);t!==void 0&&a!=null&&h(t,["expireTime"],a);const o=f(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&h(t,["newSessionExpireTime"],o);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],O1(r,d));const m=f(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&h(t,["fieldMask"],m),i}function L1(r,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],U1(r,i,t)),t}function P1(r,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["name"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z1(r){const e=[];for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){const i=r[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const a=Object.keys(i).map(o=>`${t}.${o}`);e.push(...a)}else e.push(t)}return e.join(",")}function B1(r,e){let t=null;const i=r.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(r.bidiGenerateContentSetup=o,t=o):delete r.bidiGenerateContentSetup}else i!==void 0&&delete r.bidiGenerateContentSetup;const a=r.fieldMask;if(t){const o=z1(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?r.fieldMask=o:delete r.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];a.length>0&&(d=a.map(p=>u.includes(p)?`generationConfig.${p}`:p));const m=[];o&&m.push(o),d.length>0&&m.push(...d),m.length>0?r.fieldMask=m.join(","):delete r.fieldMask}else delete r.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?r.fieldMask=a.join(","):delete r.fieldMask;return r}class V1 extends ks{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=L1(this.apiClient,e);o=Ve("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const m=B1(d,e.config);return a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>P1(this.apiClient,p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q1(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],i);const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function G1(r,e,t){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const u=f(e,["filter"]);return t!==void 0&&u!=null&&h(t,["_query","filter"],u),i}function F1(r,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],G1(r,i,t)),t}function H1(r,e){const t={},i=f(e,["textInput"]);i!=null&&h(t,["textInput"],i);const a=f(e,["output"]);return a!=null&&h(t,["output"],a),t}function j1(r,e){const t={};if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(e,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>H1(r,o))),h(t,["examples","examples"],a)}return t}function $1(r,e,t){const i={};if(f(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=f(e,["tunedModelDisplayName"]);if(t!==void 0&&a!=null&&h(t,["displayName"],a),f(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(e,["epochCount"]);t!==void 0&&o!=null&&h(t,["tuningTask","hyperparameters","epochCount"],o);const u=f(e,["learningRateMultiplier"]);if(u!=null&&h(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(e,["batchSize"]);t!==void 0&&d!=null&&h(t,["tuningTask","hyperparameters","batchSize"],d);const m=f(e,["learningRate"]);return t!==void 0&&m!=null&&h(t,["tuningTask","hyperparameters","learningRate"],m),i}function Y1(r,e){const t={},i=f(e,["baseModel"]);i!=null&&h(t,["baseModel"],i);const a=f(e,["trainingDataset"]);a!=null&&h(t,["tuningTask","trainingData"],j1(r,a));const o=f(e,["config"]);return o!=null&&h(t,["config"],$1(r,o,t)),t}function K1(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],i);const a=f(e,["config"]);return a!=null&&h(t,["config"],a),t}function Z1(r,e,t){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const u=f(e,["filter"]);return t!==void 0&&u!=null&&h(t,["_query","filter"],u),i}function J1(r,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],Z1(r,i,t)),t}function W1(r,e,t){const i={},a=f(e,["gcsUri"]);if(t!==void 0&&a!=null&&h(t,["supervisedTuningSpec","trainingDatasetUri"],a),f(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function X1(r,e){const t={},i=f(e,["gcsUri"]);return i!=null&&h(t,["validationDatasetUri"],i),t}function Q1(r,e,t){const i={},a=f(e,["validationDataset"]);t!==void 0&&a!=null&&h(t,["supervisedTuningSpec"],X1(r,a));const o=f(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&h(t,["tunedModelDisplayName"],o);const u=f(e,["description"]);t!==void 0&&u!=null&&h(t,["description"],u);const d=f(e,["epochCount"]);t!==void 0&&d!=null&&h(t,["supervisedTuningSpec","hyperParameters","epochCount"],d);const m=f(e,["learningRateMultiplier"]);t!==void 0&&m!=null&&h(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m);const p=f(e,["exportLastCheckpointOnly"]);t!==void 0&&p!=null&&h(t,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const y=f(e,["adapterSize"]);if(t!==void 0&&y!=null&&h(t,["supervisedTuningSpec","hyperParameters","adapterSize"],y),f(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function eA(r,e){const t={},i=f(e,["baseModel"]);i!=null&&h(t,["baseModel"],i);const a=f(e,["trainingDataset"]);a!=null&&h(t,["supervisedTuningSpec","trainingDatasetUri"],W1(r,a,t));const o=f(e,["config"]);return o!=null&&h(t,["config"],Q1(r,o,t)),t}function tA(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["model"],i);const a=f(e,["name"]);return a!=null&&h(t,["endpoint"],a),t}function nv(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["state"]);a!=null&&h(t,["state"],zy(r,a));const o=f(e,["createTime"]);o!=null&&h(t,["createTime"],o);const u=f(e,["tuningTask","startTime"]);u!=null&&h(t,["startTime"],u);const d=f(e,["tuningTask","completeTime"]);d!=null&&h(t,["endTime"],d);const m=f(e,["updateTime"]);m!=null&&h(t,["updateTime"],m);const p=f(e,["description"]);p!=null&&h(t,["description"],p);const y=f(e,["baseModel"]);y!=null&&h(t,["baseModel"],y);const _=f(e,["_self"]);_!=null&&h(t,["tunedModel"],tA(r,_));const x=f(e,["distillationSpec"]);x!=null&&h(t,["distillationSpec"],x);const b=f(e,["experiment"]);b!=null&&h(t,["experiment"],b);const w=f(e,["labels"]);w!=null&&h(t,["labels"],w);const T=f(e,["pipelineJob"]);T!=null&&h(t,["pipelineJob"],T);const A=f(e,["serviceAccount"]);A!=null&&h(t,["serviceAccount"],A);const k=f(e,["tunedModelDisplayName"]);return k!=null&&h(t,["tunedModelDisplayName"],k),t}function nA(r,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=f(e,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>nv(r,u))),h(t,["tuningJobs"],o)}return t}function iA(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["metadata"]);a!=null&&h(t,["metadata"],a);const o=f(e,["done"]);o!=null&&h(t,["done"],o);const u=f(e,["error"]);return u!=null&&h(t,["error"],u),t}function rA(r,e){const t={},i=f(e,["checkpointId"]);i!=null&&h(t,["checkpointId"],i);const a=f(e,["epoch"]);a!=null&&h(t,["epoch"],a);const o=f(e,["step"]);o!=null&&h(t,["step"],o);const u=f(e,["endpoint"]);return u!=null&&h(t,["endpoint"],u),t}function sA(r,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],i);const a=f(e,["endpoint"]);a!=null&&h(t,["endpoint"],a);const o=f(e,["checkpoints"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>rA(r,d))),h(t,["checkpoints"],u)}return t}function vd(r,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const a=f(e,["state"]);a!=null&&h(t,["state"],zy(r,a));const o=f(e,["createTime"]);o!=null&&h(t,["createTime"],o);const u=f(e,["startTime"]);u!=null&&h(t,["startTime"],u);const d=f(e,["endTime"]);d!=null&&h(t,["endTime"],d);const m=f(e,["updateTime"]);m!=null&&h(t,["updateTime"],m);const p=f(e,["error"]);p!=null&&h(t,["error"],p);const y=f(e,["description"]);y!=null&&h(t,["description"],y);const _=f(e,["baseModel"]);_!=null&&h(t,["baseModel"],_);const x=f(e,["tunedModel"]);x!=null&&h(t,["tunedModel"],sA(r,x));const b=f(e,["supervisedTuningSpec"]);b!=null&&h(t,["supervisedTuningSpec"],b);const w=f(e,["tuningDataStats"]);w!=null&&h(t,["tuningDataStats"],w);const T=f(e,["encryptionSpec"]);T!=null&&h(t,["encryptionSpec"],T);const A=f(e,["partnerModelTuningSpec"]);A!=null&&h(t,["partnerModelTuningSpec"],A);const k=f(e,["distillationSpec"]);k!=null&&h(t,["distillationSpec"],k);const N=f(e,["experiment"]);N!=null&&h(t,["experiment"],N);const D=f(e,["labels"]);D!=null&&h(t,["labels"],D);const I=f(e,["pipelineJob"]);I!=null&&h(t,["pipelineJob"],I);const O=f(e,["serviceAccount"]);O!=null&&h(t,["serviceAccount"],O);const G=f(e,["tunedModelDisplayName"]);return G!=null&&h(t,["tunedModelDisplayName"],G),t}function aA(r,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const a=f(e,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>vd(r,u))),h(t,["tuningJobs"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oA extends ks{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Nl(As.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const i=await this.tuneMldevInternal(t);let a="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?a=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(a=i.name.split("/operations/")[0]),{name:a,state:ud.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=K1(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>vd(this.apiClient,y))}else{const p=q1(this.apiClient,e);return d=Ve("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>nv(this.apiClient,y))}}async listInternal(e){var t,i,a,o;let u,d="",m={};if(this.apiClient.isVertexAI()){const p=J1(this.apiClient,e);return d=Ve("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const _=aA(this.apiClient,y),x=new Ng;return Object.assign(x,_),x})}else{const p=F1(this.apiClient,e);return d=Ve("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>{const _=nA(this.apiClient,y),x=new Ng;return Object.assign(x,_),x})}}async tuneInternal(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI()){const d=eA(this.apiClient,e);return o=Ve("tuningJobs",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>vd(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let a,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Y1(this.apiClient,e);return o=Ve("tunedModels",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>iA(this.apiClient,m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lA{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uA=1024*1024*8,cA=3,dA=1e3,fA=2,Yc="x-goog-upload-status";async function hA(r,e,t){var i,a,o;let u=0,d=0,m=new cd(new Response),p="upload";for(u=r.size;d<u;){const _=Math.min(uA,u-d),x=r.slice(d,d+_);d+_>=u&&(p+=", finalize");let b=0,w=dA;for(;b<cA&&(m=await t.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(d),"Content-Length":String(_)}}}),!(!((i=m==null?void 0:m.headers)===null||i===void 0)&&i[Yc]));)b++,await mA(w),w=w*fA;if(d+=_,((a=m==null?void 0:m.headers)===null||a===void 0?void 0:a[Yc])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(m==null?void 0:m.json());if(((o=m==null?void 0:m.headers)===null||o===void 0?void 0:o[Yc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function pA(r){return{size:r.size,type:r.type}}function mA(r){return new Promise(e=>setTimeout(e,r))}class gA{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hA(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pA(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yA{create(e,t,i){return new vA(e,t,i)}}class vA{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ny="x-goog-api-key";class _A{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ny)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ny,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bA="gl-node/";class iv{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=Eb(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const a=new _A(this.apiKey);this.apiClient=new LE({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:bA+"web",uploader:new gA,downloader:new lA}),this.models=new QE(this.apiClient),this.live=new KE(this.apiClient,a,new yA),this.chats=new Xx(this.models,this.apiClient),this.caches=new Zx(this.apiClient),this.files=new dw(this.apiClient),this.operations=new c1(this.apiClient),this.authTokens=new V1(this.apiClient),this.tunings=new oA(this.apiClient)}}function xA(r){const e=window.atob(r),t=e.length,i=new Uint8Array(t);for(let a=0;a<t;a++)i[a]=e.charCodeAt(a);return i}async function wA(r,e,t=24e3,i=1){const a=new Int16Array(r.buffer,r.byteOffset,r.byteLength/2),o=a.length/i,u=e.createBuffer(i,o,t);for(let d=0;d<i;d++){const m=u.getChannelData(d);for(let p=0;p<o;p++)m[p]=a[p*i+d]/32768}return u}function Pd(r,e){if(r.length===0)return e.createBuffer(1,1,24e3);if(r.length===1)return r[0];const t=r.reduce((a,o)=>a+o.length,0),i=e.createBuffer(r[0].numberOfChannels,t,r[0].sampleRate);for(let a=0;a<i.numberOfChannels;a++){let o=0;const u=i.getChannelData(a);for(const d of r)u.set(d.getChannelData(a),o),o+=d.length}return i}function zd(r){const e=r.numberOfChannels,t=r.sampleRate,i=3,a=32,o=e*a/8,u=t*o,d=r.length*o,p=44+d,y=new ArrayBuffer(p),_=new DataView(y),x=(w,T)=>{for(let A=0;A<T.length;A++)_.setUint8(w+A,T.charCodeAt(A))};x(0,"RIFF"),_.setUint32(4,p-8,!0),x(8,"WAVE"),x(12,"fmt "),_.setUint32(16,16,!0),_.setUint16(20,i,!0),_.setUint16(22,e,!0),_.setUint32(24,t,!0),_.setUint32(28,u,!0),_.setUint16(32,o,!0),_.setUint16(34,a,!0),x(36,"data"),_.setUint32(40,d,!0);const b=r.getChannelData(0);for(let w=0;w<b.length;w++)_.setFloat32(44+w*4,b[w],!0);return new Blob([y],{type:"audio/wav"})}class TA{constructor(){this.MAX_CHARS_PER_CHUNK=1500}getAIInstance(){return new iv({apiKey:"PLACEHOLDER_API_KEY"})}splitText(e){const t=[];let i=0;for(;i<e.length;){let a=i+this.MAX_CHARS_PER_CHUNK;if(a<e.length){const u=e.lastIndexOf(".",a),d=e.lastIndexOf(`
`,a),m=Math.max(u,d);m>i&&(a=m+1)}const o=e.substring(i,a).trim();o&&t.push(o),i=a}return t}async generateNarration(e,t,i,a){const o=this.splitText(e),u=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),d=[],m=this.getAIInstance();for(let _=0;_<o.length;_++){a&&a(_+1,o.length);const x=o[_];let b="Fenrir",w="";switch(t){case"Sofia":b="Zephyr",w="Voz FEMENINA suave, clida, emptica y maternal. Tono reconfortante, ideal para cuentos o romance. Volumen suave pero CLARO.";break;case"Valentina":b="Kore",w="Voz FEMENINA profesional, objetiva, periodstica y directa. Diccin perfecta, tono serio y confiable. Estilo informativo.";break;case"Camila":b="Aoede",w="Voz FEMENINA vibrante, dramtica y llena de vida. Actuacin teatral intensa, mucha variabilidad emocional pero siempre con volumen firme.";break;case"Mateo":b="Puck",w="Voz MASCULINA juvenil, rpida, dinmica y entusiasta. Tono fresco, moderno, estilo youtuber o amigo cercano.";break;case"Diego":b="Fenrir",w="Voz MASCULINA estndar de narrador de libros. Equilibrada, firme, masculina y confiable. Tono medio, perfecto para literatura general.";break;case"Alejandro":b="Charon",w="Voz MASCULINA muy grave, profunda y resonante. Voz de bajo, con mucho cuerpo y presencia. Impactante.";break;case"Leonardo":b="Fenrir",w="Voz MASCULINA pica, heroica y motivacional. Proyecta mucha seguridad, fuerza y liderazgo. Estilo cinematogrfico de accin.";break;case"Ricardo":b="Charon",w="Voz MASCULINA de hombre anciano (65+ aos), sabio, pausado y reflexivo. Voz con textura de edad, solemne y acadmica. NO TIEMBLA, solo suena mayor.";break;case"Gabriel":b="Fenrir",w="Voz MASCULINA intrigante, 'Noir' y de suspenso. Levemente rasposa (whiskey voice) pero POTENTE. Estilo de detective privado. NO susurres, solo baja el tono.";break;default:b="Fenrir",w="Voz profesional y clara. Volumen constante.";break}const T=`Rol: Eres el MEJOR narrador de audiolibros del mundo.
Objetivo: Narrar el texto con CALIDAD DE ESTUDIO, sin errores y sin efectos extraos.

TU PERFIL DE VOZ:
${w}

Emocin Requerida: ${i.toUpperCase()}.

REGLAS ABSOLUTAS (PROHIBIDO ROMPERLAS):
1. PROHIBIDO SUSURRAR: Bajo ninguna circunstancia susurres, a menos que el texto diga explcitamente "susurr". El usuario ODIA los susurros. Mantn la voz PLENA y SONORA.
2. VOLUMEN CONSTANTE: No bajes el volumen al final de las frases. Mantn la misma potencia de voz desde la primera hasta la ltima palabra del fragmento.
3. ANTI-LATA: Usa tu registro ms rico y resonante. Evita sonar metlico o telefnico. Queremos "High Fidelity".
4. NATURALIDAD: Habla como un ser humano real, conecta las frases con fluidez.

Texto a narrar:
${x}`,A=async(I=0)=>{var O,G,j,ee,B,Z;try{const q=(Z=(B=(ee=(j=(G=(O=(await m.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:T}]}],config:{responseModalities:[za.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:b}}}}})).candidates)==null?void 0:O[0])==null?void 0:G.content)==null?void 0:j.parts)==null?void 0:ee[0])==null?void 0:B.inlineData)==null?void 0:Z.data;if(!q)throw new Error("Audio no disponible.");return q}catch(ve){if((ve.message.includes("429")||ve.message.includes("limit"))&&I<3)return await new Promise(q=>setTimeout(q,4e3*(I+1))),A(I+1);throw ve}},k=await A(),N=xA(k),D=await wA(N,u,24e3,1);d.push(D),_<o.length-1&&await new Promise(I=>setTimeout(I,600))}const p=Pd(d,u),y=zd(p);return URL.createObjectURL(y)}async generateImage(e,t="1:1"){var a,o,u,d;const i=this.getAIInstance();try{console.log(`Generando imagen con modelo gemini-2.5-flash-image (va generateContent). Ratio: ${t}`);const y=`[Image Format: ${{"1:1":"Square 1:1 format","16:9":"Wide 16:9 landscape format","9:16":"Tall 9:16 portrait format","3:4":"Vertical 3:4 portrait format","4:3":"Landscape 4:3 format"}[t]||"Square 1:1 format"}]. ${e} --ar ${t.replace(":",":")}`,_={temperature:.4};t!=="1:1"&&(_.aspectRatio=t);const b=(d=(u=(o=(a=(await i.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:y}]},config:_})).candidates)==null?void 0:a[0])==null?void 0:o.content)==null?void 0:u.parts)==null?void 0:d.find(w=>w.inlineData);if(b!=null&&b.inlineData)return`data:${b.inlineData.mimeType};base64,${b.inlineData.data}`;throw new Error("La IA no devolvi datos de imagen vlidos.")}catch(m){if(console.error("Error generando imagen:",m),m.message.includes("400")||m.message.includes("Invalid argument"))return console.warn("Fallo con config de aspect ratio, reintentando solo con prompt..."),this.retryGenerateImagePromptOnly(e,t);throw new Error(`Fallo en generacin de imagen: ${m.message}`)}}async retryGenerateImagePromptOnly(e,t){var d,m,p,y;const i=this.getAIInstance(),a=`Create a ${t} image. ${e}`,u=(y=(p=(m=(d=(await i.models.generateContent({model:"gemini-2.5-flash-image",contents:[{parts:[{text:a}]}]})).candidates)==null?void 0:d[0])==null?void 0:m.content)==null?void 0:p.parts)==null?void 0:y.find(_=>_.inlineData);if(u!=null&&u.inlineData)return`data:${u.inlineData.mimeType};base64,${u.inlineData.data}`;throw new Error("Fallo en reintento de imagen.")}async generateImagePrompt(e,t){var o,u,d,m,p;const i=this.getAIInstance(),a=`
      Rol: Eres un director de arte experto en ilustracin de libros.
      Tarea: Crear un PROMPT DE IMAGEN en INGLS detallado y artstico para acompaar un fragmento de audiolibro.
      
      Contexto del Libro: ${t}
      
      Fragmento Actual: "${e.substring(0,500)}..."
      
      Instrucciones:
      1. Analiza el fragmento y su emocin.
      2. Disea una escena visual que represente este momento, manteniendo coherencia con el estilo del libro.
      3. El output debe ser SOLO el prompt en ingls. Sin explicaciones.
      4. Estilo visual sugerido: Cinematic, detailed, concept art, 8k resolution.
      `;try{return((p=(m=(d=(u=(o=(await i.models.generateContent({model:"gemini-2.0-flash",contents:[{parts:[{text:a}]}]})).candidates)==null?void 0:o[0])==null?void 0:u.content)==null?void 0:d.parts)==null?void 0:m[0])==null?void 0:p.text)||"A cinematic scene representing an audiobook narration."}catch(y){return console.error("Error generando prompt de imagen:",y),"A cinematic scene representing an audiobook narration."}}async analyzeAudioForVideo(e){var m,p,y,_,x;const t=this.getAIInstance(),i=await this.blobToBase64(e);let a=e.type;if((!a||a==="")&&"name"in e&&typeof e.name=="string"){const b=e.name.toLowerCase();b.endsWith(".wav")?a="audio/wav":b.endsWith(".mp3")?a="audio/mp3":b.endsWith(".ogg")?a="audio/ogg":b.endsWith(".acc")?a="audio/aac":b.endsWith(".flac")&&(a="audio/flac")}a||(a="audio/mp3"),console.log(`Analizando audio con modelo gemini-1.5-flash. MIME detectado: ${a}`);const o=`Analiza este audio detalladamente.
    Tu tarea es generar 3 PROMPTS DE IMAGEN (en ingls) que representen visualmente la narrativa o el ambiente de este audio.
    Estas imgenes se usarn para crear un video para redes sociales.
    
    Reglas:
    1. Devuelve SOLO un array JSON de strings. Ejemplo: ["A dark forest with fog", "A knight standing in the rain", "A castle in the distance"]
    2. Los prompts deben ser visualmente ricos, detallados y artsticos.
    3. NO incluyas texto extra, solo el JSON.`,u=["gemini-2.0-flash","gemini-2.0-flash-exp","gemini-1.5-flash","gemini-1.5-flash-002","gemini-1.5-pro"];let d=null;for(const b of u)try{console.log(`Intentando analizar audio con modelo: ${b} (${a})`);const A=(((x=(_=(y=(p=(m=(await t.models.generateContent({model:b,contents:[{role:"user",parts:[{text:o},{inlineData:{data:i,mimeType:a}}]}]})).candidates)==null?void 0:m[0])==null?void 0:p.content)==null?void 0:y.parts)==null?void 0:_[0])==null?void 0:x.text)||"").replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(A)}catch(w){if(console.warn(`Fallo con modelo ${b}:`,w.message),d=w,w instanceof SyntaxError)throw new Error("La IA respondi pero no gener un JSON vlido.");continue}throw console.error("Todos los modelos fallaron en Audio Analysis:",d),new Error(`Fallo en IA (Todos los intentos): ${(d==null?void 0:d.message)||"Error desconocido"}`)}blobToBase64(e){return new Promise((t,i)=>{const a=new FileReader;a.onloadend=()=>{const o=a.result.split(",")[1];t(o)},a.onerror=i,a.readAsDataURL(e)})}}const rv=new TA;function ol(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kc={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var iy;function SA(){return iy||(iy=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(i,a,o){function u(p,y){if(!a[p]){if(!i[p]){var _=typeof ol=="function"&&ol;if(!y&&_)return _(p,!0);if(d)return d(p,!0);var x=new Error("Cannot find module '"+p+"'");throw x.code="MODULE_NOT_FOUND",x}var b=a[p]={exports:{}};i[p][0].call(b.exports,function(w){var T=i[p][1][w];return u(T||w)},b,b.exports,t,i,a,o)}return a[p].exports}for(var d=typeof ol=="function"&&ol,m=0;m<o.length;m++)u(o[m]);return u})({1:[function(t,i,a){var o=t("./utils"),u=t("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(m){for(var p,y,_,x,b,w,T,A=[],k=0,N=m.length,D=N,I=o.getTypeOf(m)!=="string";k<m.length;)D=N-k,_=I?(p=m[k++],y=k<N?m[k++]:0,k<N?m[k++]:0):(p=m.charCodeAt(k++),y=k<N?m.charCodeAt(k++):0,k<N?m.charCodeAt(k++):0),x=p>>2,b=(3&p)<<4|y>>4,w=1<D?(15&y)<<2|_>>6:64,T=2<D?63&_:64,A.push(d.charAt(x)+d.charAt(b)+d.charAt(w)+d.charAt(T));return A.join("")},a.decode=function(m){var p,y,_,x,b,w,T=0,A=0,k="data:";if(m.substr(0,k.length)===k)throw new Error("Invalid base64 input, it looks like a data url.");var N,D=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===d.charAt(64)&&D--,m.charAt(m.length-2)===d.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(N=u.uint8array?new Uint8Array(0|D):new Array(0|D);T<m.length;)p=d.indexOf(m.charAt(T++))<<2|(x=d.indexOf(m.charAt(T++)))>>4,y=(15&x)<<4|(b=d.indexOf(m.charAt(T++)))>>2,_=(3&b)<<6|(w=d.indexOf(m.charAt(T++))),N[A++]=p,b!==64&&(N[A++]=y),w!==64&&(N[A++]=_);return N}},{"./support":30,"./utils":32}],2:[function(t,i,a){var o=t("./external"),u=t("./stream/DataWorker"),d=t("./stream/Crc32Probe"),m=t("./stream/DataLengthProbe");function p(y,_,x,b,w){this.compressedSize=y,this.uncompressedSize=_,this.crc32=x,this.compression=b,this.compressedContent=w}p.prototype={getContentWorker:function(){var y=new u(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),_=this;return y.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new u(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(y,_,x){return y.pipe(new d).pipe(new m("uncompressedSize")).pipe(_.compressWorker(x)).pipe(new m("compressedSize")).withStreamInfo("compression",_)},i.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,a){var o=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,a){var o=t("./utils"),u=(function(){for(var d,m=[],p=0;p<256;p++){d=p;for(var y=0;y<8;y++)d=1&d?3988292384^d>>>1:d>>>1;m[p]=d}return m})();i.exports=function(d,m){return d!==void 0&&d.length?o.getTypeOf(d)!=="string"?(function(p,y,_,x){var b=u,w=x+_;p^=-1;for(var T=x;T<w;T++)p=p>>>8^b[255&(p^y[T])];return-1^p})(0|m,d,d.length,0):(function(p,y,_,x){var b=u,w=x+_;p^=-1;for(var T=x;T<w;T++)p=p>>>8^b[255&(p^y.charCodeAt(T))];return-1^p})(0|m,d,d.length,0):0}},{"./utils":32}],5:[function(t,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,i,a){var o=null;o=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:o}},{lie:37}],7:[function(t,i,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=t("pako"),d=t("./utils"),m=t("./stream/GenericWorker"),p=o?"uint8array":"array";function y(_,x){m.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=x,this.meta={}}a.magic="\b\0",d.inherits(y,m),y.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(p,_.data),!1)},y.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(x){_.push({data:x,meta:_.meta})}},a.compressWorker=function(_){return new y("Deflate",_)},a.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,a){function o(b,w){var T,A="";for(T=0;T<w;T++)A+=String.fromCharCode(255&b),b>>>=8;return A}function u(b,w,T,A,k,N){var D,I,O=b.file,G=b.compression,j=N!==p.utf8encode,ee=d.transformTo("string",N(O.name)),B=d.transformTo("string",p.utf8encode(O.name)),Z=O.comment,ve=d.transformTo("string",N(Z)),q=d.transformTo("string",p.utf8encode(Z)),Q=B.length!==O.name.length,R=q.length!==Z.length,re="",se="",te="",ye=O.dir,ue=O.date,L={crc32:0,compressedSize:0,uncompressedSize:0};w&&!T||(L.crc32=b.crc32,L.compressedSize=b.compressedSize,L.uncompressedSize=b.uncompressedSize);var V=0;w&&(V|=8),j||!Q&&!R||(V|=2048);var F=0,he=0;ye&&(F|=16),k==="UNIX"?(he=798,F|=(function(ce,Ae){var qe=ce;return ce||(qe=Ae?16893:33204),(65535&qe)<<16})(O.unixPermissions,ye)):(he=20,F|=(function(ce){return 63&(ce||0)})(O.dosPermissions)),D=ue.getUTCHours(),D<<=6,D|=ue.getUTCMinutes(),D<<=5,D|=ue.getUTCSeconds()/2,I=ue.getUTCFullYear()-1980,I<<=4,I|=ue.getUTCMonth()+1,I<<=5,I|=ue.getUTCDate(),Q&&(se=o(1,1)+o(y(ee),4)+B,re+="up"+o(se.length,2)+se),R&&(te=o(1,1)+o(y(ve),4)+q,re+="uc"+o(te.length,2)+te);var ie="";return ie+=`
\0`,ie+=o(V,2),ie+=G.magic,ie+=o(D,2),ie+=o(I,2),ie+=o(L.crc32,4),ie+=o(L.compressedSize,4),ie+=o(L.uncompressedSize,4),ie+=o(ee.length,2),ie+=o(re.length,2),{fileRecord:_.LOCAL_FILE_HEADER+ie+ee+re,dirRecord:_.CENTRAL_FILE_HEADER+o(he,2)+ie+o(ve.length,2)+"\0\0\0\0"+o(F,4)+o(A,4)+ee+re+ve}}var d=t("../utils"),m=t("../stream/GenericWorker"),p=t("../utf8"),y=t("../crc32"),_=t("../signature");function x(b,w,T,A){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=T,this.encodeFileName=A,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(x,m),x.prototype.push=function(b){var w=b.meta.percent||0,T=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,m.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:T?(w+100*(T-A-1))/T:100}}))},x.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var w=this.streamFiles&&!b.file.dir;if(w){var T=u(b,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:T.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(b){this.accumulate=!1;var w=this.streamFiles&&!b.file.dir,T=u(b,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(T.dirRecord),w)this.push({data:(function(A){return _.DATA_DESCRIPTOR+o(A.crc32,4)+o(A.compressedSize,4)+o(A.uncompressedSize,4)})(b),meta:{percent:100}});else for(this.push({data:T.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var b=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var T=this.bytesWritten-b,A=(function(k,N,D,I,O){var G=d.transformTo("string",O(I));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(k,2)+o(k,2)+o(N,4)+o(D,4)+o(G.length,2)+G})(this.dirRecords.length,T,b,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(b){this._sources.push(b);var w=this;return b.on("data",function(T){w.processChunk(T)}),b.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),b.on("error",function(T){w.error(T)}),this},x.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(b){var w=this._sources;if(!m.prototype.error.call(this,b))return!1;for(var T=0;T<w.length;T++)try{w[T].error(b)}catch{}return!0},x.prototype.lock=function(){m.prototype.lock.call(this);for(var b=this._sources,w=0;w<b.length;w++)b[w].lock()},i.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,a){var o=t("../compressions"),u=t("./ZipFileWorker");a.generateWorker=function(d,m,p){var y=new u(m.streamFiles,p,m.platform,m.encodeFileName),_=0;try{d.forEach(function(x,b){_++;var w=(function(N,D){var I=N||D,O=o[I];if(!O)throw new Error(I+" is not a valid compression method !");return O})(b.options.compression,m.compression),T=b.options.compressionOptions||m.compressionOptions||{},A=b.dir,k=b.date;b._compressWorker(w,T).withStreamInfo("file",{name:x,dir:A,date:k,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(y)}),y.entriesCount=_}catch(x){y.error(x)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,a){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new o;for(var d in this)typeof this[d]!="function"&&(u[d]=this[d]);return u}}(o.prototype=t("./object")).loadAsync=t("./load"),o.support=t("./support"),o.defaults=t("./defaults"),o.version="3.10.1",o.loadAsync=function(u,d){return new o().loadAsync(u,d)},o.external=t("./external"),i.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,a){var o=t("./utils"),u=t("./external"),d=t("./utf8"),m=t("./zipEntries"),p=t("./stream/Crc32Probe"),y=t("./nodejsUtils");function _(x){return new u.Promise(function(b,w){var T=x.decompressed.getContentWorker().pipe(new p);T.on("error",function(A){w(A)}).on("end",function(){T.streamInfo.crc32!==x.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}i.exports=function(x,b){var w=this;return b=o.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),y.isNode&&y.isStream(x)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",x,!0,b.optimizedBinaryString,b.base64).then(function(T){var A=new m(b);return A.load(T),A}).then(function(T){var A=[u.Promise.resolve(T)],k=T.files;if(b.checkCRC32)for(var N=0;N<k.length;N++)A.push(_(k[N]));return u.Promise.all(A)}).then(function(T){for(var A=T.shift(),k=A.files,N=0;N<k.length;N++){var D=k[N],I=D.fileNameStr,O=o.resolve(D.fileNameStr);w.file(O,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:b.createFolders}),D.dir||(w.file(O).unsafeOriginalName=I)}return A.zipComment.length&&(w.comment=A.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,a){var o=t("../utils"),u=t("../stream/GenericWorker");function d(m,p){u.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(p)}o.inherits(d,u),d.prototype._bindStream=function(m){var p=this;(this._stream=m).pause(),m.on("data",function(y){p.push({data:y,meta:{percent:0}})}).on("error",function(y){p.isPaused?this.generatedError=y:p.error(y)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},d.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,a){var o=t("readable-stream").Readable;function u(d,m,p){o.call(this,m),this._helper=d;var y=this;d.on("data",function(_,x){y.push(_)||y._helper.pause(),p&&p(x)}).on("error",function(_){y.emit("error",_)}).on("end",function(){y.push(null)})}t("../utils").inherits(u,o),u.prototype._read=function(){this._helper.resume()},i.exports=u},{"../utils":32,"readable-stream":16}],14:[function(t,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,u);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,u)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var u=new Buffer(o);return u.fill(0),u},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(t,i,a){function o(O,G,j){var ee,B=d.getTypeOf(G),Z=d.extend(j||{},y);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(O=k(O)),Z.createFolders&&(ee=A(O))&&N.call(this,ee,!0);var ve=B==="string"&&Z.binary===!1&&Z.base64===!1;j&&j.binary!==void 0||(Z.binary=!ve),(G instanceof _&&G.uncompressedSize===0||Z.dir||!G||G.length===0)&&(Z.base64=!1,Z.binary=!0,G="",Z.compression="STORE",B="string");var q=null;q=G instanceof _||G instanceof m?G:w.isNode&&w.isStream(G)?new T(O,G):d.prepareContent(O,G,Z.binary,Z.optimizedBinaryString,Z.base64);var Q=new x(O,q,Z);this.files[O]=Q}var u=t("./utf8"),d=t("./utils"),m=t("./stream/GenericWorker"),p=t("./stream/StreamHelper"),y=t("./defaults"),_=t("./compressedObject"),x=t("./zipObject"),b=t("./generate"),w=t("./nodejsUtils"),T=t("./nodejs/NodejsStreamInputAdapter"),A=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var G=O.lastIndexOf("/");return 0<G?O.substring(0,G):""},k=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},N=function(O,G){return G=G!==void 0?G:y.createFolders,O=k(O),this.files[O]||o.call(this,O,null,{dir:!0,createFolders:G}),this.files[O]};function D(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var G,j,ee;for(G in this.files)ee=this.files[G],(j=G.slice(this.root.length,G.length))&&G.slice(0,this.root.length)===this.root&&O(j,ee)},filter:function(O){var G=[];return this.forEach(function(j,ee){O(j,ee)&&G.push(ee)}),G},file:function(O,G,j){if(arguments.length!==1)return O=this.root+O,o.call(this,O,G,j),this;if(D(O)){var ee=O;return this.filter(function(Z,ve){return!ve.dir&&ee.test(Z)})}var B=this.files[this.root+O];return B&&!B.dir?B:null},folder:function(O){if(!O)return this;if(D(O))return this.filter(function(B,Z){return Z.dir&&O.test(B)});var G=this.root+O,j=N.call(this,G),ee=this.clone();return ee.root=j.name,ee},remove:function(O){O=this.root+O;var G=this.files[O];if(G||(O.slice(-1)!=="/"&&(O+="/"),G=this.files[O]),G&&!G.dir)delete this.files[O];else for(var j=this.filter(function(B,Z){return Z.name.slice(0,O.length)===O}),ee=0;ee<j.length;ee++)delete this.files[j[ee].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var G,j={};try{if((j=d.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");d.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var ee=j.comment||this.comment||"";G=b.generateWorker(this,j,ee)}catch(B){(G=new m("error")).error(B)}return new p(G,j.type||"string",j.mimeType)},generateAsync:function(O,G){return this.generateInternalStream(O).accumulate(G)},generateNodeStream:function(O,G){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(G)}};i.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,a){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,a){var o=t("./DataReader");function u(d){o.call(this,d);for(var m=0;m<this.data.length;m++)d[m]=255&d[m]}t("../utils").inherits(u,o),u.prototype.byteAt=function(d){return this.data[this.zero+d]},u.prototype.lastIndexOfSignature=function(d){for(var m=d.charCodeAt(0),p=d.charCodeAt(1),y=d.charCodeAt(2),_=d.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===m&&this.data[x+1]===p&&this.data[x+2]===y&&this.data[x+3]===_)return x-this.zero;return-1},u.prototype.readAndCheckSignature=function(d){var m=d.charCodeAt(0),p=d.charCodeAt(1),y=d.charCodeAt(2),_=d.charCodeAt(3),x=this.readData(4);return m===x[0]&&p===x[1]&&y===x[2]&&_===x[3]},u.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},i.exports=u},{"../utils":32,"./DataReader":18}],18:[function(t,i,a){var o=t("../utils");function u(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var m,p=0;for(this.checkOffset(d),m=this.index+d-1;m>=this.index;m--)p=(p<<8)+this.byteAt(m);return this.index+=d,p},readString:function(d){return o.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},i.exports=u},{"../utils":32}],19:[function(t,i,a){var o=t("./Uint8ArrayReader");function u(d){o.call(this,d)}t("../utils").inherits(u,o),u.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},i.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,a){var o=t("./DataReader");function u(d){o.call(this,d)}t("../utils").inherits(u,o),u.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},u.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},u.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},u.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},i.exports=u},{"../utils":32,"./DataReader":18}],21:[function(t,i,a){var o=t("./ArrayReader");function u(d){o.call(this,d)}t("../utils").inherits(u,o),u.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},i.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,a){var o=t("../utils"),u=t("../support"),d=t("./ArrayReader"),m=t("./StringReader"),p=t("./NodeBufferReader"),y=t("./Uint8ArrayReader");i.exports=function(_){var x=o.getTypeOf(_);return o.checkSupport(x),x!=="string"||u.uint8array?x==="nodebuffer"?new p(_):u.uint8array?new y(o.transformTo("uint8array",_)):new d(o.transformTo("array",_)):new m(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,a){var o=t("./GenericWorker"),u=t("../utils");function d(m){o.call(this,"ConvertWorker to "+m),this.destType=m}u.inherits(d,o),d.prototype.processChunk=function(m){this.push({data:u.transformTo(this.destType,m.data),meta:m.meta})},i.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,a){var o=t("./GenericWorker"),u=t("../crc32");function d(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(d,o),d.prototype.processChunk=function(m){this.streamInfo.crc32=u(m.data,this.streamInfo.crc32||0),this.push(m)},i.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,a){var o=t("../utils"),u=t("./GenericWorker");function d(m){u.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}o.inherits(d,u),d.prototype.processChunk=function(m){if(m){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+m.data.length}u.prototype.processChunk.call(this,m)},i.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,a){var o=t("../utils"),u=t("./GenericWorker");function d(m){u.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(y){p.dataIsReady=!0,p.data=y,p.max=y&&y.length||0,p.type=o.getTypeOf(y),p.isPaused||p._tickAndRepeat()},function(y){p.error(y)})}o.inherits(d,u),d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,p);break;case"uint8array":m=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":m=this.data.slice(this.index,p)}return this.index=p,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,a){function o(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,d){return this._listeners[u].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,d){if(this._listeners[u])for(var m=0;m<this._listeners[u].length;m++)this._listeners[u][m].call(this,d)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var d=this;return u.on("data",function(m){d.processChunk(m)}),u.on("end",function(){d.end()}),u.on("error",function(m){d.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,d){return this.extraStreamInfo[u]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},i.exports=o},{}],29:[function(t,i,a){var o=t("../utils"),u=t("./ConvertWorker"),d=t("./GenericWorker"),m=t("../base64"),p=t("../support"),y=t("../external"),_=null;if(p.nodestream)try{_=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(w,T){return new y.Promise(function(A,k){var N=[],D=w._internalType,I=w._outputType,O=w._mimeType;w.on("data",function(G,j){N.push(G),T&&T(j)}).on("error",function(G){N=[],k(G)}).on("end",function(){try{var G=(function(j,ee,B){switch(j){case"blob":return o.newBlob(o.transformTo("arraybuffer",ee),B);case"base64":return m.encode(ee);default:return o.transformTo(j,ee)}})(I,(function(j,ee){var B,Z=0,ve=null,q=0;for(B=0;B<ee.length;B++)q+=ee[B].length;switch(j){case"string":return ee.join("");case"array":return Array.prototype.concat.apply([],ee);case"uint8array":for(ve=new Uint8Array(q),B=0;B<ee.length;B++)ve.set(ee[B],Z),Z+=ee[B].length;return ve;case"nodebuffer":return Buffer.concat(ee);default:throw new Error("concat : unsupported type '"+j+"'")}})(D,N),O);A(G)}catch(j){k(j)}N=[]}).resume()})}function b(w,T,A){var k=T;switch(T){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=T,this._mimeType=A,o.checkSupport(k),this._worker=w.pipe(new u(k)),w.lock()}catch(N){this._worker=new d("error"),this._worker.error(N)}}b.prototype={accumulate:function(w){return x(this,w)},on:function(w,T){var A=this;return w==="data"?this._worker.on(w,function(k){T.call(A,k.data,k.meta)}):this._worker.on(w,function(){o.delay(T,arguments,A)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var o=new ArrayBuffer(0);try{a.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(o),a.blob=u.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,a){for(var o=t("./utils"),u=t("./support"),d=t("./nodejsUtils"),m=t("./stream/GenericWorker"),p=new Array(256),y=0;y<256;y++)p[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;p[254]=p[254]=1;function _(){m.call(this,"utf-8 decode"),this.leftOver=null}function x(){m.call(this,"utf-8 encode")}a.utf8encode=function(b){return u.nodebuffer?d.newBufferFrom(b,"utf-8"):(function(w){var T,A,k,N,D,I=w.length,O=0;for(N=0;N<I;N++)(64512&(A=w.charCodeAt(N)))==55296&&N+1<I&&(64512&(k=w.charCodeAt(N+1)))==56320&&(A=65536+(A-55296<<10)+(k-56320),N++),O+=A<128?1:A<2048?2:A<65536?3:4;for(T=u.uint8array?new Uint8Array(O):new Array(O),N=D=0;D<O;N++)(64512&(A=w.charCodeAt(N)))==55296&&N+1<I&&(64512&(k=w.charCodeAt(N+1)))==56320&&(A=65536+(A-55296<<10)+(k-56320),N++),A<128?T[D++]=A:(A<2048?T[D++]=192|A>>>6:(A<65536?T[D++]=224|A>>>12:(T[D++]=240|A>>>18,T[D++]=128|A>>>12&63),T[D++]=128|A>>>6&63),T[D++]=128|63&A);return T})(b)},a.utf8decode=function(b){return u.nodebuffer?o.transformTo("nodebuffer",b).toString("utf-8"):(function(w){var T,A,k,N,D=w.length,I=new Array(2*D);for(T=A=0;T<D;)if((k=w[T++])<128)I[A++]=k;else if(4<(N=p[k]))I[A++]=65533,T+=N-1;else{for(k&=N===2?31:N===3?15:7;1<N&&T<D;)k=k<<6|63&w[T++],N--;1<N?I[A++]=65533:k<65536?I[A++]=k:(k-=65536,I[A++]=55296|k>>10&1023,I[A++]=56320|1023&k)}return I.length!==A&&(I.subarray?I=I.subarray(0,A):I.length=A),o.applyFromCharCode(I)})(b=o.transformTo(u.uint8array?"uint8array":"array",b))},o.inherits(_,m),_.prototype.processChunk=function(b){var w=o.transformTo(u.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var T=w;(w=new Uint8Array(T.length+this.leftOver.length)).set(this.leftOver,0),w.set(T,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var A=(function(N,D){var I;for((D=D||N.length)>N.length&&(D=N.length),I=D-1;0<=I&&(192&N[I])==128;)I--;return I<0||I===0?D:I+p[N[I]]>D?I:D})(w),k=w;A!==w.length&&(u.uint8array?(k=w.subarray(0,A),this.leftOver=w.subarray(A,w.length)):(k=w.slice(0,A),this.leftOver=w.slice(A,w.length))),this.push({data:a.utf8decode(k),meta:b.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=_,o.inherits(x,m),x.prototype.processChunk=function(b){this.push({data:a.utf8encode(b.data),meta:b.meta})},a.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,a){var o=t("./support"),u=t("./base64"),d=t("./nodejsUtils"),m=t("./external");function p(T){return T}function y(T,A){for(var k=0;k<T.length;++k)A[k]=255&T.charCodeAt(k);return A}t("setimmediate"),a.newBlob=function(T,A){a.checkSupport("blob");try{return new Blob([T],{type:A})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(T),k.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(T,A,k){var N=[],D=0,I=T.length;if(I<=k)return String.fromCharCode.apply(null,T);for(;D<I;)A==="array"||A==="nodebuffer"?N.push(String.fromCharCode.apply(null,T.slice(D,Math.min(D+k,I)))):N.push(String.fromCharCode.apply(null,T.subarray(D,Math.min(D+k,I)))),D+=k;return N.join("")},stringifyByChar:function(T){for(var A="",k=0;k<T.length;k++)A+=String.fromCharCode(T[k]);return A},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}})()}};function x(T){var A=65536,k=a.getTypeOf(T),N=!0;if(k==="uint8array"?N=_.applyCanBeUsed.uint8array:k==="nodebuffer"&&(N=_.applyCanBeUsed.nodebuffer),N)for(;1<A;)try{return _.stringifyByChunk(T,k,A)}catch{A=Math.floor(A/2)}return _.stringifyByChar(T)}function b(T,A){for(var k=0;k<T.length;k++)A[k]=T[k];return A}a.applyFromCharCode=x;var w={};w.string={string:p,array:function(T){return y(T,new Array(T.length))},arraybuffer:function(T){return w.string.uint8array(T).buffer},uint8array:function(T){return y(T,new Uint8Array(T.length))},nodebuffer:function(T){return y(T,d.allocBuffer(T.length))}},w.array={string:x,array:p,arraybuffer:function(T){return new Uint8Array(T).buffer},uint8array:function(T){return new Uint8Array(T)},nodebuffer:function(T){return d.newBufferFrom(T)}},w.arraybuffer={string:function(T){return x(new Uint8Array(T))},array:function(T){return b(new Uint8Array(T),new Array(T.byteLength))},arraybuffer:p,uint8array:function(T){return new Uint8Array(T)},nodebuffer:function(T){return d.newBufferFrom(new Uint8Array(T))}},w.uint8array={string:x,array:function(T){return b(T,new Array(T.length))},arraybuffer:function(T){return T.buffer},uint8array:p,nodebuffer:function(T){return d.newBufferFrom(T)}},w.nodebuffer={string:x,array:function(T){return b(T,new Array(T.length))},arraybuffer:function(T){return w.nodebuffer.uint8array(T).buffer},uint8array:function(T){return b(T,new Uint8Array(T.length))},nodebuffer:p},a.transformTo=function(T,A){if(A=A||"",!T)return A;a.checkSupport(T);var k=a.getTypeOf(A);return w[k][T](A)},a.resolve=function(T){for(var A=T.split("/"),k=[],N=0;N<A.length;N++){var D=A[N];D==="."||D===""&&N!==0&&N!==A.length-1||(D===".."?k.pop():k.push(D))}return k.join("/")},a.getTypeOf=function(T){return typeof T=="string"?"string":Object.prototype.toString.call(T)==="[object Array]"?"array":o.nodebuffer&&d.isBuffer(T)?"nodebuffer":o.uint8array&&T instanceof Uint8Array?"uint8array":o.arraybuffer&&T instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(T){if(!o[T.toLowerCase()])throw new Error(T+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(T){var A,k,N="";for(k=0;k<(T||"").length;k++)N+="\\x"+((A=T.charCodeAt(k))<16?"0":"")+A.toString(16).toUpperCase();return N},a.delay=function(T,A,k){setImmediate(function(){T.apply(k||null,A||[])})},a.inherits=function(T,A){function k(){}k.prototype=A.prototype,T.prototype=new k},a.extend=function(){var T,A,k={};for(T=0;T<arguments.length;T++)for(A in arguments[T])Object.prototype.hasOwnProperty.call(arguments[T],A)&&k[A]===void 0&&(k[A]=arguments[T][A]);return k},a.prepareContent=function(T,A,k,N,D){return m.Promise.resolve(A).then(function(I){return o.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new m.Promise(function(O,G){var j=new FileReader;j.onload=function(ee){O(ee.target.result)},j.onerror=function(ee){G(ee.target.error)},j.readAsArrayBuffer(I)}):I}).then(function(I){var O=a.getTypeOf(I);return O?(O==="arraybuffer"?I=a.transformTo("uint8array",I):O==="string"&&(D?I=u.decode(I):k&&N!==!0&&(I=(function(G){return y(G,o.uint8array?new Uint8Array(G.length):new Array(G.length))})(I))),I):m.Promise.reject(new Error("Can't read the data of '"+T+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,a){var o=t("./reader/readerFor"),u=t("./utils"),d=t("./signature"),m=t("./zipEntry"),p=t("./support");function y(_){this.files=[],this.loadOptions=_}y.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(x)+", expected "+u.pretty(_)+")")}},isSignature:function(_,x){var b=this.reader.index;this.reader.setIndex(_);var w=this.reader.readString(4)===x;return this.reader.setIndex(b),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),x=p.uint8array?"uint8array":"array",b=u.transformTo(x,_);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,x,b,w=this.zip64EndOfCentralSize-44;0<w;)_=this.reader.readInt(2),x=this.reader.readInt(4),b=this.reader.readData(x),this.zip64ExtensibleData[_]={id:_,length:x,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,x;for(_=0;_<this.files.length;_++)x=this.files[_],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(_=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var x=_;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var w=x-b;if(0<w)this.isSignature(x,d.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(_){this.reader=o(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,a){var o=t("./reader/readerFor"),u=t("./utils"),d=t("./compressedObject"),m=t("./crc32"),p=t("./utf8"),y=t("./compressions"),_=t("./support");function x(b,w){this.options=b,this.loadOptions=w}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var w,T;if(b.skip(22),this.fileNameLength=b.readInt(2),T=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(T),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(A){for(var k in y)if(Object.prototype.hasOwnProperty.call(y,k)&&y[k].magic===A)return y[k];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,w,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var w=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(w),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=o(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var w,T,A,k=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<k;)w=b.readInt(2),T=b.readInt(2),A=b.readData(T),this.extraFields[w]={id:w,length:T,value:A};b.setIndex(k)},handleUTF8:function(){var b=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var T=u.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(T)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var k=u.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var w=o(b.value);return w.readInt(1)!==1||m(this.fileName)!==w.readInt(4)?null:p.utf8decode(w.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var w=o(b.value);return w.readInt(1)!==1||m(this.fileComment)!==w.readInt(4)?null:p.utf8decode(w.readData(b.length-5))}return null}},i.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,a){function o(w,T,A){this.name=w,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=T,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var u=t("./stream/StreamHelper"),d=t("./stream/DataWorker"),m=t("./utf8"),p=t("./compressedObject"),y=t("./stream/GenericWorker");o.prototype={internalStream:function(w){var T=null,A="string";try{if(!w)throw new Error("No output type specified.");var k=(A=w.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),T=this._decompressWorker();var N=!this._dataBinary;N&&!k&&(T=T.pipe(new m.Utf8EncodeWorker)),!N&&k&&(T=T.pipe(new m.Utf8DecodeWorker))}catch(D){(T=new y("error")).error(D)}return new u(T,A,"")},async:function(w,T){return this.internalStream(w).accumulate(T)},nodeStream:function(w,T){return this.internalStream(w||"nodebuffer").toNodejsStream(T)},_compressWorker:function(w,T){if(this._data instanceof p&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new m.Utf8EncodeWorker)),p.createWorkerFrom(A,w,T)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof y?this._data:new d(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<_.length;b++)o.prototype[_[b]]=x;i.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,a){(function(o){var u,d,m=o.MutationObserver||o.WebKitMutationObserver;if(m){var p=0,y=new m(w),_=o.document.createTextNode("");y.observe(_,{characterData:!0}),u=function(){_.data=p=++p%2}}else if(o.setImmediate||o.MessageChannel===void 0)u="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var T=o.document.createElement("script");T.onreadystatechange=function(){w(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},o.document.documentElement.appendChild(T)}:function(){setTimeout(w,0)};else{var x=new o.MessageChannel;x.port1.onmessage=w,u=function(){x.port2.postMessage(0)}}var b=[];function w(){var T,A;d=!0;for(var k=b.length;k;){for(A=b,b=[],T=-1;++T<k;)A[T]();k=b.length}d=!1}i.exports=function(T){b.push(T)!==1||d||u()}}).call(this,typeof rl<"u"?rl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,a){var o=t("immediate");function u(){}var d={},m=["REJECTED"],p=["FULFILLED"],y=["PENDING"];function _(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,k!==u&&T(this,k)}function x(k,N,D){this.promise=k,typeof N=="function"&&(this.onFulfilled=N,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function b(k,N,D){o(function(){var I;try{I=N(D)}catch(O){return d.reject(k,O)}I===k?d.reject(k,new TypeError("Cannot resolve promise with itself")):d.resolve(k,I)})}function w(k){var N=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof N=="function")return function(){N.apply(k,arguments)}}function T(k,N){var D=!1;function I(j){D||(D=!0,d.reject(k,j))}function O(j){D||(D=!0,d.resolve(k,j))}var G=A(function(){N(O,I)});G.status==="error"&&I(G.value)}function A(k,N){var D={};try{D.value=k(N),D.status="success"}catch(I){D.status="error",D.value=I}return D}(i.exports=_).prototype.finally=function(k){if(typeof k!="function")return this;var N=this.constructor;return this.then(function(D){return N.resolve(k()).then(function(){return D})},function(D){return N.resolve(k()).then(function(){throw D})})},_.prototype.catch=function(k){return this.then(null,k)},_.prototype.then=function(k,N){if(typeof k!="function"&&this.state===p||typeof N!="function"&&this.state===m)return this;var D=new this.constructor(u);return this.state!==y?b(D,this.state===p?k:N,this.outcome):this.queue.push(new x(D,k,N)),D},x.prototype.callFulfilled=function(k){d.resolve(this.promise,k)},x.prototype.otherCallFulfilled=function(k){b(this.promise,this.onFulfilled,k)},x.prototype.callRejected=function(k){d.reject(this.promise,k)},x.prototype.otherCallRejected=function(k){b(this.promise,this.onRejected,k)},d.resolve=function(k,N){var D=A(w,N);if(D.status==="error")return d.reject(k,D.value);var I=D.value;if(I)T(k,I);else{k.state=p,k.outcome=N;for(var O=-1,G=k.queue.length;++O<G;)k.queue[O].callFulfilled(N)}return k},d.reject=function(k,N){k.state=m,k.outcome=N;for(var D=-1,I=k.queue.length;++D<I;)k.queue[D].callRejected(N);return k},_.resolve=function(k){return k instanceof this?k:d.resolve(new this(u),k)},_.reject=function(k){var N=new this(u);return d.reject(N,k)},_.all=function(k){var N=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=k.length,I=!1;if(!D)return this.resolve([]);for(var O=new Array(D),G=0,j=-1,ee=new this(u);++j<D;)B(k[j],j);return ee;function B(Z,ve){N.resolve(Z).then(function(q){O[ve]=q,++G!==D||I||(I=!0,d.resolve(ee,O))},function(q){I||(I=!0,d.reject(ee,q))})}},_.race=function(k){var N=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=k.length,I=!1;if(!D)return this.resolve([]);for(var O=-1,G=new this(u);++O<D;)j=k[O],N.resolve(j).then(function(ee){I||(I=!0,d.resolve(G,ee))},function(ee){I||(I=!0,d.reject(G,ee))});var j;return G}},{immediate:36}],38:[function(t,i,a){var o={};(0,t("./lib/utils/common").assign)(o,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,a){var o=t("./zlib/deflate"),u=t("./utils/common"),d=t("./utils/strings"),m=t("./zlib/messages"),p=t("./zlib/zstream"),y=Object.prototype.toString,_=0,x=-1,b=0,w=8;function T(k){if(!(this instanceof T))return new T(k);this.options=u.assign({level:x,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},k||{});var N=this.options;N.raw&&0<N.windowBits?N.windowBits=-N.windowBits:N.gzip&&0<N.windowBits&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var D=o.deflateInit2(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy);if(D!==_)throw new Error(m[D]);if(N.header&&o.deflateSetHeader(this.strm,N.header),N.dictionary){var I;if(I=typeof N.dictionary=="string"?d.string2buf(N.dictionary):y.call(N.dictionary)==="[object ArrayBuffer]"?new Uint8Array(N.dictionary):N.dictionary,(D=o.deflateSetDictionary(this.strm,I))!==_)throw new Error(m[D]);this._dict_set=!0}}function A(k,N){var D=new T(N);if(D.push(k,!0),D.err)throw D.msg||m[D.err];return D.result}T.prototype.push=function(k,N){var D,I,O=this.strm,G=this.options.chunkSize;if(this.ended)return!1;I=N===~~N?N:N===!0?4:0,typeof k=="string"?O.input=d.string2buf(k):y.call(k)==="[object ArrayBuffer]"?O.input=new Uint8Array(k):O.input=k,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new u.Buf8(G),O.next_out=0,O.avail_out=G),(D=o.deflate(O,I))!==1&&D!==_)return this.onEnd(D),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(u.shrinkBuf(O.output,O.next_out))):this.onData(u.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&D!==1);return I===4?(D=o.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===_):I!==2||(this.onEnd(_),!(O.avail_out=0))},T.prototype.onData=function(k){this.chunks.push(k)},T.prototype.onEnd=function(k){k===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},a.Deflate=T,a.deflate=A,a.deflateRaw=function(k,N){return(N=N||{}).raw=!0,A(k,N)},a.gzip=function(k,N){return(N=N||{}).gzip=!0,A(k,N)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,a){var o=t("./zlib/inflate"),u=t("./utils/common"),d=t("./utils/strings"),m=t("./zlib/constants"),p=t("./zlib/messages"),y=t("./zlib/zstream"),_=t("./zlib/gzheader"),x=Object.prototype.toString;function b(T){if(!(this instanceof b))return new b(T);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},T||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||T&&T.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&(15&A.windowBits)==0&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var k=o.inflateInit2(this.strm,A.windowBits);if(k!==m.Z_OK)throw new Error(p[k]);this.header=new _,o.inflateGetHeader(this.strm,this.header)}function w(T,A){var k=new b(A);if(k.push(T,!0),k.err)throw k.msg||p[k.err];return k.result}b.prototype.push=function(T,A){var k,N,D,I,O,G,j=this.strm,ee=this.options.chunkSize,B=this.options.dictionary,Z=!1;if(this.ended)return!1;N=A===~~A?A:A===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof T=="string"?j.input=d.binstring2buf(T):x.call(T)==="[object ArrayBuffer]"?j.input=new Uint8Array(T):j.input=T,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new u.Buf8(ee),j.next_out=0,j.avail_out=ee),(k=o.inflate(j,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&B&&(G=typeof B=="string"?d.string2buf(B):x.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,k=o.inflateSetDictionary(this.strm,G)),k===m.Z_BUF_ERROR&&Z===!0&&(k=m.Z_OK,Z=!1),k!==m.Z_STREAM_END&&k!==m.Z_OK)return this.onEnd(k),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&k!==m.Z_STREAM_END&&(j.avail_in!==0||N!==m.Z_FINISH&&N!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=d.utf8border(j.output,j.next_out),I=j.next_out-D,O=d.buf2string(j.output,D),j.next_out=I,j.avail_out=ee-I,I&&u.arraySet(j.output,j.output,D,I,0),this.onData(O)):this.onData(u.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(Z=!0)}while((0<j.avail_in||j.avail_out===0)&&k!==m.Z_STREAM_END);return k===m.Z_STREAM_END&&(N=m.Z_FINISH),N===m.Z_FINISH?(k=o.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===m.Z_OK):N!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(j.avail_out=0))},b.prototype.onData=function(T){this.chunks.push(T)},b.prototype.onEnd=function(T){T===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg},a.Inflate=b,a.inflate=w,a.inflateRaw=function(T,A){return(A=A||{}).raw=!0,w(T,A)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(m){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var y=p.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var _ in y)y.hasOwnProperty(_)&&(m[_]=y[_])}}return m},a.shrinkBuf=function(m,p){return m.length===p?m:m.subarray?m.subarray(0,p):(m.length=p,m)};var u={arraySet:function(m,p,y,_,x){if(p.subarray&&m.subarray)m.set(p.subarray(y,y+_),x);else for(var b=0;b<_;b++)m[x+b]=p[y+b]},flattenChunks:function(m){var p,y,_,x,b,w;for(p=_=0,y=m.length;p<y;p++)_+=m[p].length;for(w=new Uint8Array(_),p=x=0,y=m.length;p<y;p++)b=m[p],w.set(b,x),x+=b.length;return w}},d={arraySet:function(m,p,y,_,x){for(var b=0;b<_;b++)m[x+b]=p[y+b]},flattenChunks:function(m){return[].concat.apply([],m)}};a.setTyped=function(m){m?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,u)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,d))},a.setTyped(o)},{}],42:[function(t,i,a){var o=t("./common"),u=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var m=new o.Buf8(256),p=0;p<256;p++)m[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function y(_,x){if(x<65537&&(_.subarray&&d||!_.subarray&&u))return String.fromCharCode.apply(null,o.shrinkBuf(_,x));for(var b="",w=0;w<x;w++)b+=String.fromCharCode(_[w]);return b}m[254]=m[254]=1,a.string2buf=function(_){var x,b,w,T,A,k=_.length,N=0;for(T=0;T<k;T++)(64512&(b=_.charCodeAt(T)))==55296&&T+1<k&&(64512&(w=_.charCodeAt(T+1)))==56320&&(b=65536+(b-55296<<10)+(w-56320),T++),N+=b<128?1:b<2048?2:b<65536?3:4;for(x=new o.Buf8(N),T=A=0;A<N;T++)(64512&(b=_.charCodeAt(T)))==55296&&T+1<k&&(64512&(w=_.charCodeAt(T+1)))==56320&&(b=65536+(b-55296<<10)+(w-56320),T++),b<128?x[A++]=b:(b<2048?x[A++]=192|b>>>6:(b<65536?x[A++]=224|b>>>12:(x[A++]=240|b>>>18,x[A++]=128|b>>>12&63),x[A++]=128|b>>>6&63),x[A++]=128|63&b);return x},a.buf2binstring=function(_){return y(_,_.length)},a.binstring2buf=function(_){for(var x=new o.Buf8(_.length),b=0,w=x.length;b<w;b++)x[b]=_.charCodeAt(b);return x},a.buf2string=function(_,x){var b,w,T,A,k=x||_.length,N=new Array(2*k);for(b=w=0;b<k;)if((T=_[b++])<128)N[w++]=T;else if(4<(A=m[T]))N[w++]=65533,b+=A-1;else{for(T&=A===2?31:A===3?15:7;1<A&&b<k;)T=T<<6|63&_[b++],A--;1<A?N[w++]=65533:T<65536?N[w++]=T:(T-=65536,N[w++]=55296|T>>10&1023,N[w++]=56320|1023&T)}return y(N,w)},a.utf8border=function(_,x){var b;for((x=x||_.length)>_.length&&(x=_.length),b=x-1;0<=b&&(192&_[b])==128;)b--;return b<0||b===0?x:b+m[_[b]]>x?b:x}},{"./common":41}],43:[function(t,i,a){i.exports=function(o,u,d,m){for(var p=65535&o|0,y=o>>>16&65535|0,_=0;d!==0;){for(d-=_=2e3<d?2e3:d;y=y+(p=p+u[m++]|0)|0,--_;);p%=65521,y%=65521}return p|y<<16|0}},{}],44:[function(t,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,a){var o=(function(){for(var u,d=[],m=0;m<256;m++){u=m;for(var p=0;p<8;p++)u=1&u?3988292384^u>>>1:u>>>1;d[m]=u}return d})();i.exports=function(u,d,m,p){var y=o,_=p+m;u^=-1;for(var x=p;x<_;x++)u=u>>>8^y[255&(u^d[x])];return-1^u}},{}],46:[function(t,i,a){var o,u=t("../utils/common"),d=t("./trees"),m=t("./adler32"),p=t("./crc32"),y=t("./messages"),_=0,x=4,b=0,w=-2,T=-1,A=4,k=2,N=8,D=9,I=286,O=30,G=19,j=2*I+1,ee=15,B=3,Z=258,ve=Z+B+1,q=42,Q=113,R=1,re=2,se=3,te=4;function ye(E,le){return E.msg=y[le],le}function ue(E){return(E<<1)-(4<E?9:0)}function L(E){for(var le=E.length;0<=--le;)E[le]=0}function V(E){var le=E.state,ne=le.pending;ne>E.avail_out&&(ne=E.avail_out),ne!==0&&(u.arraySet(E.output,le.pending_buf,le.pending_out,ne,E.next_out),E.next_out+=ne,le.pending_out+=ne,E.total_out+=ne,E.avail_out-=ne,le.pending-=ne,le.pending===0&&(le.pending_out=0))}function F(E,le){d._tr_flush_block(E,0<=E.block_start?E.block_start:-1,E.strstart-E.block_start,le),E.block_start=E.strstart,V(E.strm)}function he(E,le){E.pending_buf[E.pending++]=le}function ie(E,le){E.pending_buf[E.pending++]=le>>>8&255,E.pending_buf[E.pending++]=255&le}function ce(E,le){var ne,P,U=E.max_chain_length,Y=E.strstart,fe=E.prev_length,pe=E.nice_match,W=E.strstart>E.w_size-ve?E.strstart-(E.w_size-ve):0,_e=E.window,we=E.w_mask,xe=E.prev,Oe=E.strstart+Z,ot=_e[Y+fe-1],Ye=_e[Y+fe];E.prev_length>=E.good_match&&(U>>=2),pe>E.lookahead&&(pe=E.lookahead);do if(_e[(ne=le)+fe]===Ye&&_e[ne+fe-1]===ot&&_e[ne]===_e[Y]&&_e[++ne]===_e[Y+1]){Y+=2,ne++;do;while(_e[++Y]===_e[++ne]&&_e[++Y]===_e[++ne]&&_e[++Y]===_e[++ne]&&_e[++Y]===_e[++ne]&&_e[++Y]===_e[++ne]&&_e[++Y]===_e[++ne]&&_e[++Y]===_e[++ne]&&_e[++Y]===_e[++ne]&&Y<Oe);if(P=Z-(Oe-Y),Y=Oe-Z,fe<P){if(E.match_start=le,pe<=(fe=P))break;ot=_e[Y+fe-1],Ye=_e[Y+fe]}}while((le=xe[le&we])>W&&--U!=0);return fe<=E.lookahead?fe:E.lookahead}function Ae(E){var le,ne,P,U,Y,fe,pe,W,_e,we,xe=E.w_size;do{if(U=E.window_size-E.lookahead-E.strstart,E.strstart>=xe+(xe-ve)){for(u.arraySet(E.window,E.window,xe,xe,0),E.match_start-=xe,E.strstart-=xe,E.block_start-=xe,le=ne=E.hash_size;P=E.head[--le],E.head[le]=xe<=P?P-xe:0,--ne;);for(le=ne=xe;P=E.prev[--le],E.prev[le]=xe<=P?P-xe:0,--ne;);U+=xe}if(E.strm.avail_in===0)break;if(fe=E.strm,pe=E.window,W=E.strstart+E.lookahead,_e=U,we=void 0,we=fe.avail_in,_e<we&&(we=_e),ne=we===0?0:(fe.avail_in-=we,u.arraySet(pe,fe.input,fe.next_in,we,W),fe.state.wrap===1?fe.adler=m(fe.adler,pe,we,W):fe.state.wrap===2&&(fe.adler=p(fe.adler,pe,we,W)),fe.next_in+=we,fe.total_in+=we,we),E.lookahead+=ne,E.lookahead+E.insert>=B)for(Y=E.strstart-E.insert,E.ins_h=E.window[Y],E.ins_h=(E.ins_h<<E.hash_shift^E.window[Y+1])&E.hash_mask;E.insert&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[Y+B-1])&E.hash_mask,E.prev[Y&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=Y,Y++,E.insert--,!(E.lookahead+E.insert<B)););}while(E.lookahead<ve&&E.strm.avail_in!==0)}function qe(E,le){for(var ne,P;;){if(E.lookahead<ve){if(Ae(E),E.lookahead<ve&&le===_)return R;if(E.lookahead===0)break}if(ne=0,E.lookahead>=B&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+B-1])&E.hash_mask,ne=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),ne!==0&&E.strstart-ne<=E.w_size-ve&&(E.match_length=ce(E,ne)),E.match_length>=B)if(P=d._tr_tally(E,E.strstart-E.match_start,E.match_length-B),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=B){for(E.match_length--;E.strstart++,E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+B-1])&E.hash_mask,ne=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart,--E.match_length!=0;);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+1])&E.hash_mask;else P=d._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(P&&(F(E,!1),E.strm.avail_out===0))return R}return E.insert=E.strstart<B-1?E.strstart:B-1,le===x?(F(E,!0),E.strm.avail_out===0?se:te):E.last_lit&&(F(E,!1),E.strm.avail_out===0)?R:re}function Ce(E,le){for(var ne,P,U;;){if(E.lookahead<ve){if(Ae(E),E.lookahead<ve&&le===_)return R;if(E.lookahead===0)break}if(ne=0,E.lookahead>=B&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+B-1])&E.hash_mask,ne=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=B-1,ne!==0&&E.prev_length<E.max_lazy_match&&E.strstart-ne<=E.w_size-ve&&(E.match_length=ce(E,ne),E.match_length<=5&&(E.strategy===1||E.match_length===B&&4096<E.strstart-E.match_start)&&(E.match_length=B-1)),E.prev_length>=B&&E.match_length<=E.prev_length){for(U=E.strstart+E.lookahead-B,P=d._tr_tally(E,E.strstart-1-E.prev_match,E.prev_length-B),E.lookahead-=E.prev_length-1,E.prev_length-=2;++E.strstart<=U&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+B-1])&E.hash_mask,ne=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),--E.prev_length!=0;);if(E.match_available=0,E.match_length=B-1,E.strstart++,P&&(F(E,!1),E.strm.avail_out===0))return R}else if(E.match_available){if((P=d._tr_tally(E,0,E.window[E.strstart-1]))&&F(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return R}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(P=d._tr_tally(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<B-1?E.strstart:B-1,le===x?(F(E,!0),E.strm.avail_out===0?se:te):E.last_lit&&(F(E,!1),E.strm.avail_out===0)?R:re}function Le(E,le,ne,P,U){this.good_length=E,this.max_lazy=le,this.nice_length=ne,this.max_chain=P,this.func=U}function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=N,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*j),this.dyn_dtree=new u.Buf16(2*(2*O+1)),this.bl_tree=new u.Buf16(2*(2*G+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(ee+1),this.heap=new u.Buf16(2*I+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*I+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function nt(E){var le;return E&&E.state?(E.total_in=E.total_out=0,E.data_type=k,(le=E.state).pending=0,le.pending_out=0,le.wrap<0&&(le.wrap=-le.wrap),le.status=le.wrap?q:Q,E.adler=le.wrap===2?0:1,le.last_flush=_,d._tr_init(le),b):ye(E,w)}function Ct(E){var le=nt(E);return le===b&&(function(ne){ne.window_size=2*ne.w_size,L(ne.head),ne.max_lazy_match=o[ne.level].max_lazy,ne.good_match=o[ne.level].good_length,ne.nice_match=o[ne.level].nice_length,ne.max_chain_length=o[ne.level].max_chain,ne.strstart=0,ne.block_start=0,ne.lookahead=0,ne.insert=0,ne.match_length=ne.prev_length=B-1,ne.match_available=0,ne.ins_h=0})(E.state),le}function bt(E,le,ne,P,U,Y){if(!E)return w;var fe=1;if(le===T&&(le=6),P<0?(fe=0,P=-P):15<P&&(fe=2,P-=16),U<1||D<U||ne!==N||P<8||15<P||le<0||9<le||Y<0||A<Y)return ye(E,w);P===8&&(P=9);var pe=new Fe;return(E.state=pe).strm=E,pe.wrap=fe,pe.gzhead=null,pe.w_bits=P,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=U+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+B-1)/B),pe.window=new u.Buf8(2*pe.w_size),pe.head=new u.Buf16(pe.hash_size),pe.prev=new u.Buf16(pe.w_size),pe.lit_bufsize=1<<U+6,pe.pending_buf_size=4*pe.lit_bufsize,pe.pending_buf=new u.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=le,pe.strategy=Y,pe.method=ne,Ct(E)}o=[new Le(0,0,0,0,function(E,le){var ne=65535;for(ne>E.pending_buf_size-5&&(ne=E.pending_buf_size-5);;){if(E.lookahead<=1){if(Ae(E),E.lookahead===0&&le===_)return R;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;var P=E.block_start+ne;if((E.strstart===0||E.strstart>=P)&&(E.lookahead=E.strstart-P,E.strstart=P,F(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-ve&&(F(E,!1),E.strm.avail_out===0))return R}return E.insert=0,le===x?(F(E,!0),E.strm.avail_out===0?se:te):(E.strstart>E.block_start&&(F(E,!1),E.strm.avail_out),R)}),new Le(4,4,8,4,qe),new Le(4,5,16,8,qe),new Le(4,6,32,32,qe),new Le(4,4,16,16,Ce),new Le(8,16,32,32,Ce),new Le(8,16,128,128,Ce),new Le(8,32,128,256,Ce),new Le(32,128,258,1024,Ce),new Le(32,258,258,4096,Ce)],a.deflateInit=function(E,le){return bt(E,le,N,15,8,0)},a.deflateInit2=bt,a.deflateReset=Ct,a.deflateResetKeep=nt,a.deflateSetHeader=function(E,le){return E&&E.state?E.state.wrap!==2?w:(E.state.gzhead=le,b):w},a.deflate=function(E,le){var ne,P,U,Y;if(!E||!E.state||5<le||le<0)return E?ye(E,w):w;if(P=E.state,!E.output||!E.input&&E.avail_in!==0||P.status===666&&le!==x)return ye(E,E.avail_out===0?-5:w);if(P.strm=E,ne=P.last_flush,P.last_flush=le,P.status===q)if(P.wrap===2)E.adler=0,he(P,31),he(P,139),he(P,8),P.gzhead?(he(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),he(P,255&P.gzhead.time),he(P,P.gzhead.time>>8&255),he(P,P.gzhead.time>>16&255),he(P,P.gzhead.time>>24&255),he(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),he(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(he(P,255&P.gzhead.extra.length),he(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(E.adler=p(E.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(he(P,0),he(P,0),he(P,0),he(P,0),he(P,0),he(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),he(P,3),P.status=Q);else{var fe=N+(P.w_bits-8<<4)<<8;fe|=(2<=P.strategy||P.level<2?0:P.level<6?1:P.level===6?2:3)<<6,P.strstart!==0&&(fe|=32),fe+=31-fe%31,P.status=Q,ie(P,fe),P.strstart!==0&&(ie(P,E.adler>>>16),ie(P,65535&E.adler)),E.adler=1}if(P.status===69)if(P.gzhead.extra){for(U=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>U&&(E.adler=p(E.adler,P.pending_buf,P.pending-U,U)),V(E),U=P.pending,P.pending!==P.pending_buf_size));)he(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>U&&(E.adler=p(E.adler,P.pending_buf,P.pending-U,U)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(P.status===73)if(P.gzhead.name){U=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>U&&(E.adler=p(E.adler,P.pending_buf,P.pending-U,U)),V(E),U=P.pending,P.pending===P.pending_buf_size)){Y=1;break}Y=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,he(P,Y)}while(Y!==0);P.gzhead.hcrc&&P.pending>U&&(E.adler=p(E.adler,P.pending_buf,P.pending-U,U)),Y===0&&(P.gzindex=0,P.status=91)}else P.status=91;if(P.status===91)if(P.gzhead.comment){U=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>U&&(E.adler=p(E.adler,P.pending_buf,P.pending-U,U)),V(E),U=P.pending,P.pending===P.pending_buf_size)){Y=1;break}Y=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,he(P,Y)}while(Y!==0);P.gzhead.hcrc&&P.pending>U&&(E.adler=p(E.adler,P.pending_buf,P.pending-U,U)),Y===0&&(P.status=103)}else P.status=103;if(P.status===103&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&V(E),P.pending+2<=P.pending_buf_size&&(he(P,255&E.adler),he(P,E.adler>>8&255),E.adler=0,P.status=Q)):P.status=Q),P.pending!==0){if(V(E),E.avail_out===0)return P.last_flush=-1,b}else if(E.avail_in===0&&ue(le)<=ue(ne)&&le!==x)return ye(E,-5);if(P.status===666&&E.avail_in!==0)return ye(E,-5);if(E.avail_in!==0||P.lookahead!==0||le!==_&&P.status!==666){var pe=P.strategy===2?(function(W,_e){for(var we;;){if(W.lookahead===0&&(Ae(W),W.lookahead===0)){if(_e===_)return R;break}if(W.match_length=0,we=d._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++,we&&(F(W,!1),W.strm.avail_out===0))return R}return W.insert=0,_e===x?(F(W,!0),W.strm.avail_out===0?se:te):W.last_lit&&(F(W,!1),W.strm.avail_out===0)?R:re})(P,le):P.strategy===3?(function(W,_e){for(var we,xe,Oe,ot,Ye=W.window;;){if(W.lookahead<=Z){if(Ae(W),W.lookahead<=Z&&_e===_)return R;if(W.lookahead===0)break}if(W.match_length=0,W.lookahead>=B&&0<W.strstart&&(xe=Ye[Oe=W.strstart-1])===Ye[++Oe]&&xe===Ye[++Oe]&&xe===Ye[++Oe]){ot=W.strstart+Z;do;while(xe===Ye[++Oe]&&xe===Ye[++Oe]&&xe===Ye[++Oe]&&xe===Ye[++Oe]&&xe===Ye[++Oe]&&xe===Ye[++Oe]&&xe===Ye[++Oe]&&xe===Ye[++Oe]&&Oe<ot);W.match_length=Z-(ot-Oe),W.match_length>W.lookahead&&(W.match_length=W.lookahead)}if(W.match_length>=B?(we=d._tr_tally(W,1,W.match_length-B),W.lookahead-=W.match_length,W.strstart+=W.match_length,W.match_length=0):(we=d._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++),we&&(F(W,!1),W.strm.avail_out===0))return R}return W.insert=0,_e===x?(F(W,!0),W.strm.avail_out===0?se:te):W.last_lit&&(F(W,!1),W.strm.avail_out===0)?R:re})(P,le):o[P.level].func(P,le);if(pe!==se&&pe!==te||(P.status=666),pe===R||pe===se)return E.avail_out===0&&(P.last_flush=-1),b;if(pe===re&&(le===1?d._tr_align(P):le!==5&&(d._tr_stored_block(P,0,0,!1),le===3&&(L(P.head),P.lookahead===0&&(P.strstart=0,P.block_start=0,P.insert=0))),V(E),E.avail_out===0))return P.last_flush=-1,b}return le!==x?b:P.wrap<=0?1:(P.wrap===2?(he(P,255&E.adler),he(P,E.adler>>8&255),he(P,E.adler>>16&255),he(P,E.adler>>24&255),he(P,255&E.total_in),he(P,E.total_in>>8&255),he(P,E.total_in>>16&255),he(P,E.total_in>>24&255)):(ie(P,E.adler>>>16),ie(P,65535&E.adler)),V(E),0<P.wrap&&(P.wrap=-P.wrap),P.pending!==0?b:1)},a.deflateEnd=function(E){var le;return E&&E.state?(le=E.state.status)!==q&&le!==69&&le!==73&&le!==91&&le!==103&&le!==Q&&le!==666?ye(E,w):(E.state=null,le===Q?ye(E,-3):b):w},a.deflateSetDictionary=function(E,le){var ne,P,U,Y,fe,pe,W,_e,we=le.length;if(!E||!E.state||(Y=(ne=E.state).wrap)===2||Y===1&&ne.status!==q||ne.lookahead)return w;for(Y===1&&(E.adler=m(E.adler,le,we,0)),ne.wrap=0,we>=ne.w_size&&(Y===0&&(L(ne.head),ne.strstart=0,ne.block_start=0,ne.insert=0),_e=new u.Buf8(ne.w_size),u.arraySet(_e,le,we-ne.w_size,ne.w_size,0),le=_e,we=ne.w_size),fe=E.avail_in,pe=E.next_in,W=E.input,E.avail_in=we,E.next_in=0,E.input=le,Ae(ne);ne.lookahead>=B;){for(P=ne.strstart,U=ne.lookahead-(B-1);ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[P+B-1])&ne.hash_mask,ne.prev[P&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=P,P++,--U;);ne.strstart=P,ne.lookahead=B-1,Ae(ne)}return ne.strstart+=ne.lookahead,ne.block_start=ne.strstart,ne.insert=ne.lookahead,ne.lookahead=0,ne.match_length=ne.prev_length=B-1,ne.match_available=0,E.next_in=pe,E.input=W,E.avail_in=fe,ne.wrap=Y,b},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,a){i.exports=function(o,u){var d,m,p,y,_,x,b,w,T,A,k,N,D,I,O,G,j,ee,B,Z,ve,q,Q,R,re;d=o.state,m=o.next_in,R=o.input,p=m+(o.avail_in-5),y=o.next_out,re=o.output,_=y-(u-o.avail_out),x=y+(o.avail_out-257),b=d.dmax,w=d.wsize,T=d.whave,A=d.wnext,k=d.window,N=d.hold,D=d.bits,I=d.lencode,O=d.distcode,G=(1<<d.lenbits)-1,j=(1<<d.distbits)-1;e:do{D<15&&(N+=R[m++]<<D,D+=8,N+=R[m++]<<D,D+=8),ee=I[N&G];t:for(;;){if(N>>>=B=ee>>>24,D-=B,(B=ee>>>16&255)===0)re[y++]=65535&ee;else{if(!(16&B)){if((64&B)==0){ee=I[(65535&ee)+(N&(1<<B)-1)];continue t}if(32&B){d.mode=12;break e}o.msg="invalid literal/length code",d.mode=30;break e}Z=65535&ee,(B&=15)&&(D<B&&(N+=R[m++]<<D,D+=8),Z+=N&(1<<B)-1,N>>>=B,D-=B),D<15&&(N+=R[m++]<<D,D+=8,N+=R[m++]<<D,D+=8),ee=O[N&j];n:for(;;){if(N>>>=B=ee>>>24,D-=B,!(16&(B=ee>>>16&255))){if((64&B)==0){ee=O[(65535&ee)+(N&(1<<B)-1)];continue n}o.msg="invalid distance code",d.mode=30;break e}if(ve=65535&ee,D<(B&=15)&&(N+=R[m++]<<D,(D+=8)<B&&(N+=R[m++]<<D,D+=8)),b<(ve+=N&(1<<B)-1)){o.msg="invalid distance too far back",d.mode=30;break e}if(N>>>=B,D-=B,(B=y-_)<ve){if(T<(B=ve-B)&&d.sane){o.msg="invalid distance too far back",d.mode=30;break e}if(Q=k,(q=0)===A){if(q+=w-B,B<Z){for(Z-=B;re[y++]=k[q++],--B;);q=y-ve,Q=re}}else if(A<B){if(q+=w+A-B,(B-=A)<Z){for(Z-=B;re[y++]=k[q++],--B;);if(q=0,A<Z){for(Z-=B=A;re[y++]=k[q++],--B;);q=y-ve,Q=re}}}else if(q+=A-B,B<Z){for(Z-=B;re[y++]=k[q++],--B;);q=y-ve,Q=re}for(;2<Z;)re[y++]=Q[q++],re[y++]=Q[q++],re[y++]=Q[q++],Z-=3;Z&&(re[y++]=Q[q++],1<Z&&(re[y++]=Q[q++]))}else{for(q=y-ve;re[y++]=re[q++],re[y++]=re[q++],re[y++]=re[q++],2<(Z-=3););Z&&(re[y++]=re[q++],1<Z&&(re[y++]=re[q++]))}break}}break}}while(m<p&&y<x);m-=Z=D>>3,N&=(1<<(D-=Z<<3))-1,o.next_in=m,o.next_out=y,o.avail_in=m<p?p-m+5:5-(m-p),o.avail_out=y<x?x-y+257:257-(y-x),d.hold=N,d.bits=D}},{}],49:[function(t,i,a){var o=t("../utils/common"),u=t("./adler32"),d=t("./crc32"),m=t("./inffast"),p=t("./inftrees"),y=1,_=2,x=0,b=-2,w=1,T=852,A=592;function k(q){return(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24)}function N(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(q){var Q;return q&&q.state?(Q=q.state,q.total_in=q.total_out=Q.total=0,q.msg="",Q.wrap&&(q.adler=1&Q.wrap),Q.mode=w,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new o.Buf32(T),Q.distcode=Q.distdyn=new o.Buf32(A),Q.sane=1,Q.back=-1,x):b}function I(q){var Q;return q&&q.state?((Q=q.state).wsize=0,Q.whave=0,Q.wnext=0,D(q)):b}function O(q,Q){var R,re;return q&&q.state?(re=q.state,Q<0?(R=0,Q=-Q):(R=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||15<Q)?b:(re.window!==null&&re.wbits!==Q&&(re.window=null),re.wrap=R,re.wbits=Q,I(q))):b}function G(q,Q){var R,re;return q?(re=new N,(q.state=re).window=null,(R=O(q,Q))!==x&&(q.state=null),R):b}var j,ee,B=!0;function Z(q){if(B){var Q;for(j=new o.Buf32(512),ee=new o.Buf32(32),Q=0;Q<144;)q.lens[Q++]=8;for(;Q<256;)q.lens[Q++]=9;for(;Q<280;)q.lens[Q++]=7;for(;Q<288;)q.lens[Q++]=8;for(p(y,q.lens,0,288,j,0,q.work,{bits:9}),Q=0;Q<32;)q.lens[Q++]=5;p(_,q.lens,0,32,ee,0,q.work,{bits:5}),B=!1}q.lencode=j,q.lenbits=9,q.distcode=ee,q.distbits=5}function ve(q,Q,R,re){var se,te=q.state;return te.window===null&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new o.Buf8(te.wsize)),re>=te.wsize?(o.arraySet(te.window,Q,R-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(re<(se=te.wsize-te.wnext)&&(se=re),o.arraySet(te.window,Q,R-re,se,te.wnext),(re-=se)?(o.arraySet(te.window,Q,R-re,re,0),te.wnext=re,te.whave=te.wsize):(te.wnext+=se,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=se))),0}a.inflateReset=I,a.inflateReset2=O,a.inflateResetKeep=D,a.inflateInit=function(q){return G(q,15)},a.inflateInit2=G,a.inflate=function(q,Q){var R,re,se,te,ye,ue,L,V,F,he,ie,ce,Ae,qe,Ce,Le,Fe,nt,Ct,bt,E,le,ne,P,U=0,Y=new o.Buf8(4),fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!q||!q.state||!q.output||!q.input&&q.avail_in!==0)return b;(R=q.state).mode===12&&(R.mode=13),ye=q.next_out,se=q.output,L=q.avail_out,te=q.next_in,re=q.input,ue=q.avail_in,V=R.hold,F=R.bits,he=ue,ie=L,le=x;e:for(;;)switch(R.mode){case w:if(R.wrap===0){R.mode=13;break}for(;F<16;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if(2&R.wrap&&V===35615){Y[R.check=0]=255&V,Y[1]=V>>>8&255,R.check=d(R.check,Y,2,0),F=V=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&V)<<8)+(V>>8))%31){q.msg="incorrect header check",R.mode=30;break}if((15&V)!=8){q.msg="unknown compression method",R.mode=30;break}if(F-=4,E=8+(15&(V>>>=4)),R.wbits===0)R.wbits=E;else if(E>R.wbits){q.msg="invalid window size",R.mode=30;break}R.dmax=1<<E,q.adler=R.check=1,R.mode=512&V?10:12,F=V=0;break;case 2:for(;F<16;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if(R.flags=V,(255&R.flags)!=8){q.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){q.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=V>>8&1),512&R.flags&&(Y[0]=255&V,Y[1]=V>>>8&255,R.check=d(R.check,Y,2,0)),F=V=0,R.mode=3;case 3:for(;F<32;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}R.head&&(R.head.time=V),512&R.flags&&(Y[0]=255&V,Y[1]=V>>>8&255,Y[2]=V>>>16&255,Y[3]=V>>>24&255,R.check=d(R.check,Y,4,0)),F=V=0,R.mode=4;case 4:for(;F<16;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}R.head&&(R.head.xflags=255&V,R.head.os=V>>8),512&R.flags&&(Y[0]=255&V,Y[1]=V>>>8&255,R.check=d(R.check,Y,2,0)),F=V=0,R.mode=5;case 5:if(1024&R.flags){for(;F<16;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}R.length=V,R.head&&(R.head.extra_len=V),512&R.flags&&(Y[0]=255&V,Y[1]=V>>>8&255,R.check=d(R.check,Y,2,0)),F=V=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(ue<(ce=R.length)&&(ce=ue),ce&&(R.head&&(E=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),o.arraySet(R.head.extra,re,te,ce,E)),512&R.flags&&(R.check=d(R.check,re,ce,te)),ue-=ce,te+=ce,R.length-=ce),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(ue===0)break e;for(ce=0;E=re[te+ce++],R.head&&E&&R.length<65536&&(R.head.name+=String.fromCharCode(E)),E&&ce<ue;);if(512&R.flags&&(R.check=d(R.check,re,ce,te)),ue-=ce,te+=ce,E)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(ue===0)break e;for(ce=0;E=re[te+ce++],R.head&&E&&R.length<65536&&(R.head.comment+=String.fromCharCode(E)),E&&ce<ue;);if(512&R.flags&&(R.check=d(R.check,re,ce,te)),ue-=ce,te+=ce,E)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;F<16;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if(V!==(65535&R.check)){q.msg="header crc mismatch",R.mode=30;break}F=V=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),q.adler=R.check=0,R.mode=12;break;case 10:for(;F<32;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}q.adler=R.check=k(V),F=V=0,R.mode=11;case 11:if(R.havedict===0)return q.next_out=ye,q.avail_out=L,q.next_in=te,q.avail_in=ue,R.hold=V,R.bits=F,2;q.adler=R.check=1,R.mode=12;case 12:if(Q===5||Q===6)break e;case 13:if(R.last){V>>>=7&F,F-=7&F,R.mode=27;break}for(;F<3;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}switch(R.last=1&V,F-=1,3&(V>>>=1)){case 0:R.mode=14;break;case 1:if(Z(R),R.mode=20,Q!==6)break;V>>>=2,F-=2;break e;case 2:R.mode=17;break;case 3:q.msg="invalid block type",R.mode=30}V>>>=2,F-=2;break;case 14:for(V>>>=7&F,F-=7&F;F<32;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if((65535&V)!=(V>>>16^65535)){q.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&V,F=V=0,R.mode=15,Q===6)break e;case 15:R.mode=16;case 16:if(ce=R.length){if(ue<ce&&(ce=ue),L<ce&&(ce=L),ce===0)break e;o.arraySet(se,re,te,ce,ye),ue-=ce,te+=ce,L-=ce,ye+=ce,R.length-=ce;break}R.mode=12;break;case 17:for(;F<14;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if(R.nlen=257+(31&V),V>>>=5,F-=5,R.ndist=1+(31&V),V>>>=5,F-=5,R.ncode=4+(15&V),V>>>=4,F-=4,286<R.nlen||30<R.ndist){q.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;F<3;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}R.lens[fe[R.have++]]=7&V,V>>>=3,F-=3}for(;R.have<19;)R.lens[fe[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,ne={bits:R.lenbits},le=p(0,R.lens,0,19,R.lencode,0,R.work,ne),R.lenbits=ne.bits,le){q.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;Le=(U=R.lencode[V&(1<<R.lenbits)-1])>>>16&255,Fe=65535&U,!((Ce=U>>>24)<=F);){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if(Fe<16)V>>>=Ce,F-=Ce,R.lens[R.have++]=Fe;else{if(Fe===16){for(P=Ce+2;F<P;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if(V>>>=Ce,F-=Ce,R.have===0){q.msg="invalid bit length repeat",R.mode=30;break}E=R.lens[R.have-1],ce=3+(3&V),V>>>=2,F-=2}else if(Fe===17){for(P=Ce+3;F<P;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}F-=Ce,E=0,ce=3+(7&(V>>>=Ce)),V>>>=3,F-=3}else{for(P=Ce+7;F<P;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}F-=Ce,E=0,ce=11+(127&(V>>>=Ce)),V>>>=7,F-=7}if(R.have+ce>R.nlen+R.ndist){q.msg="invalid bit length repeat",R.mode=30;break}for(;ce--;)R.lens[R.have++]=E}}if(R.mode===30)break;if(R.lens[256]===0){q.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,ne={bits:R.lenbits},le=p(y,R.lens,0,R.nlen,R.lencode,0,R.work,ne),R.lenbits=ne.bits,le){q.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,ne={bits:R.distbits},le=p(_,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,ne),R.distbits=ne.bits,le){q.msg="invalid distances set",R.mode=30;break}if(R.mode=20,Q===6)break e;case 20:R.mode=21;case 21:if(6<=ue&&258<=L){q.next_out=ye,q.avail_out=L,q.next_in=te,q.avail_in=ue,R.hold=V,R.bits=F,m(q,ie),ye=q.next_out,se=q.output,L=q.avail_out,te=q.next_in,re=q.input,ue=q.avail_in,V=R.hold,F=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;Le=(U=R.lencode[V&(1<<R.lenbits)-1])>>>16&255,Fe=65535&U,!((Ce=U>>>24)<=F);){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if(Le&&(240&Le)==0){for(nt=Ce,Ct=Le,bt=Fe;Le=(U=R.lencode[bt+((V&(1<<nt+Ct)-1)>>nt)])>>>16&255,Fe=65535&U,!(nt+(Ce=U>>>24)<=F);){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}V>>>=nt,F-=nt,R.back+=nt}if(V>>>=Ce,F-=Ce,R.back+=Ce,R.length=Fe,Le===0){R.mode=26;break}if(32&Le){R.back=-1,R.mode=12;break}if(64&Le){q.msg="invalid literal/length code",R.mode=30;break}R.extra=15&Le,R.mode=22;case 22:if(R.extra){for(P=R.extra;F<P;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}R.length+=V&(1<<R.extra)-1,V>>>=R.extra,F-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;Le=(U=R.distcode[V&(1<<R.distbits)-1])>>>16&255,Fe=65535&U,!((Ce=U>>>24)<=F);){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if((240&Le)==0){for(nt=Ce,Ct=Le,bt=Fe;Le=(U=R.distcode[bt+((V&(1<<nt+Ct)-1)>>nt)])>>>16&255,Fe=65535&U,!(nt+(Ce=U>>>24)<=F);){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}V>>>=nt,F-=nt,R.back+=nt}if(V>>>=Ce,F-=Ce,R.back+=Ce,64&Le){q.msg="invalid distance code",R.mode=30;break}R.offset=Fe,R.extra=15&Le,R.mode=24;case 24:if(R.extra){for(P=R.extra;F<P;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}R.offset+=V&(1<<R.extra)-1,V>>>=R.extra,F-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){q.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(L===0)break e;if(ce=ie-L,R.offset>ce){if((ce=R.offset-ce)>R.whave&&R.sane){q.msg="invalid distance too far back",R.mode=30;break}Ae=ce>R.wnext?(ce-=R.wnext,R.wsize-ce):R.wnext-ce,ce>R.length&&(ce=R.length),qe=R.window}else qe=se,Ae=ye-R.offset,ce=R.length;for(L<ce&&(ce=L),L-=ce,R.length-=ce;se[ye++]=qe[Ae++],--ce;);R.length===0&&(R.mode=21);break;case 26:if(L===0)break e;se[ye++]=R.length,L--,R.mode=21;break;case 27:if(R.wrap){for(;F<32;){if(ue===0)break e;ue--,V|=re[te++]<<F,F+=8}if(ie-=L,q.total_out+=ie,R.total+=ie,ie&&(q.adler=R.check=R.flags?d(R.check,se,ie,ye-ie):u(R.check,se,ie,ye-ie)),ie=L,(R.flags?V:k(V))!==R.check){q.msg="incorrect data check",R.mode=30;break}F=V=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;F<32;){if(ue===0)break e;ue--,V+=re[te++]<<F,F+=8}if(V!==(4294967295&R.total)){q.msg="incorrect length check",R.mode=30;break}F=V=0}R.mode=29;case 29:le=1;break e;case 30:le=-3;break e;case 31:return-4;case 32:default:return b}return q.next_out=ye,q.avail_out=L,q.next_in=te,q.avail_in=ue,R.hold=V,R.bits=F,(R.wsize||ie!==q.avail_out&&R.mode<30&&(R.mode<27||Q!==4))&&ve(q,q.output,q.next_out,ie-q.avail_out)?(R.mode=31,-4):(he-=q.avail_in,ie-=q.avail_out,q.total_in+=he,q.total_out+=ie,R.total+=ie,R.wrap&&ie&&(q.adler=R.check=R.flags?d(R.check,se,ie,q.next_out-ie):u(R.check,se,ie,q.next_out-ie)),q.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(he==0&&ie===0||Q===4)&&le===x&&(le=-5),le)},a.inflateEnd=function(q){if(!q||!q.state)return b;var Q=q.state;return Q.window&&(Q.window=null),q.state=null,x},a.inflateGetHeader=function(q,Q){var R;return q&&q.state?(2&(R=q.state).wrap)==0?b:((R.head=Q).done=!1,x):b},a.inflateSetDictionary=function(q,Q){var R,re=Q.length;return q&&q.state?(R=q.state).wrap!==0&&R.mode!==11?b:R.mode===11&&u(1,Q,re,0)!==R.check?-3:ve(q,Q,re,re)?(R.mode=31,-4):(R.havedict=1,x):b},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,a){var o=t("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(y,_,x,b,w,T,A,k){var N,D,I,O,G,j,ee,B,Z,ve=k.bits,q=0,Q=0,R=0,re=0,se=0,te=0,ye=0,ue=0,L=0,V=0,F=null,he=0,ie=new o.Buf16(16),ce=new o.Buf16(16),Ae=null,qe=0;for(q=0;q<=15;q++)ie[q]=0;for(Q=0;Q<b;Q++)ie[_[x+Q]]++;for(se=ve,re=15;1<=re&&ie[re]===0;re--);if(re<se&&(se=re),re===0)return w[T++]=20971520,w[T++]=20971520,k.bits=1,0;for(R=1;R<re&&ie[R]===0;R++);for(se<R&&(se=R),q=ue=1;q<=15;q++)if(ue<<=1,(ue-=ie[q])<0)return-1;if(0<ue&&(y===0||re!==1))return-1;for(ce[1]=0,q=1;q<15;q++)ce[q+1]=ce[q]+ie[q];for(Q=0;Q<b;Q++)_[x+Q]!==0&&(A[ce[_[x+Q]]++]=Q);if(j=y===0?(F=Ae=A,19):y===1?(F=u,he-=257,Ae=d,qe-=257,256):(F=m,Ae=p,-1),q=R,G=T,ye=Q=V=0,I=-1,O=(L=1<<(te=se))-1,y===1&&852<L||y===2&&592<L)return 1;for(;;){for(ee=q-ye,Z=A[Q]<j?(B=0,A[Q]):A[Q]>j?(B=Ae[qe+A[Q]],F[he+A[Q]]):(B=96,0),N=1<<q-ye,R=D=1<<te;w[G+(V>>ye)+(D-=N)]=ee<<24|B<<16|Z|0,D!==0;);for(N=1<<q-1;V&N;)N>>=1;if(N!==0?(V&=N-1,V+=N):V=0,Q++,--ie[q]==0){if(q===re)break;q=_[x+A[Q]]}if(se<q&&(V&O)!==I){for(ye===0&&(ye=se),G+=R,ue=1<<(te=q-ye);te+ye<re&&!((ue-=ie[te+ye])<=0);)te++,ue<<=1;if(L+=1<<te,y===1&&852<L||y===2&&592<L)return 1;w[I=V&O]=se<<24|te<<16|G-T|0}}return V!==0&&(w[G+V]=q-ye<<24|64<<16|0),k.bits=se,0}},{"../utils/common":41}],51:[function(t,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,a){var o=t("../utils/common"),u=0,d=1;function m(U){for(var Y=U.length;0<=--Y;)U[Y]=0}var p=0,y=29,_=256,x=_+1+y,b=30,w=19,T=2*x+1,A=15,k=16,N=7,D=256,I=16,O=17,G=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ve=new Array(2*(x+2));m(ve);var q=new Array(2*b);m(q);var Q=new Array(512);m(Q);var R=new Array(256);m(R);var re=new Array(y);m(re);var se,te,ye,ue=new Array(b);function L(U,Y,fe,pe,W){this.static_tree=U,this.extra_bits=Y,this.extra_base=fe,this.elems=pe,this.max_length=W,this.has_stree=U&&U.length}function V(U,Y){this.dyn_tree=U,this.max_code=0,this.stat_desc=Y}function F(U){return U<256?Q[U]:Q[256+(U>>>7)]}function he(U,Y){U.pending_buf[U.pending++]=255&Y,U.pending_buf[U.pending++]=Y>>>8&255}function ie(U,Y,fe){U.bi_valid>k-fe?(U.bi_buf|=Y<<U.bi_valid&65535,he(U,U.bi_buf),U.bi_buf=Y>>k-U.bi_valid,U.bi_valid+=fe-k):(U.bi_buf|=Y<<U.bi_valid&65535,U.bi_valid+=fe)}function ce(U,Y,fe){ie(U,fe[2*Y],fe[2*Y+1])}function Ae(U,Y){for(var fe=0;fe|=1&U,U>>>=1,fe<<=1,0<--Y;);return fe>>>1}function qe(U,Y,fe){var pe,W,_e=new Array(A+1),we=0;for(pe=1;pe<=A;pe++)_e[pe]=we=we+fe[pe-1]<<1;for(W=0;W<=Y;W++){var xe=U[2*W+1];xe!==0&&(U[2*W]=Ae(_e[xe]++,xe))}}function Ce(U){var Y;for(Y=0;Y<x;Y++)U.dyn_ltree[2*Y]=0;for(Y=0;Y<b;Y++)U.dyn_dtree[2*Y]=0;for(Y=0;Y<w;Y++)U.bl_tree[2*Y]=0;U.dyn_ltree[2*D]=1,U.opt_len=U.static_len=0,U.last_lit=U.matches=0}function Le(U){8<U.bi_valid?he(U,U.bi_buf):0<U.bi_valid&&(U.pending_buf[U.pending++]=U.bi_buf),U.bi_buf=0,U.bi_valid=0}function Fe(U,Y,fe,pe){var W=2*Y,_e=2*fe;return U[W]<U[_e]||U[W]===U[_e]&&pe[Y]<=pe[fe]}function nt(U,Y,fe){for(var pe=U.heap[fe],W=fe<<1;W<=U.heap_len&&(W<U.heap_len&&Fe(Y,U.heap[W+1],U.heap[W],U.depth)&&W++,!Fe(Y,pe,U.heap[W],U.depth));)U.heap[fe]=U.heap[W],fe=W,W<<=1;U.heap[fe]=pe}function Ct(U,Y,fe){var pe,W,_e,we,xe=0;if(U.last_lit!==0)for(;pe=U.pending_buf[U.d_buf+2*xe]<<8|U.pending_buf[U.d_buf+2*xe+1],W=U.pending_buf[U.l_buf+xe],xe++,pe===0?ce(U,W,Y):(ce(U,(_e=R[W])+_+1,Y),(we=j[_e])!==0&&ie(U,W-=re[_e],we),ce(U,_e=F(--pe),fe),(we=ee[_e])!==0&&ie(U,pe-=ue[_e],we)),xe<U.last_lit;);ce(U,D,Y)}function bt(U,Y){var fe,pe,W,_e=Y.dyn_tree,we=Y.stat_desc.static_tree,xe=Y.stat_desc.has_stree,Oe=Y.stat_desc.elems,ot=-1;for(U.heap_len=0,U.heap_max=T,fe=0;fe<Oe;fe++)_e[2*fe]!==0?(U.heap[++U.heap_len]=ot=fe,U.depth[fe]=0):_e[2*fe+1]=0;for(;U.heap_len<2;)_e[2*(W=U.heap[++U.heap_len]=ot<2?++ot:0)]=1,U.depth[W]=0,U.opt_len--,xe&&(U.static_len-=we[2*W+1]);for(Y.max_code=ot,fe=U.heap_len>>1;1<=fe;fe--)nt(U,_e,fe);for(W=Oe;fe=U.heap[1],U.heap[1]=U.heap[U.heap_len--],nt(U,_e,1),pe=U.heap[1],U.heap[--U.heap_max]=fe,U.heap[--U.heap_max]=pe,_e[2*W]=_e[2*fe]+_e[2*pe],U.depth[W]=(U.depth[fe]>=U.depth[pe]?U.depth[fe]:U.depth[pe])+1,_e[2*fe+1]=_e[2*pe+1]=W,U.heap[1]=W++,nt(U,_e,1),2<=U.heap_len;);U.heap[--U.heap_max]=U.heap[1],(function(Ye,$t){var Nn,Jt,Vn,lt,ge,Se,Ee=$t.dyn_tree,$e=$t.max_code,Qe=$t.stat_desc.static_tree,dt=$t.stat_desc.has_stree,ln=$t.stat_desc.extra_bits,Dt=$t.stat_desc.extra_base,Wt=$t.stat_desc.max_length,rn=0;for(lt=0;lt<=A;lt++)Ye.bl_count[lt]=0;for(Ee[2*Ye.heap[Ye.heap_max]+1]=0,Nn=Ye.heap_max+1;Nn<T;Nn++)Wt<(lt=Ee[2*Ee[2*(Jt=Ye.heap[Nn])+1]+1]+1)&&(lt=Wt,rn++),Ee[2*Jt+1]=lt,$e<Jt||(Ye.bl_count[lt]++,ge=0,Dt<=Jt&&(ge=ln[Jt-Dt]),Se=Ee[2*Jt],Ye.opt_len+=Se*(lt+ge),dt&&(Ye.static_len+=Se*(Qe[2*Jt+1]+ge)));if(rn!==0){do{for(lt=Wt-1;Ye.bl_count[lt]===0;)lt--;Ye.bl_count[lt]--,Ye.bl_count[lt+1]+=2,Ye.bl_count[Wt]--,rn-=2}while(0<rn);for(lt=Wt;lt!==0;lt--)for(Jt=Ye.bl_count[lt];Jt!==0;)$e<(Vn=Ye.heap[--Nn])||(Ee[2*Vn+1]!==lt&&(Ye.opt_len+=(lt-Ee[2*Vn+1])*Ee[2*Vn],Ee[2*Vn+1]=lt),Jt--)}})(U,Y),qe(_e,ot,U.bl_count)}function E(U,Y,fe){var pe,W,_e=-1,we=Y[1],xe=0,Oe=7,ot=4;for(we===0&&(Oe=138,ot=3),Y[2*(fe+1)+1]=65535,pe=0;pe<=fe;pe++)W=we,we=Y[2*(pe+1)+1],++xe<Oe&&W===we||(xe<ot?U.bl_tree[2*W]+=xe:W!==0?(W!==_e&&U.bl_tree[2*W]++,U.bl_tree[2*I]++):xe<=10?U.bl_tree[2*O]++:U.bl_tree[2*G]++,_e=W,ot=(xe=0)===we?(Oe=138,3):W===we?(Oe=6,3):(Oe=7,4))}function le(U,Y,fe){var pe,W,_e=-1,we=Y[1],xe=0,Oe=7,ot=4;for(we===0&&(Oe=138,ot=3),pe=0;pe<=fe;pe++)if(W=we,we=Y[2*(pe+1)+1],!(++xe<Oe&&W===we)){if(xe<ot)for(;ce(U,W,U.bl_tree),--xe!=0;);else W!==0?(W!==_e&&(ce(U,W,U.bl_tree),xe--),ce(U,I,U.bl_tree),ie(U,xe-3,2)):xe<=10?(ce(U,O,U.bl_tree),ie(U,xe-3,3)):(ce(U,G,U.bl_tree),ie(U,xe-11,7));_e=W,ot=(xe=0)===we?(Oe=138,3):W===we?(Oe=6,3):(Oe=7,4)}}m(ue);var ne=!1;function P(U,Y,fe,pe){ie(U,(p<<1)+(pe?1:0),3),(function(W,_e,we,xe){Le(W),he(W,we),he(W,~we),o.arraySet(W.pending_buf,W.window,_e,we,W.pending),W.pending+=we})(U,Y,fe)}a._tr_init=function(U){ne||((function(){var Y,fe,pe,W,_e,we=new Array(A+1);for(W=pe=0;W<y-1;W++)for(re[W]=pe,Y=0;Y<1<<j[W];Y++)R[pe++]=W;for(R[pe-1]=W,W=_e=0;W<16;W++)for(ue[W]=_e,Y=0;Y<1<<ee[W];Y++)Q[_e++]=W;for(_e>>=7;W<b;W++)for(ue[W]=_e<<7,Y=0;Y<1<<ee[W]-7;Y++)Q[256+_e++]=W;for(fe=0;fe<=A;fe++)we[fe]=0;for(Y=0;Y<=143;)ve[2*Y+1]=8,Y++,we[8]++;for(;Y<=255;)ve[2*Y+1]=9,Y++,we[9]++;for(;Y<=279;)ve[2*Y+1]=7,Y++,we[7]++;for(;Y<=287;)ve[2*Y+1]=8,Y++,we[8]++;for(qe(ve,x+1,we),Y=0;Y<b;Y++)q[2*Y+1]=5,q[2*Y]=Ae(Y,5);se=new L(ve,j,_+1,x,A),te=new L(q,ee,0,b,A),ye=new L(new Array(0),B,0,w,N)})(),ne=!0),U.l_desc=new V(U.dyn_ltree,se),U.d_desc=new V(U.dyn_dtree,te),U.bl_desc=new V(U.bl_tree,ye),U.bi_buf=0,U.bi_valid=0,Ce(U)},a._tr_stored_block=P,a._tr_flush_block=function(U,Y,fe,pe){var W,_e,we=0;0<U.level?(U.strm.data_type===2&&(U.strm.data_type=(function(xe){var Oe,ot=4093624447;for(Oe=0;Oe<=31;Oe++,ot>>>=1)if(1&ot&&xe.dyn_ltree[2*Oe]!==0)return u;if(xe.dyn_ltree[18]!==0||xe.dyn_ltree[20]!==0||xe.dyn_ltree[26]!==0)return d;for(Oe=32;Oe<_;Oe++)if(xe.dyn_ltree[2*Oe]!==0)return d;return u})(U)),bt(U,U.l_desc),bt(U,U.d_desc),we=(function(xe){var Oe;for(E(xe,xe.dyn_ltree,xe.l_desc.max_code),E(xe,xe.dyn_dtree,xe.d_desc.max_code),bt(xe,xe.bl_desc),Oe=w-1;3<=Oe&&xe.bl_tree[2*Z[Oe]+1]===0;Oe--);return xe.opt_len+=3*(Oe+1)+5+5+4,Oe})(U),W=U.opt_len+3+7>>>3,(_e=U.static_len+3+7>>>3)<=W&&(W=_e)):W=_e=fe+5,fe+4<=W&&Y!==-1?P(U,Y,fe,pe):U.strategy===4||_e===W?(ie(U,2+(pe?1:0),3),Ct(U,ve,q)):(ie(U,4+(pe?1:0),3),(function(xe,Oe,ot,Ye){var $t;for(ie(xe,Oe-257,5),ie(xe,ot-1,5),ie(xe,Ye-4,4),$t=0;$t<Ye;$t++)ie(xe,xe.bl_tree[2*Z[$t]+1],3);le(xe,xe.dyn_ltree,Oe-1),le(xe,xe.dyn_dtree,ot-1)})(U,U.l_desc.max_code+1,U.d_desc.max_code+1,we+1),Ct(U,U.dyn_ltree,U.dyn_dtree)),Ce(U),pe&&Le(U)},a._tr_tally=function(U,Y,fe){return U.pending_buf[U.d_buf+2*U.last_lit]=Y>>>8&255,U.pending_buf[U.d_buf+2*U.last_lit+1]=255&Y,U.pending_buf[U.l_buf+U.last_lit]=255&fe,U.last_lit++,Y===0?U.dyn_ltree[2*fe]++:(U.matches++,Y--,U.dyn_ltree[2*(R[fe]+_+1)]++,U.dyn_dtree[2*F(Y)]++),U.last_lit===U.lit_bufsize-1},a._tr_align=function(U){ie(U,2,3),ce(U,D,ve),(function(Y){Y.bi_valid===16?(he(Y,Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0):8<=Y.bi_valid&&(Y.pending_buf[Y.pending++]=255&Y.bi_buf,Y.bi_buf>>=8,Y.bi_valid-=8)})(U)}},{"../utils/common":41}],53:[function(t,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,a){(function(o){(function(u,d){if(!u.setImmediate){var m,p,y,_,x=1,b={},w=!1,T=u.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(u);A=A&&A.setTimeout?A:u,m={}.toString.call(u.process)==="[object process]"?function(I){process.nextTick(function(){N(I)})}:(function(){if(u.postMessage&&!u.importScripts){var I=!0,O=u.onmessage;return u.onmessage=function(){I=!1},u.postMessage("","*"),u.onmessage=O,I}})()?(_="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",D,!1):u.attachEvent("onmessage",D),function(I){u.postMessage(_+I,"*")}):u.MessageChannel?((y=new MessageChannel).port1.onmessage=function(I){N(I.data)},function(I){y.port2.postMessage(I)}):T&&"onreadystatechange"in T.createElement("script")?(p=T.documentElement,function(I){var O=T.createElement("script");O.onreadystatechange=function(){N(I),O.onreadystatechange=null,p.removeChild(O),O=null},p.appendChild(O)}):function(I){setTimeout(N,0,I)},A.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var O=new Array(arguments.length-1),G=0;G<O.length;G++)O[G]=arguments[G+1];var j={callback:I,args:O};return b[x]=j,m(x),x++},A.clearImmediate=k}function k(I){delete b[I]}function N(I){if(w)setTimeout(N,0,I);else{var O=b[I];if(O){w=!0;try{(function(G){var j=G.callback,ee=G.args;switch(ee.length){case 0:j();break;case 1:j(ee[0]);break;case 2:j(ee[0],ee[1]);break;case 3:j(ee[0],ee[1],ee[2]);break;default:j.apply(d,ee)}})(O)}finally{k(I),w=!1}}}}function D(I){I.source===u&&typeof I.data=="string"&&I.data.indexOf(_)===0&&N(+I.data.slice(_.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof rl<"u"?rl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Kc)),Kc.exports}var CA=SA();const sv=Rd(CA);class EA{constructor(){this.garbageKeywords=["tito luis","epublibre","digitalizado por","corregido por","maquetado por","legal","copyright","licencia","pgina de crditos","introduccin del editor","sobre este libro","epub v","v1.0","v1.1","v1.2","v2.0","edicin electrnica","todos los derechos reservados","isbn:","issn:","depsito legal","jagoba","maquetacin:","correccin:","generado con","instrucciones de uso","ndice","tabla de contenidos","table of contents","ndice de captulos","dedicatoria","agradecimientos","prefacio","notas de la edicin"],this.MAX_FRAGMENTS_PER_CHAPTER=10}async parseEpub(e){var A,k,N,D,I,O;const t=await sv.loadAsync(e),i=await((A=t.file("META-INF/container.xml"))==null?void 0:A.async("string"));if(!i)throw new Error("No es un archivo ePub vlido");const a=(k=i.match(/full-path="([^"]+)"/))==null?void 0:k[1];if(!a)throw new Error("No se pudo encontrar el manifiesto");const o=await((N=t.file(a))==null?void 0:N.async("string"));if(!o)throw new Error("No se pudo leer el manifiesto");const u=o.match(/<dc:title[^>]*>([^<]+)<\/dc:title>/),d=o.match(/<dc:creator[^>]*>([^<]+)<\/dc:creator>/),m=u?u[1]:"Libro Desconocido",p=d?d[1]:"",y=new DOMParser,_=y.parseFromString(o,"text/xml"),x={};Array.from(_.querySelectorAll("manifest > item")).forEach(G=>{x[G.getAttribute("id")||""]=G.getAttribute("href")||""});const b=Array.from(_.querySelectorAll("spine > itemref")).map(G=>{const j=G.getAttribute("idref")||"";return x[j]}),w=[],T=a.substring(0,a.lastIndexOf("/")+1);for(let G=0;G<b.length;G++){const j=b[G],ee=T+j,B=await((D=t.file(ee))==null?void 0:D.async("string"));if(B){const Z=y.parseFromString(B,"text/html");Z.querySelectorAll("script, style, nav, footer, header, hr, aside, .index, .toc").forEach(R=>R.remove());let ve=(O=(I=Z.querySelector("h1, h2, h3"))==null?void 0:I.textContent)==null?void 0:O.trim(),q=Z.body.innerText.trim();if(this.isGarbageContent(q,m,p,ve))continue;const Q=q.replace(/\r/g,"").replace(/\n{3,}/g,`

`).replace(/[ \t]+/g," ").trim();if(Q.length>100){const R=this.splitIntoManageableChunks(Q);R.length>0&&w.push({id:`ch-${G}-${Math.random().toString(36).substr(2,5)}`,title:ve||`Captulo ${w.length+1}`,content:Q,charCount:Q.length,status:"pending",segments:R})}}}return{title:m,author:p,chapters:w}}isGarbageContent(e,t,i,a){const o=e.toLowerCase(),u=(a==null?void 0:a.toLowerCase())||"",d=this.garbageKeywords.some(p=>o.includes(p.toLowerCase())||u.includes(p.toLowerCase()));if(e.length<2e3&&d)return!0;const m=e.split(`
`).filter(p=>p.trim().length>0);if(m.length>5){const p=m.filter(_=>/[\d\.]{2,}/.test(_)).length,y=m.filter(_=>_.includes("...")||_.includes("")).length;if((p+y)/m.length>.4&&e.length<5e3)return!0}return!!(e.length<500&&(o.includes(t.toLowerCase())||o.includes(i.toLowerCase()))&&m.length<10)}splitIntoManageableChunks(e){const i=e.split(/\n+/),a=[];let o="";for(const u of i)if(u.length>2e3){o&&(a.push(this.createSegment(o)),o="");let d=u;for(;d.length>0;){let m=d.slice(0,2e3);const p=m.lastIndexOf(".");p>2e3*.8&&(m=d.slice(0,p+1)),a.push(this.createSegment(m)),d=d.slice(m.length).trim()}}else o.length+u.length<2e3?o+=(o?`

`:"")+u:(a.push(this.createSegment(o)),o=u);return o.trim()&&a.push(this.createSegment(o)),a}createSegment(e){return{id:`seg-${Math.random().toString(36).substr(2,9)}`,content:e.trim(),status:"pending",charCount:e.trim().length}}}const AA=new EA,kA="LibrotecaDB",RA=1;class NA{constructor(){this.db=null}async getDB(){return this.db?this.db:new Promise((e,t)=>{const i=indexedDB.open(kA,RA);i.onupgradeneeded=a=>{const o=a.target.result;o.objectStoreNames.contains("appState")||o.createObjectStore("appState")},i.onsuccess=a=>{this.db=a.target.result,e(this.db)},i.onerror=()=>t(i.error)})}async saveState(e){const t={...e};if(e.chapters){const u=JSON.parse(JSON.stringify(e.chapters));t.chapters=await this.serializeChapters(u)}if(e.history){const u=JSON.parse(JSON.stringify(e.history));t.history=await this.serializeHistory(u)}const a=(await this.getDB()).transaction("appState","readwrite"),o=a.objectStore("appState");return new Promise((u,d)=>{a.oncomplete=()=>u(),a.onerror=()=>d(a.error),a.onabort=()=>d(new Error("Transaction aborted"));const m=Object.entries(t).filter(([p,y])=>y!==void 0);if(m.length===0){u();return}m.forEach(([p,y])=>{o.put(y,p)})})}async loadState(){const i=(await this.getDB()).transaction("appState","readonly").objectStore("appState"),a={},o=["text","projectTitle","voiceId","emotion","mode","bookTitle","bookAuthor","chapters","history","projectCharCount"];return new Promise(u=>{let d=0;o.forEach(m=>{const p=i.get(m);p.onsuccess=async()=>{let y=p.result;m==="chapters"&&y&&(y=await this.deserializeChapters(y)),m==="history"&&y&&(y=await this.deserializeHistory(y)),a[m]=y,d++,d===o.length&&u(a)},p.onerror=()=>{d++,d===o.length&&u(a)}})})}async clearAll(){(await this.getDB()).transaction("appState","readwrite").objectStore("appState").clear()}async serializeChapters(e){return Promise.all(e.map(async t=>{const i=await Promise.all((t.segments||[]).map(async a=>{if(a.audioUrl&&(a.audioUrl.startsWith("blob:")||a.audioUrl.startsWith("http")))try{const u=await(await fetch(a.audioUrl)).arrayBuffer();return{...a,audioData:u,audioUrl:null}}catch{return a}return a}));return{...t,segments:i}}))}async deserializeChapters(e){return e.map(t=>{const i=(t.segments||[]).map(a=>{if(a.audioData){const o=new Blob([a.audioData],{type:"audio/wav"});return{...a,audioUrl:URL.createObjectURL(o),audioData:null}}return a});return{...t,segments:i}})}async serializeHistory(e){return Promise.all(e.map(async t=>{if(t.audioUrl&&(t.audioUrl.startsWith("blob:")||t.audioUrl.startsWith("http")))try{const a=await(await fetch(t.audioUrl)).arrayBuffer();return{...t,audioData:a,audioUrl:null}}catch{return t}return t}))}async deserializeHistory(e){return e.map(t=>{if(t.audioData){const i=new Blob([t.audioData],{type:"audio/wav"});return{...t,audioUrl:URL.createObjectURL(i),audioData:null}}return t})}}const Ra=new NA,Ba=[{id:"Sofia",name:"Sofa",description:"Suave, emptica y calmada (Romance/Infantil)",gender:"female"},{id:"Valentina",name:"Valentina",description:"Profesional, periodstica y clara (No Ficcin)",gender:"female"},{id:"Camila",name:"Camila",description:"Dramtica, expresiva y teatral (Ficcin)",gender:"female"},{id:"Mateo",name:"Mateo",description:"Juvenil, enrgico y rpido (Aventuras)",gender:"male"},{id:"Diego",name:"Diego",description:"Estndar, firme y confiable (Clsicos)",gender:"male"},{id:"Alejandro",name:"Alejandro",description:"Profunda, grave y de impacto (Thriller)",gender:"male"},{id:"Leonardo",name:"Leonardo",description:"Heroica, vibrante y motivacional (pica)",gender:"male"},{id:"Ricardo",name:"Ricardo",description:"Voz de Anciano Sabio y Solemne (Historia)",gender:"male"},{id:"Gabriel",name:"Gabriel",description:"Misteriosa y Rasposa (Novela Negra)",gender:"male"}],ry=["Neutral","Alegre","Triste","Enojado","Misterioso","Informativo","Emocionado","Susurrante"],MA=({selectedId:r,onSelect:e})=>S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:Ba.map(t=>{const i=r===t.id,a=t.gender==="female";return S.jsxs("button",{onClick:()=>e(t.id),className:`p-4 md:p-5 rounded-2xl md:rounded-3xl border transition-all flex items-center gap-3 md:gap-4 text-left ${i?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/40 shadow-md ring-2 ring-indigo-100 dark:ring-indigo-900":"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:border-slate-300 dark:hover:border-slate-600 hover:shadow-sm"}`,children:[S.jsx("div",{className:`w-11 h-11 md:w-14 md:h-14 rounded-xl md:rounded-2xl flex-shrink-0 flex items-center justify-center text-xl md:text-2xl shadow-sm transition-colors ${i?a?"bg-pink-500 text-white":"bg-blue-600 text-white":a?"bg-pink-50 text-pink-400":"bg-blue-50 text-blue-400"}`,children:S.jsx("i",{className:`fa-solid ${a?"fa-person-dress":"fa-person"}`})}),S.jsxs("div",{className:"min-w-0",children:[S.jsx("h4",{className:`font-extrabold text-xs md:text-sm truncate ${i?"text-indigo-900 dark:text-indigo-200":"text-slate-800 dark:text-slate-200"}`,children:t.name}),S.jsx("p",{className:`text-[10px] md:text-[11px] font-medium leading-tight mt-1 line-clamp-2 ${i?"text-indigo-600/70 dark:text-indigo-300":"text-slate-500 dark:text-slate-400"}`,children:t.description}),S.jsx("div",{className:"mt-1.5 md:mt-2 flex items-center gap-1",children:S.jsx("span",{className:`text-[8px] md:text-[9px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full ${a?"bg-pink-100 text-pink-600":"bg-blue-100 text-blue-600"}`,children:a?"Narradora":"Narrador"})})]})]},t.id)})}),DA=({item:r,onDelete:e})=>S.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 p-4 rounded-2xl flex flex-col gap-3 group transition-all hover:bg-white dark:hover:bg-slate-800 hover:shadow-md",children:[S.jsxs("div",{className:"flex justify-between items-start gap-2",children:[S.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[S.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-bold",children:r.voiceName.charAt(0)}),S.jsxs("div",{className:"min-w-0",children:[S.jsx("h4",{className:"text-[11px] font-bold text-slate-900 dark:text-slate-200 truncate",children:r.voiceName}),S.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-wider",children:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx("a",{href:r.audioUrl,download:`audio-${r.id}.wav`,className:"text-slate-400 hover:text-indigo-600 p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",title:"Descargar",children:S.jsx("i",{className:"fa-solid fa-download text-xs"})}),e&&S.jsx("button",{onClick:()=>e(r.id,r.storagePath),className:"text-slate-400 hover:text-red-600 p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-red-900/30 transition-colors",title:"Eliminar permanentemente",children:S.jsx("i",{className:"fa-solid fa-trash text-xs"})})]})]}),S.jsxs("p",{className:"text-[10px] text-slate-600 dark:text-slate-400 leading-relaxed line-clamp-2 italic",children:['"',r.text,'"']}),S.jsx("audio",{controls:!0,src:r.audioUrl,className:"w-full h-8 opacity-70 hover:opacity-100"})]}),IA=()=>{const[r,e]=ke.useState([]),[t,i]=ke.useState(!1),[a,o]=ke.useState(0),u=ke.useRef(null),d=_=>{if(_.target.files){const x=Array.from(_.target.files).map(b=>({id:Math.random().toString(36).substr(2,9),file:b,name:b.name}));e(b=>[...b,...x])}u.current&&(u.current.value="")},m=(_,x)=>{if(x==="up"&&_===0||x==="down"&&_===r.length-1)return;const b=[...r],w=x==="up"?_-1:_+1;[b[_],b[w]]=[b[w],b[_]],e(b)},p=_=>{e(r.filter(x=>x.id!==_))},y=async()=>{if(r.length!==0){i(!0),o(0);try{const _=new(window.AudioContext||window.webkitAudioContext),x=[];for(let k=0;k<r.length;k++){const D=await r[k].file.arrayBuffer(),I=await _.decodeAudioData(D);x.push(I),o((k+1)/r.length*80)}const b=Pd(x,_);o(90);const w=zd(b);o(100);const T=URL.createObjectURL(w),A=document.createElement("a");A.href=T,A.download=`Audio_Fusionado_${Date.now()}.wav`,document.body.appendChild(A),A.click(),document.body.removeChild(A)}catch(_){console.error("Error merging files:",_),alert("Error al procesar los archivos. Asegrate de que son formatos de audio vlidos.")}finally{i(!1),o(0)}}};return S.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-2xl md:rounded-3xl border border-slate-200 shadow-sm space-y-6",children:[S.jsxs("div",{className:"text-center space-y-2",children:[S.jsx("div",{className:"w-16 h-16 bg-purple-100 text-purple-600 rounded-2xl flex items-center justify-center mx-auto text-3xl mb-4",children:S.jsx("i",{className:"fa-solid fa-layer-group"})}),S.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Estudio de Fusin"}),S.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Sube mltiples audios, ordnalos y crea un track maestro nico."})]}),S.jsxs("div",{className:"bg-slate-50 rounded-2xl border border-slate-200 border-dashed p-8 text-center space-y-4",children:[S.jsx("input",{type:"file",ref:u,onChange:d,multiple:!0,accept:"audio/*",className:"hidden"}),S.jsxs("button",{onClick:()=>{var _;return(_=u.current)==null?void 0:_.click()},className:"px-6 py-3 bg-white text-purple-600 font-bold rounded-xl shadow-sm border border-slate-200 hover:border-purple-400 hover:shadow-md transition-all flex items-center gap-2 mx-auto",children:[S.jsx("i",{className:"fa-solid fa-cloud-arrow-up"}),S.jsx("span",{children:"Seleccionar Audios"})]}),S.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Soporta MP3, WAV, M4A"})]}),r.length>0&&S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"flex items-center justify-between px-2",children:[S.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:["Secuencia de Reproduccin (",r.length,")"]}),S.jsx("button",{onClick:()=>e([]),className:"text-[10px] text-red-500 font-bold hover:underline",children:"Limpiar Todo"})]}),S.jsx("div",{className:"space-y-2",children:r.map((_,x)=>S.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 flex items-center gap-3 shadow-sm group hover:border-purple-200 transition-colors",children:[S.jsx("span",{className:"w-6 h-6 bg-slate-100 text-slate-500 rounded-full flex items-center justify-center text-[10px] font-bold shrink-0",children:x+1}),S.jsxs("div",{className:"min-w-0 flex-1",children:[S.jsx("p",{className:"text-xs font-bold text-slate-700 truncate",children:_.name}),S.jsxs("p",{className:"text-[10px] text-slate-400",children:[(_.file.size/1024/1024).toFixed(2)," MB"]})]}),S.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[S.jsx("button",{onClick:()=>m(x,"up"),disabled:x===0,className:"w-7 h-7 flex items-center justify-center rounded-lg hover:bg-slate-100 text-slate-400 hover:text-purple-600 disabled:opacity-30 transition-colors",children:S.jsx("i",{className:"fa-solid fa-chevron-up"})}),S.jsx("button",{onClick:()=>m(x,"down"),disabled:x===r.length-1,className:"w-7 h-7 flex items-center justify-center rounded-lg hover:bg-slate-100 text-slate-400 hover:text-purple-600 disabled:opacity-30 transition-colors",children:S.jsx("i",{className:"fa-solid fa-chevron-down"})}),S.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),S.jsx("button",{onClick:()=>p(_.id),className:"w-7 h-7 flex items-center justify-center rounded-lg hover:bg-red-50 text-slate-400 hover:text-red-500 transition-colors",children:S.jsx("i",{className:"fa-solid fa-xmark"})})]})]},_.id))})]}),S.jsx("button",{onClick:y,disabled:t||r.length<2,className:`w-full py-4 rounded-xl font-black text-sm uppercase tracking-widest transition-all shadow-lg flex items-center justify-center gap-3 ${t||r.length<2?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:shadow-xl hover:scale-[1.01]"}`,children:t?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-circle-notch animate-spin"}),S.jsxs("span",{children:["Fusionando (",Math.round(a),"%)..."]})]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-wand-magic-sparkles"}),S.jsx("span",{children:"Fusionar y Descargar Master"})]})})]})};class ys{constructor(){}static getInstance(){return ys.instance||(ys.instance=new ys),ys.instance}async generateImage(e,t,i){var d,m,p;const a=new iv({apiKey:"PLACEHOLDER_API_KEY"}),u=["1:1","4:3","16:9","9:16"].includes(t)?t:"1:1";try{const _=(d=(await a.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:`TASK: Professional aesthetic artistic visual for a book cover.
              SUBJECT: ${e}. 
              ARTISTIC STYLE: ${i}.
              
              STRICT NEGATIVE PROMPT:
              - NO TEXT, NO LETTERS, NO NUMBERS, NO SYMBOLS, NO WORDS.
              - NO WATERMARKS, NO LOGOS, NO SIGNATURES.
              - NO TYPOGRAPHY, NO FONTS.
              
              STRICT POSITIVE PROMPT:
              - Clean pictorial composition.
              - 100% Artistic representation only.
              - High definition, masterpiece quality.
              - Style should strictly be ${i}.`}]},config:{imageConfig:{aspectRatio:u}}})).candidates)==null?void 0:d[0];if(!((m=_==null?void 0:_.content)!=null&&m.parts))throw new Error("La IA no devolvi ninguna imagen. Intenta con otro prompt.");for(const x of _.content.parts)if(x.inlineData){const b=x.inlineData.data;if(!b||b.length<100)throw new Error("La imagen recibida es corrupta o est vaca.");return`data:image/png;base64,${b}`}throw new Error("No se pudo extraer la imagen de la respuesta de la IA.")}catch(y){throw console.error("Gemini Image Generation Error:",y),(p=y.message)!=null&&p.includes("safety")?new Error("El contenido fue bloqueado por filtros de seguridad. Prueba con un concepto distinto."):new Error(y.message||"Error al conectar con el servidor de arte.")}}}const OA=({selected:r,onSelect:e,disabled:t})=>{const i=[{label:"Cuadrado",value:"1:1",icon:"M4 4h16v16H4z"},{label:"Paisaje",value:"4:3",icon:"M4 6h16v12H4z"},{label:"Cine",value:"16:9",icon:"M2 8h20v8H2z"},{label:"Retrato",value:"9:16",icon:"M8 2h8v20H8z"}];return S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 md:gap-6",children:i.map(a=>S.jsxs("button",{disabled:t,onClick:()=>e(a.value),className:`relative overflow-hidden flex flex-col items-center justify-center p-4 rounded-[2rem] border-2 transition-all duration-300 group aspect-square sm:aspect-auto ${r===a.value?"border-transparent bg-gradient-to-br from-[#a78bfa] to-[#8b5cf6] text-white shadow-xl shadow-purple-200 dark:shadow-none scale-105 z-10":"border-white bg-white dark:bg-slate-800 dark:border-slate-700 text-[#94a3b8] dark:text-slate-500 hover:border-purple-100 dark:hover:border-purple-900 hover:text-purple-600 dark:hover:text-purple-400 shadow-sm hover:shadow-md"} ${t?"opacity-50 cursor-not-allowed":"cursor-pointer active:scale-95"}`,children:[r===a.value&&S.jsx("div",{className:"absolute top-0 right-0 p-3",children:S.jsx("svg",{className:"w-4 h-4 text-white/50",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),S.jsx("svg",{className:`w-6 h-6 mb-2 transition-all duration-500 ${r===a.value?"text-white scale-110 rotate-3":"text-purple-200 dark:text-slate-600 group-hover:text-purple-400 dark:group-hover:text-purple-400 group-hover:scale-110"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:a.icon})}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest leading-none truncate w-full px-1",children:a.label}),S.jsx("span",{className:`text-[9px] mt-1.5 font-bold uppercase tracking-tighter transition-opacity ${r===a.value?"text-white/70":"text-gray-300 dark:text-slate-600"}`,children:a.value})]},a.value))})},UA=({selected:r,onSelect:e,disabled:t})=>{const i=["Cinematic","Abstract Art","Oil Painting","Minimalist","Fantasy","Dark Noir"];return S.jsxs("div",{className:"space-y-4",children:[S.jsx("label",{className:"block text-[10px] font-black text-[#94a3b8] dark:text-slate-500 uppercase tracking-widest mb-4",children:"Estilo Visual"}),S.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.map(a=>S.jsx("button",{disabled:t,onClick:()=>e(a),className:`py-3.5 px-6 rounded-2xl text-[12px] font-bold transition-all duration-200 border ${r===a?"bg-[#6366f1] border-[#6366f1] text-white shadow-lg shadow-indigo-100 dark:shadow-none":"bg-white dark:bg-slate-800 border-[#f1f5f9] dark:border-slate-700 text-[#64748b] dark:text-slate-400 hover:border-[#6366f1]/30 hover:bg-indigo-50/30 dark:hover:bg-slate-700"} ${t?"opacity-50 cursor-not-allowed":"cursor-pointer active:scale-95"}`,children:a},a))})]})},LA=({image:r,isGenerating:e,isDark:t})=>{if(e)return S.jsxs("div",{className:"w-full min-h-[550px] bg-[#fdfaff] dark:bg-slate-900 flex flex-col items-center justify-center relative overflow-hidden transition-all duration-500 rounded-[3rem]",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50/50 via-white to-purple-50/50 dark:from-indigo-900/20 dark:via-slate-900 dark:to-purple-900/20 animate-pulse"}),S.jsxs("div",{className:"relative flex flex-col items-center z-10",children:[S.jsxs("div",{className:"w-24 h-24 relative mb-12",children:[S.jsx("div",{className:"absolute inset-0 border-[6px] border-purple-100 dark:border-purple-900 rounded-full"}),S.jsx("div",{className:"absolute inset-0 border-[6px] border-indigo-500 rounded-full border-t-transparent animate-spin"}),S.jsx("div",{className:"absolute inset-4 border-[4px] border-purple-200 dark:border-purple-800 rounded-full border-b-transparent animate-[spin_1.5s_linear_infinite_reverse]"})]}),S.jsxs("div",{className:"flex flex-col items-center gap-2",children:[S.jsx("p",{className:"text-[13px] font-black uppercase tracking-[0.6em] text-indigo-600 dark:text-indigo-400 animate-pulse text-center px-4",children:"Esculpiendo Arte"}),S.jsxs("div",{className:"flex gap-1.5 mt-2",children:[S.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),S.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),S.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"})]})]})]}),S.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-purple-100/30 dark:bg-purple-900/20 rounded-full blur-3xl"}),S.jsx("div",{className:"absolute bottom-10 right-10 w-40 h-40 bg-indigo-100/30 dark:bg-indigo-900/20 rounded-full blur-3xl"})]});if(!r)return S.jsxs("div",{className:"w-full min-h-[550px] bg-[#fafbfc] dark:bg-slate-900 flex flex-col items-center justify-center p-20 text-center rounded-[3rem]",children:[S.jsx("div",{className:"w-24 h-24 border-2 border-dashed border-gray-200 dark:border-slate-700 rounded-[2.8rem] flex items-center justify-center text-gray-200 dark:text-slate-600 mb-8 bg-white dark:bg-slate-800 shadow-sm transition-all duration-500",children:S.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.5em] text-gray-300 dark:text-slate-500",children:"Esperando Inspiracin"})]});const i=a=>{a.stopPropagation();const o=document.createElement("a");o.href=r.url,o.download=`libroteca-${r.id}.png`,document.body.appendChild(o),o.click(),document.body.removeChild(o)};return S.jsxs("div",{className:"relative group bg-neutral-950 overflow-hidden shadow-2xl transition-all duration-700 ease-in-out min-h-[550px] flex items-center justify-center rounded-[3rem]",children:[S.jsxs("div",{className:"relative w-full flex justify-center items-center",children:[S.jsx("img",{src:r.url,alt:r.prompt,className:"max-w-full h-auto max-h-[85vh] object-contain transition-all duration-[8000ms] group-hover:scale-105 group-hover:opacity-60 ease-out"}),(r.title||r.subtitle)&&S.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 md:p-16 text-center pointer-events-none select-none",children:S.jsxs("div",{className:"bg-black/25 backdrop-blur-2xl p-8 md:p-12 rounded-[3.5rem] border border-white/10 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.6)] transform transition-all duration-1000 group-hover:scale-110 group-hover:bg-black/15",children:[r.title&&S.jsx("h2",{className:"text-white text-3xl md:text-5xl lg:text-6xl font-extralight uppercase tracking-[0.3em] leading-tight drop-shadow-2xl",children:r.title}),r.title&&r.subtitle&&S.jsx("div",{className:"w-12 md:w-20 h-[1.5px] bg-gradient-to-r from-transparent via-indigo-400/70 to-transparent my-6 md:my-10 mx-auto opacity-60"}),r.subtitle&&S.jsx("p",{className:"text-indigo-100 text-[10px] md:text-xs font-black uppercase tracking-[0.5em] opacity-80 drop-shadow-lg",children:r.subtitle})]})})]}),S.jsx("div",{className:"absolute top-8 right-8 flex gap-3 translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out z-20",children:S.jsx("button",{onClick:i,className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-white/95 text-indigo-600 hover:bg-indigo-600 hover:text-white transition-all shadow-2xl active:scale-90 border border-white",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})}),S.jsxs("div",{className:"absolute bottom-8 left-8 right-8 flex items-center justify-between pointer-events-none opacity-0 group-hover:opacity-100 transition-all duration-700 delay-200 z-20",children:[S.jsxs("div",{className:"bg-black/40 backdrop-blur-xl px-6 py-2 rounded-full text-[9px] font-black text-white/90 uppercase tracking-widest border border-white/10",children:[r.visualStyle,"  ",r.aspectRatio]}),S.jsxs("div",{className:"text-[9px] font-black text-white/30 uppercase tracking-[0.3em]",children:["ID: ",r.id]})]})]})},PA=()=>{const[r,e]=ke.useState(""),[t,i]=ke.useState(""),[a,o]=ke.useState(""),[u,d]=ke.useState("1:1"),[m,p]=ke.useState("Cinematic"),[y,_]=ke.useState({isGenerating:!1,error:null,currentImage:null,history:[]});ke.useEffect(()=>{const b=localStorage.getItem("libroteca_studio_history_v2");if(b)try{const w=JSON.parse(b);_(T=>({...T,history:Array.isArray(w)?w:[]}))}catch(w){console.error("Error loading history",w)}},[]),ke.useEffect(()=>{y.history.length>0&&localStorage.setItem("libroteca_studio_history_v2",JSON.stringify(y.history.slice(0,20)))},[y.history]);const x=async()=>{if(!(!r.trim()||y.isGenerating)){_(b=>({...b,isGenerating:!0,error:null}));try{const w=await ys.getInstance().generateImage(r,u,m),T={id:Math.random().toString(36).substr(2,6).toUpperCase(),url:w,prompt:r,title:t,subtitle:a,aspectRatio:u,visualStyle:m,timestamp:Date.now()};_(A=>({...A,isGenerating:!1,currentImage:T,history:[T,...A.history]}))}catch(b){console.error("Generation failed:",b),_(w=>({...w,isGenerating:!1,error:b.message||"Fallo en la conexin creativa."}))}}};return S.jsxs("div",{className:"bg-[#f8fafc] dark:bg-slate-900 font-['Inter'] selection:bg-indigo-100 dark:selection:bg-indigo-900 selection:text-indigo-900 dark:selection:text-indigo-100 rounded-[3rem] overflow-hidden transition-colors duration-300",children:[S.jsx("div",{className:"max-w-[1600px] mx-auto w-full p-6 md:p-10",children:S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 items-start",children:[S.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[S.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[3.5rem] border border-[#f1f5f9] dark:border-slate-700 p-6 md:p-12 shadow-[0_8px_40px_rgba(0,0,0,0.02)] transition-all hover:shadow-[0_8px_40px_rgba(0,0,0,0.05)]",children:[S.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[S.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#a78bfa] to-[#8b5cf6] rounded-[2rem] flex items-center justify-center text-white shadow-xl shadow-purple-200 dark:shadow-none",children:S.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-[#1e293b] dark:text-white tracking-tight",children:"Estudio Creativo"}),S.jsx("p",{className:"text-[11px] text-[#8b5cf6] dark:text-indigo-400 font-extrabold uppercase tracking-widest mt-1",children:"Generacin de Portadas IA"})]})]}),S.jsxs("div",{className:"space-y-12",children:[S.jsxs("div",{className:"bg-[#fcfdfe] dark:bg-slate-900/50 p-6 md:p-10 rounded-[3rem] border border-[#f1f5f9] dark:border-slate-700 transition-all focus-within:ring-4 focus-within:ring-indigo-50/50 dark:focus-within:ring-indigo-900/30 focus-within:bg-white dark:focus-within:bg-slate-800 focus-within:border-indigo-200 dark:focus-within:border-indigo-700 shadow-inner",children:[S.jsx("label",{className:"block text-[10px] font-black text-[#94a3b8] dark:text-slate-500 uppercase tracking-widest mb-4 px-2",children:"Concepto Visual"}),S.jsx("textarea",{value:r,onChange:b=>e(b.target.value),className:"w-full bg-transparent border-none outline-none text-lg font-medium text-[#334155] dark:text-slate-200 placeholder:text-[#cbd5e1] dark:placeholder:text-slate-600 min-h-[120px] resize-none leading-relaxed px-2",placeholder:"Describe el alma de tu obra para la IA..."}),y.error&&S.jsxs("div",{className:"mt-6 p-5 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-[1.5rem] flex items-center gap-4 text-red-600 dark:text-red-400 text-xs font-bold animate-in fade-in slide-in-from-top-2 duration-300",children:[S.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-800/30 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),y.error]}),S.jsxs("div",{className:"mt-10 grid grid-cols-1 md:grid-cols-2 gap-10 items-end border-t border-[#f1f5f9] dark:border-slate-700 pt-10",children:[S.jsx(UA,{selected:m,onSelect:p,disabled:y.isGenerating}),S.jsx("div",{className:"flex flex-col",children:S.jsxs("button",{onClick:x,disabled:y.isGenerating||!r.trim(),className:"relative overflow-hidden group bg-gradient-to-br from-[#6366f1] to-[#8b5cf6] text-white px-8 py-6 rounded-full text-[14px] font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 disabled:opacity-50 shadow-[0_12px_32px_-4px_rgba(99,102,241,0.4)] transition-all hover:shadow-[0_16px_40px_-4px_rgba(99,102,241,0.5)] hover:-translate-y-1 active:translate-y-0 active:scale-95 border border-white/20",children:[S.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-in-out"}),y.isGenerating?S.jsx("div",{className:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full animate-spin"}):S.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"})}),S.jsx("span",{className:"relative z-10",children:y.isGenerating?"Revelando...":"Generar Arte IA"})]})})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[S.jsxs("div",{className:"p-8 bg-white dark:bg-slate-800 rounded-[2.5rem] border border-[#f1f5f9] dark:border-slate-700 shadow-sm hover:border-indigo-200 dark:hover:border-indigo-700 transition-all group",children:[S.jsx("label",{className:"block text-[10px] font-black text-[#94a3b8] dark:text-slate-500 uppercase tracking-widest mb-2 group-hover:text-indigo-400 dark:group-hover:text-indigo-400 transition-colors",children:"Ttulo Principal"}),S.jsx("input",{type:"text",value:t,onChange:b=>i(b.target.value),className:"w-full bg-transparent border-none outline-none text-xl font-black text-[#1e293b] dark:text-white tracking-tight placeholder:text-slate-200 dark:placeholder:text-slate-700",placeholder:"Ej: La Metamorfosis"})]}),S.jsxs("div",{className:"p-8 bg-white dark:bg-slate-800 rounded-[2.5rem] border border-[#f1f5f9] dark:border-slate-700 shadow-sm hover:border-indigo-200 dark:hover:border-indigo-700 transition-all group",children:[S.jsx("label",{className:"block text-[10px] font-black text-[#94a3b8] dark:text-slate-500 uppercase tracking-widest mb-2 group-hover:text-indigo-400 dark:group-hover:text-indigo-400 transition-colors",children:"Bajada o Autor"}),S.jsx("input",{type:"text",value:a,onChange:b=>o(b.target.value),className:"w-full bg-transparent border-none outline-none text-xl font-bold text-[#64748b] dark:text-slate-400 placeholder:text-slate-200 dark:placeholder:text-slate-700",placeholder:"Ej: Franz Kafka"})]})]}),S.jsxs("div",{className:"p-8 md:p-12 bg-[#fcfdfe] dark:bg-slate-900/50 rounded-[3.5rem] border border-[#f1f5f9] dark:border-slate-700 shadow-inner",children:[S.jsx("label",{className:"block text-[11px] font-black text-[#94a3b8] dark:text-slate-500 uppercase tracking-[0.4em] mb-10 text-center",children:"Relacin de Aspecto"}),S.jsx(OA,{selected:u,onSelect:d,disabled:y.isGenerating})]})]})]}),S.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-[3.5rem] overflow-hidden border border-[#f1f5f9] dark:border-slate-700 shadow-xl shadow-gray-100/50 dark:shadow-none min-h-[550px] flex flex-col",children:S.jsx(LA,{image:y.currentImage,isGenerating:y.isGenerating,isDark:!1})})]}),S.jsx("div",{className:"lg:col-span-4 lg:sticky lg:top-36 h-fit",children:S.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[3rem] border border-[#f1f5f9] dark:border-slate-700 p-8 flex flex-col max-h-[calc(100vh-180px)] shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[S.jsx("div",{className:"flex items-center justify-between mb-8",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.2em] text-[#1e293b] dark:text-white",children:"Galera Personal"}),S.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-[10px] font-black px-4 py-1.5 rounded-full shadow-lg shadow-indigo-100 dark:shadow-none",children:y.history.length})]})}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1",children:S.jsxs("div",{className:"space-y-6 py-4 px-2",children:[y.history.map(b=>{var w;return S.jsx("div",{onClick:()=>{_(T=>({...T,currentImage:b,error:null})),i(b.title),o(b.subtitle),e(b.prompt),d(b.aspectRatio),p(b.visualStyle||"Cinematic")},className:`p-6 rounded-[2.5rem] border-2 cursor-pointer transition-all duration-300 group relative ${((w=y.currentImage)==null?void 0:w.id)===b.id?"bg-gradient-to-br from-[#f8faff] to-[#fcfaff] dark:from-slate-800/80 dark:to-slate-800 border-indigo-200 dark:border-indigo-800 shadow-[0_15px_30px_-5px_rgba(99,102,241,0.15)] scale-[1.02]":"bg-white dark:bg-slate-800 border-transparent hover:border-indigo-100 dark:hover:border-slate-600 hover:bg-slate-50/50 dark:hover:bg-slate-700/50"}`,children:S.jsxs("div",{className:"flex gap-5 items-center",children:[S.jsx("div",{className:"w-16 h-16 bg-[#f1f5f9] dark:bg-slate-700 rounded-2xl overflow-hidden flex-shrink-0 shadow-sm border border-white/50 dark:border-slate-600",children:S.jsx("img",{src:b.url,className:"w-full h-full object-cover group-hover:scale-125 transition-transform duration-[4000ms]",alt:""})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"flex items-center justify-between",children:S.jsx("h4",{className:"text-[14px] font-black uppercase tracking-tight truncate text-[#1e293b] dark:text-white",children:b.title||"Proyecto Sin Nombre"})}),S.jsxs("p",{className:"text-[10px] text-[#94a3b8] dark:text-slate-500 font-bold uppercase mt-1",children:[new Date(b.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",b.visualStyle||"Estilo Libre"]})]})]})},b.id)}),y.history.length===0&&S.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-[#cbd5e1] dark:text-slate-600 border-2 border-dashed rounded-[3rem] border-[#f1f5f9] dark:border-slate-700 bg-slate-50/30 dark:bg-slate-900/20",children:[S.jsx("svg",{className:"w-12 h-12 mb-5 opacity-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),S.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.4em] opacity-40",children:"Sin Producciones"})]})]})})]})})]})}),S.jsx("footer",{className:"py-14 text-center text-[11px] font-black text-[#cbd5e1] dark:text-slate-600 uppercase tracking-[1em] mt-auto",children:"Libroteca Studio  2025"})]})};function Dl(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(t[i[a]]=r[i[a]]);return t}function zA(r,e,t,i){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(y){try{p(i.next(y))}catch(_){u(_)}}function m(y){try{p(i.throw(y))}catch(_){u(_)}}function p(y){y.done?o(y.value):a(y.value).then(d,m)}p((i=i.apply(r,e||[])).next())})}const BA=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Bd extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class VA extends Bd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sy extends Bd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ay extends Bd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _d;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(_d||(_d={}));class qA{constructor(e,{headers:t={},customFetch:i,region:a=_d.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=BA(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return zA(this,arguments,void 0,function*(t,i={}){var a;let o,u;try{const{headers:d,method:m,body:p,signal:y,timeout:_}=i;let x={},{region:b}=i;b||(b=this.region);const w=new URL(`${this.url}/${t}`);b&&b!=="any"&&(x["x-region"]=b,w.searchParams.set("forceFunctionRegion",b));let T;p&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",T=p):typeof p=="string"?(x["Content-Type"]="text/plain",T=p):typeof FormData<"u"&&p instanceof FormData?T=p:(x["Content-Type"]="application/json",T=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?T=JSON.stringify(p):T=p;let A=y;_&&(u=new AbortController,o=setTimeout(()=>u.abort(),_),y?(A=u.signal,y.addEventListener("abort",()=>u.abort())):A=u.signal);const k=yield this.fetch(w.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:T,signal:A}).catch(O=>{throw new VA(O)}),N=k.headers.get("x-relay-error");if(N&&N==="true")throw new sy(k);if(!k.ok)throw new ay(k);let D=((a=k.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),I;return D==="application/json"?I=yield k.json():D==="application/octet-stream"||D==="application/pdf"?I=yield k.blob():D==="text/event-stream"?I=k:D==="multipart/form-data"?I=yield k.formData():I=yield k.text(),{data:I,error:null,response:k}}catch(d){return{data:null,error:d,response:d instanceof ay||d instanceof sy?d.context:void 0}}finally{o&&clearTimeout(o)}})}}var GA=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},FA=class{constructor(r){var e,t,i;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(e=r.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=r.signal,this.isMaybeSingle=(t=r.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(i=r.urlLengthLimit)!==null&&i!==void 0?i:8e3,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,e){return this.headers=new Headers(this.headers),this.headers.set(r,e),this}then(r,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let u=null,d=null,m=null,p=o.status,y=o.statusText;if(o.ok){var _,x;if(t.method!=="HEAD"){var b;const k=await o.text();k===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((b=t.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=k:d=JSON.parse(k))}const T=(_=t.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),A=(x=o.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");T&&A&&A.length>1&&(m=parseInt(A[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,p=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var w;const T=await o.text();try{u=JSON.parse(T),Array.isArray(u)&&o.status===404&&(d=[],u=null,p=200,y="OK")}catch{o.status===404&&T===""?(p=204,y="No Content"):u={message:T}}if(u&&t.isMaybeSingle&&(!(u==null||(w=u.details)===null||w===void 0)&&w.includes("0 rows"))&&(u=null,p=200,y="OK"),u&&t.shouldThrowOnError)throw new GA(u)}return{error:u,data:d,count:m,status:p,statusText:y}});return this.shouldThrowOnError||(a=a.catch(o=>{var u;let d="",m="",p="";const y=o==null?void 0:o.cause;if(y){var _,x,b,w;const k=(_=y==null?void 0:y.message)!==null&&_!==void 0?_:"",N=(x=y==null?void 0:y.code)!==null&&x!==void 0?x:"";d=`${(b=o==null?void 0:o.name)!==null&&b!==void 0?b:"FetchError"}: ${o==null?void 0:o.message}`,d+=`

Caused by: ${(w=y==null?void 0:y.name)!==null&&w!==void 0?w:"Error"}: ${k}`,N&&(d+=` (${N})`),y!=null&&y.stack&&(d+=`
${y.stack}`)}else{var T;d=(T=o==null?void 0:o.stack)!==null&&T!==void 0?T:""}const A=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(p="",m="Request was aborted (timeout or manual cancellation)",A>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${A} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",m="HTTP headers exceeded server limits (typically 16KB)",A>this.urlLengthLimit&&(m+=`. Your request URL is ${A} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=o==null?void 0:o.name)!==null&&u!==void 0?u:"FetchError"}: ${o==null?void 0:o.message}`,details:d,hint:m,code:p},data:null,count:null,status:0,statusText:""}})),a.then(r,e)}returns(){return this}overrideTypes(){return this}},HA=class extends FA{select(r){let e=!1;const t=(r??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:e=!0,nullsFirst:t,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",u=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${u?`${u},`:""}${r}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:e,referencedTable:t=e}={}){const i=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(i,`${r}`),this}range(r,e,{foreignTable:t,referencedTable:i=t}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${r}`),this.url.searchParams.set(o,`${e-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:e=!1,settings:t=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var u;const d=[r?"analyze":null,e?"verbose":null,t?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${m}"; options=${d};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const oy=new RegExp("[,()]");var hs=class extends HA{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}regexMatch(r,e){return this.url.searchParams.append(r,`match.${e}`),this}regexIMatch(r,e){return this.url.searchParams.append(r,`imatch.${e}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}isDistinct(r,e){return this.url.searchParams.append(r,`isdistinct.${e}`),this}in(r,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&oy.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(r,`in.(${t})`),this}notIn(r,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&oy.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(r,`not.in.(${t})`),this}contains(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return typeof e=="string"?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:t,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=t===void 0?"":`(${t})`;return this.url.searchParams.append(r,`${a}fts${o}.${e}`),this}match(r){return Object.entries(r).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(r,e,t){return this.url.searchParams.append(r,`not.${e}.${t}`),this}or(r,{foreignTable:e,referencedTable:t=e}={}){const i=t?`${t}.or`:"or";return this.url.searchParams.append(i,`(${r})`),this}filter(r,e,t){return this.url.searchParams.append(r,`${e}.${t}`),this}},jA=class{constructor(r,{headers:e={},schema:t,fetch:i,urlLengthLimit:a=8e3}){this.url=r,this.headers=new Headers(e),this.schema=t,this.fetch=i,this.urlLengthLimit=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(r,e){const{head:t=!1,count:i}=e??{},a=t?"HEAD":"GET";let o=!1;const u=(r??"*").split("").map(p=>/\s/.test(p)&&!o?"":(p==='"'&&(o=!o),p)).join(""),{url:d,headers:m}=this.cloneRequestState();return d.searchParams.set("select",u),i&&m.append("Prefer",`count=${i}`),new hs({method:a,url:d,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(r,{count:e,defaultToNull:t=!0}={}){var i;const a="POST",{url:o,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),t||u.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(d.length>0){const m=[...new Set(d)].map(p=>`"${p}"`);o.searchParams.set("columns",m.join(","))}}return new hs({method:a,url:o,headers:u,schema:this.schema,body:r,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(r,{onConflict:e,ignoreDuplicates:t=!1,count:i,defaultToNull:a=!0}={}){var o;const u="POST",{url:d,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&d.searchParams.set("on_conflict",e),i&&m.append("Prefer",`count=${i}`),a||m.append("Prefer","missing=default"),Array.isArray(r)){const p=r.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(p.length>0){const y=[...new Set(p)].map(_=>`"${_}"`);d.searchParams.set("columns",y.join(","))}}return new hs({method:u,url:d,headers:m,schema:this.schema,body:r,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(r,{count:e}={}){var t;const i="PATCH",{url:a,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new hs({method:i,url:a,headers:o,schema:this.schema,body:r,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:r}={}){var e;const t="DELETE",{url:i,headers:a}=this.cloneRequestState();return r&&a.append("Prefer",`count=${r}`),new hs({method:t,url:i,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Va(r){"@babel/helpers - typeof";return Va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(r)}function $A(r,e){if(Va(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(Va(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function YA(r){var e=$A(r,"string");return Va(e)=="symbol"?e:e+""}function KA(r,e,t){return(e=YA(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ly(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function ll(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ly(Object(t),!0).forEach(function(i){KA(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ly(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var ZA=class av{constructor(e,{headers:t={},schema:i,fetch:a,timeout:o,urlLengthLimit:u=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=i,this.urlLengthLimit=u;const d=a??globalThis.fetch;o!==void 0&&o>0?this.fetch=(m,p)=>{const y=new AbortController,_=setTimeout(()=>y.abort(),o),x=p==null?void 0:p.signal;if(x){if(x.aborted)return clearTimeout(_),d(m,p);const b=()=>{clearTimeout(_),y.abort()};return x.addEventListener("abort",b,{once:!0}),d(m,ll(ll({},p),{},{signal:y.signal})).finally(()=>{clearTimeout(_),x.removeEventListener("abort",b)})}return d(m,ll(ll({},p),{},{signal:y.signal})).finally(()=>clearTimeout(_))}:this.fetch=d}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new jA(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new av(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:i=!1,get:a=!1,count:o}={}){var u;let d;const m=new URL(`${this.url}/rpc/${e}`);let p;const y=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(y)),_=i&&Object.values(t).some(y);_?(d="POST",p=t):i||a?(d=i?"HEAD":"GET",Object.entries(t).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{m.searchParams.append(b,w)})):(d="POST",p=t);const x=new Headers(this.headers);return _?x.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&x.set("Prefer",`count=${o}`),new hs({method:d,url:m,headers:x,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class JA{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const i=t.versions;if(i&&i.node){const a=i.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const WA="2.94.0",XA=`realtime-js/${WA}`,QA="1.0.0",ov="2.0.0",uy=ov,bd=1e4,ek=1e3,tk=100;var Vi;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Vi||(Vi={}));var Ut;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Ut||(Ut={}));var zn;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(zn||(zn={}));var xd;(function(r){r.websocket="websocket"})(xd||(xd={}));var vr;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(vr||(vr={}));class nk{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,i;const a=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,i;const a=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,t,i){var a,o;const u=e.topic,d=(a=e.ref)!==null&&a!==void 0?a:"",m=(o=e.join_ref)!==null&&o!==void 0?o:"",p=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+d.length+u.length+p.length+_.length,b=new ArrayBuffer(this.HEADER_LENGTH+x);let w=new DataView(b),T=0;w.setUint8(T++,this.KINDS.userBroadcastPush),w.setUint8(T++,m.length),w.setUint8(T++,d.length),w.setUint8(T++,u.length),w.setUint8(T++,p.length),w.setUint8(T++,_.length),w.setUint8(T++,t),Array.from(m,k=>w.setUint8(T++,k.charCodeAt(0))),Array.from(d,k=>w.setUint8(T++,k.charCodeAt(0))),Array.from(u,k=>w.setUint8(T++,k.charCodeAt(0))),Array.from(p,k=>w.setUint8(T++,k.charCodeAt(0))),Array.from(_,k=>w.setUint8(T++,k.charCodeAt(0)));var A=new Uint8Array(b.byteLength+i.byteLength);return A.set(new Uint8Array(b),0),A.set(new Uint8Array(i),b.byteLength),A.buffer}decode(e,t){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return t(i)}if(typeof e=="string"){const i=JSON.parse(e),[a,o,u,d,m]=i;return t({join_ref:a,ref:o,topic:u,event:d,payload:m})}return t({})}_binaryDecode(e){const t=new DataView(e),i=t.getUint8(0),a=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,i){const a=t.getUint8(1),o=t.getUint8(2),u=t.getUint8(3),d=t.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(e.slice(m,m+a));m=m+a;const y=i.decode(e.slice(m,m+o));m=m+o;const _=i.decode(e.slice(m,m+u));m=m+u;const x=e.slice(m,e.byteLength),b=d===this.JSON_ENCODING?JSON.parse(i.decode(x)):x,w={type:this.BROADCAST_EVENT,event:y,payload:b};return u>0&&(w.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>t.includes(i)))}}class lv{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(mt||(mt={}));const cy=(r,e,t={})=>{var i;const a=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((o,u)=>(o[u]=ik(u,r,e,a),o),{}):{}},ik=(r,e,t,i)=>{const a=e.find(d=>d.name===r),o=a==null?void 0:a.type,u=t[r];return o&&!i.includes(o)?uv(o,u):wd(u)},uv=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return ok(e,t)}switch(r){case mt.bool:return rk(e);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return sk(e);case mt.json:case mt.jsonb:return ak(e);case mt.timestamp:return lk(e);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return wd(e);default:return wd(e)}},wd=r=>r,rk=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},sk=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},ak=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},ok=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,i=r[t];if(r[0]==="{"&&i==="}"){let o;const u=r.slice(1,t);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(d=>uv(e,d))}return r},lk=r=>typeof r=="string"?r.replace(" ","T"):r,cv=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Zc{constructor(e,t,i={},a=bd){this.channel=e,this.event=t,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dy;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(dy||(dy={}));class Ua{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ua.syncState(this.state,a,o,u),this.pendingDiffs.forEach(m=>{this.state=Ua.syncDiff(this.state,m,o,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ua.syncDiff(this.state,a,o,u),d())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,a){const o=this.cloneDeep(e),u=this.transformState(t),d={},m={};return this.map(o,(p,y)=>{u[p]||(m[p]=y)}),this.map(u,(p,y)=>{const _=o[p];if(_){const x=y.map(A=>A.presence_ref),b=_.map(A=>A.presence_ref),w=y.filter(A=>b.indexOf(A.presence_ref)<0),T=_.filter(A=>x.indexOf(A.presence_ref)<0);w.length>0&&(d[p]=w),T.length>0&&(m[p]=T)}else d[p]=y}),this.syncDiff(o,{joins:d,leaves:m},i,a)}static syncDiff(e,t,i,a){const{joins:o,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(d,m)=>{var p;const y=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(m),y.length>0){const _=e[d].map(b=>b.presence_ref),x=y.filter(b=>_.indexOf(b.presence_ref)<0);e[d].unshift(...x)}i(d,y,m)}),this.map(u,(d,m)=>{let p=e[d];if(!p)return;const y=m.map(_=>_.presence_ref);p=p.filter(_=>y.indexOf(_.presence_ref)<0),e[d]=p,a(d,p,m),p.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const a=e[i];return"metas"in a?t[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[i]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fy;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(fy||(fy={}));var La;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(La||(La={}));var pi;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(pi||(pi={}));class vs{constructor(e,t={config:{}},i){var a,o;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=Ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Zc(this,zn.join,this.params,this.timeout),this.rejoinTimer=new lv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ut.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Ua(this),this.broadcastEndpointURL=cv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ut.closed){const{config:{broadcast:u,presence:d,private:m}}=this.params,p=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[La.PRESENCE]&&this.bindings[La.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,_={},x={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(pi.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(pi.CLOSED)),this.updateJoinPayload(Object.assign({config:x},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e==null||e(pi.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,A=(w=T==null?void 0:T.length)!==null&&w!==void 0?w:0,k=[];for(let N=0;N<A;N++){const D=T[N],{filter:{event:I,schema:O,table:G,filter:j}}=D,ee=b&&b[N];if(ee&&ee.event===I&&vs.isFilterValueEqual(ee.schema,O)&&vs.isFilterValueEqual(ee.table,G)&&vs.isFilterValueEqual(ee.filter,j))k.push(Object.assign(Object.assign({},D),{id:ee.id}));else{this.unsubscribe(),this.state=Ut.errored,e==null||e(pi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(pi.SUBSCRIBED);return}}).receive("error",b=>{this.state=Ut.errored,e==null||e(pi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===Ut.joined&&e===La.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,i)}async httpSend(e,t,i={}){var a;if(t==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let m=d.statusText;try{const p=await d.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(e,t={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:u}=e,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,d,m;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ut.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Zc(this,zn.leave,{},e),i.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ut.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),u}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Zc(this,e,t,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tk){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var a,o;const u=e.toLocaleLowerCase(),{close:d,error:m,leave:p,join:y}=zn;if(i&&[d,m,p,y].indexOf(u)>=0&&i!==this._joinRef())return;let x=this._onMessage(u,t,i);if(t&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var w,T,A;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((A=(T=b.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(b=>b.callback(x,i)):(o=this.bindings[u])===null||o===void 0||o.filter(b=>{var w,T,A,k,N,D;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const I=b.id,O=(w=b.filter)===null||w===void 0?void 0:w.event;return I&&((T=t.ids)===null||T===void 0?void 0:T.includes(I))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((A=t.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const I=(N=(k=b==null?void 0:b.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return I==="*"||I===((D=t==null?void 0:t.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof x=="object"&&"ids"in x){const w=x.data,{schema:T,table:A,commit_timestamp:k,type:N,errors:D}=w;x=Object.assign(Object.assign({},{schema:T,table:A,commit_timestamp:k,eventType:N,new:{},old:{},errors:D}),this._getPayloadRecords(w))}b.callback(x,i)})}_isClosed(){return this.state===Ut.closed}_isJoined(){return this.state===Ut.joined}_isJoining(){return this.state===Ut.joining}_isLeaving(){return this.state===Ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&vs.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zn.close,{},e)}_onError(e){this._on(zn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=cy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=cy(e.columns,e.old_record)),t}}const Jc=()=>{},ul={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uk=[1e3,2e3,5e3,1e4],ck=1e4,dk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fk{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bd,this.transport=null,this.heartbeatIntervalMs=ul.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jc,this.ref=0,this.reconnectTimer=null,this.vsn=uy,this.logger=Jc,this.conn=null,this.sendBuffer=[],this.serializer=new nk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${xd.websocket}`,this.httpEndpoint=cv(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return vr.Connecting;case Vi.open:return vr.Open;case Vi.closing:return vr.Closing;default:return vr.Closed}}isConnected(){return this.connectionState()===vr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new vs(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:i,payload:a,ref:o}=e,u=()=>{this.encode(e,d=>{var m;(m=this.conn)===null||m===void 0||m.send(d)})};this.log("push",`${t} ${i} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ek,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ul.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",p)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:a,payload:o,ref:u}=t,d=u?`(${u})`:"",m=o.status||"";this.log("receive",`${m} ${i} ${a} ${d}`.trim(),o),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(a,o,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Vi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vi.open||this.conn.readyState===Vi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(zn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${i}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([dk],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,i=!1;if(e)t=e,i=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),t=this.accessTokenValue}else t=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const o={access_token:t,version:XA};t&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(zn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new lv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ul.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,a,o,u,d,m,p,y,_,x,b;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:bd,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:ul.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Jc,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:uy,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(w=>uk[w-1]||ck),this.vsn){case QA:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:((w,T)=>T(JSON.stringify(w))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((w,T)=>T(JSON.parse(w)));break;case ov:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var qa=class extends Error{constructor(r,e){var t;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hk(r,e,t){const i=new URL(e,r);if(t)for(const[a,o]of Object.entries(t))o!==void 0&&i.searchParams.set(a,o);return i.toString()}async function pk(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function mk(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:i,query:a,body:o,headers:u}){const d=hk(r.baseUrl,i,a),m=await pk(r.auth),p=await e(d,{method:t,headers:{...o?{"Content-Type":"application/json"}:{},...m,...u},body:o?JSON.stringify(o):void 0}),y=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),x=_&&y?JSON.parse(y):y;if(!p.ok){const b=_?x:void 0,w=b==null?void 0:b.error;throw new qa((w==null?void 0:w.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:b})}return{status:p.status,headers:p.headers,data:x}}}}function cl(r){return r.join("")}var gk=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:cl(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${cl(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cl(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${cl(r.namespace)}`}),!0}catch(e){if(e instanceof qa&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof qa&&t.status===409)return;throw t}}};function as(r){return r.join("")}var yk=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${as(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${as(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${as(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${as(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${as(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${as(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof qa&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof qa&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},vk=class{constructor(r){var i;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=mk({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(i=r.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new gk(this.client,e),this.tableOps=new yk(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}},Il=class extends Error{constructor(r,e="storage",t,i){super(r),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=i}};function Ol(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var dl=class extends Il{constructor(r,e,t,i="storage"){super(r,i,e,t),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},dv=class extends Il{constructor(r,e,t="storage"){super(r,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const _k=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),bk=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Td=r=>{if(Array.isArray(r))return r.map(t=>Td(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,i])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=Td(i)}),e},xk=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function Ga(r){"@babel/helpers - typeof";return Ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ga(r)}function wk(r,e){if(Ga(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(Ga(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Tk(r){var e=wk(r,"string");return Ga(e)=="symbol"?e:e+""}function Sk(r,e,t){return(e=Tk(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function hy(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function Be(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hy(Object(t),!0).forEach(function(i){Sk(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hy(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}const py=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},Ck=async(r,e,t,i)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const a=r,o=a.status||500;if(typeof a.json=="function")a.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";e(new dl(py(u),o,d,i))}).catch(()=>{if(i==="vectors"){const u=o+"";e(new dl(a.statusText||`HTTP ${o} error`,o,u,i))}else{const u=o+"";e(new dl(a.statusText||`HTTP ${o} error`,o,u,i))}});else{const u=o+"";e(new dl(a.statusText||`HTTP ${o} error`,o,u,i))}}else e(new dv(py(r),r,i))},Ek=(r,e,t,i)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||r==="HEAD"||!i?Be(Be({},a),t):(bk(i)?(a.headers=Be({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(i)):a.body=i,e!=null&&e.duplex&&(a.duplex=e.duplex),Be(Be({},a),t))};async function Na(r,e,t,i,a,o,u){return new Promise((d,m)=>{r(t,Ek(e,i,a,o)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;if(u==="vectors"){const y=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!y||!y.includes("application/json"))return{}}return p.json()}).then(p=>d(p)).catch(p=>Ck(p,m,i,u))})}function fv(r="storage"){return{get:async(e,t,i,a)=>Na(e,"GET",t,i,a,void 0,r),post:async(e,t,i,a,o)=>Na(e,"POST",t,a,o,i,r),put:async(e,t,i,a,o)=>Na(e,"PUT",t,a,o,i,r),head:async(e,t,i,a)=>Na(e,"HEAD",t,Be(Be({},i),{},{noResolveJson:!0}),a,void 0,r),remove:async(e,t,i,a,o)=>Na(e,"DELETE",t,a,o,i,r)}}const Ak=fv("storage"),{get:Fa,post:Pn,put:Sd,head:kk,remove:Vd}=Ak,mn=fv("vectors");var Ns=class{constructor(r,e={},t,i="storage"){this.shouldThrowOnError=!1,this.url=r,this.headers=e,this.fetch=_k(t),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(r){var e=this;try{return{data:await r(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ol(t))return{data:null,error:t};throw t}}},Rk=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e}then(r,e){return this.execute().then(r,e)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Ol(e))return{data:null,error:e};throw e}}};let hv;hv=Symbol.toStringTag;var Nk=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e,this[hv]="BlobDownloadBuilder",this.promise=null}asStream(){return new Rk(this.downloadFn,this.shouldThrowOnError)}then(r,e){return this.getPromise().then(r,e)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Ol(e))return{data:null,error:e};throw e}}};const Mk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},my={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Dk=class extends Ns{constructor(r,e={},t,i){super(r,e,i,"storage"),this.bucketId=t}async uploadOrUpdate(r,e,t,i){var a=this;return a.handleOperation(async()=>{let o;const u=Be(Be({},my),i);let d=Be(Be({},a.headers),r==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&t instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),m&&o.append("metadata",a.encodeMetadata(m)),o.append("",t)):typeof FormData<"u"&&t instanceof FormData?(o=t,o.has("cacheControl")||o.append("cacheControl",u.cacheControl),m&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(m))):(o=t,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,m&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(m))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!u.duplex&&(u.duplex="half")),i!=null&&i.headers&&(d=Be(Be({},d),i.headers));const p=a._removeEmptyFolders(e),y=a._getFinalPath(p),_=await(r=="PUT"?Sd:Pn)(a.fetch,`${a.url}/object/${y}`,o,Be({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{path:p,id:_.Id,fullPath:_.Key}})}async upload(r,e,t){return this.uploadOrUpdate("POST",r,e,t)}async uploadToSignedUrl(r,e,t,i){var a=this;const o=a._removeEmptyFolders(r),u=a._getFinalPath(o),d=new URL(a.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",e),a.handleOperation(async()=>{let m;const p=Be({upsert:my.upsert},i),y=Be(Be({},a.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&t instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",t)):typeof FormData<"u"&&t instanceof FormData?(m=t,m.append("cacheControl",p.cacheControl)):(m=t,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{path:o,fullPath:(await Sd(a.fetch,d.toString(),m,{headers:y})).Key}})}async createSignedUploadUrl(r,e){var t=this;return t.handleOperation(async()=>{let i=t._getFinalPath(r);const a=Be({},t.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const o=await Pn(t.fetch,`${t.url}/object/upload/sign/${i}`,{},{headers:a}),u=new URL(t.url+o.url),d=u.searchParams.get("token");if(!d)throw new Il("No token returned by API");return{signedUrl:u.toString(),path:r,token:d}})}async update(r,e,t){return this.uploadOrUpdate("PUT",r,e,t)}async move(r,e,t){var i=this;return i.handleOperation(async()=>await Pn(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:i.headers}))}async copy(r,e,t){var i=this;return i.handleOperation(async()=>({path:(await Pn(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(r,e,t){var i=this;return i.handleOperation(async()=>{let a=i._getFinalPath(r),o=await Pn(i.fetch,`${i.url}/object/sign/${a}`,Be({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:i.headers});const u=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${i.url}${o.signedURL}${u}`)}})}async createSignedUrls(r,e,t){var i=this;return i.handleOperation(async()=>{const a=await Pn(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:r},{headers:i.headers}),o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return a.map(u=>Be(Be({},u),{},{signedUrl:u.signedURL?encodeURI(`${i.url}${u.signedURL}${o}`):null}))})}download(r,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(r),u=()=>Fa(this.fetch,`${this.url}/${t}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new Nk(u,this.shouldThrowOnError)}async info(r){var e=this;const t=e._getFinalPath(r);return e.handleOperation(async()=>Td(await Fa(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(r){var e=this;const t=e._getFinalPath(r);try{return await kk(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ol(i)&&i instanceof dv){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}}getPublicUrl(r,e){const t=this._getFinalPath(r),i=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&i.push(a);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${t}${d}`)}}}async remove(r){var e=this;return e.handleOperation(async()=>await Vd(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:r},{headers:e.headers}))}async list(r,e,t){var i=this;return i.handleOperation(async()=>{const a=Be(Be(Be({},Mk),e),{},{prefix:r||""});return await Pn(i.fetch,`${i.url}/object/list/${i.bucketId}`,a,{headers:i.headers},t)})}async listV2(r,e){var t=this;return t.handleOperation(async()=>{const i=Be({},r);return await Pn(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,i,{headers:t.headers},e)})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}};const Ik="2.94.0",Za={"X-Client-Info":`storage-js/${Ik}`};var Ok=class extends Ns{constructor(r,e={},t,i){const a=new URL(r);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const o=a.href.replace(/\/$/,""),u=Be(Be({},Za),e);super(o,u,t,"storage")}async listBuckets(r){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(r);return await Fa(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(r){var e=this;return e.handleOperation(async()=>await Fa(e.fetch,`${e.url}/bucket/${r}`,{headers:e.headers}))}async createBucket(r,e={public:!1}){var t=this;return t.handleOperation(async()=>await Pn(t.fetch,`${t.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(r,e){var t=this;return t.handleOperation(async()=>await Sd(t.fetch,`${t.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(r){var e=this;return e.handleOperation(async()=>await Pn(e.fetch,`${e.url}/bucket/${r}/empty`,{},{headers:e.headers}))}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await Vd(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(r){const e={};return r&&("limit"in r&&(e.limit=String(r.limit)),"offset"in r&&(e.offset=String(r.offset)),r.search&&(e.search=r.search),r.sortColumn&&(e.sortColumn=r.sortColumn),r.sortOrder&&(e.sortOrder=r.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Uk=class extends Ns{constructor(r,e={},t){const i=r.replace(/\/$/,""),a=Be(Be({},Za),e);super(i,a,t,"storage")}async createBucket(r){var e=this;return e.handleOperation(async()=>await Pn(e.fetch,`${e.url}/bucket`,{name:r},{headers:e.headers}))}async listBuckets(r){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&t.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&t.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&t.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&t.set("sortOrder",r.sortOrder),r!=null&&r.search&&t.set("search",r.search);const i=t.toString(),a=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await Fa(e.fetch,a,{headers:e.headers})})}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await Vd(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}))}from(r){var e=this;if(!xk(r))throw new Il("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new vk({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(t,{get(a,o){const u=a[o];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(a,d),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}},Lk=class extends Ns{constructor(r,e={},t){const i=r.replace(/\/$/,""),a=Be(Be({},Za),{},{"Content-Type":"application/json"},e);super(i,a,t,"vectors")}async createIndex(r){var e=this;return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/CreateIndex`,r,{headers:e.headers})||{})}async getIndex(r,e){var t=this;return t.handleOperation(async()=>await mn.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers}))}async listIndexes(r){var e=this;return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/ListIndexes`,r,{headers:e.headers}))}async deleteIndex(r,e){var t=this;return t.handleOperation(async()=>await mn.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers})||{})}},Pk=class extends Ns{constructor(r,e={},t){const i=r.replace(/\/$/,""),a=Be(Be({},Za),{},{"Content-Type":"application/json"},e);super(i,a,t,"vectors")}async putVectors(r){var e=this;if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/PutVectors`,r,{headers:e.headers})||{})}async getVectors(r){var e=this;return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/GetVectors`,r,{headers:e.headers}))}async listVectors(r){var e=this;if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/ListVectors`,r,{headers:e.headers}))}async queryVectors(r){var e=this;return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/QueryVectors`,r,{headers:e.headers}))}async deleteVectors(r){var e=this;if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/DeleteVectors`,r,{headers:e.headers})||{})}},zk=class extends Ns{constructor(r,e={},t){const i=r.replace(/\/$/,""),a=Be(Be({},Za),{},{"Content-Type":"application/json"},e);super(i,a,t,"vectors")}async createBucket(r){var e=this;return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{})}async getBucket(r){var e=this;return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:r},{headers:e.headers}))}async listBuckets(r={}){var e=this;return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/ListVectorBuckets`,r,{headers:e.headers}))}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await mn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{})}},Bk=class extends zk{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new Vk(this.url,this.headers,r,this.fetch)}async createBucket(r){var e=()=>super.createBucket,t=this;return e().call(t,r)}async getBucket(r){var e=()=>super.getBucket,t=this;return e().call(t,r)}async listBuckets(r={}){var e=()=>super.listBuckets,t=this;return e().call(t,r)}async deleteBucket(r){var e=()=>super.deleteBucket,t=this;return e().call(t,r)}},Vk=class extends Lk{constructor(r,e,t,i){super(r,e,i),this.vectorBucketName=t}async createIndex(r){var e=()=>super.createIndex,t=this;return e().call(t,Be(Be({},r),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(r={}){var e=()=>super.listIndexes,t=this;return e().call(t,Be(Be({},r),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(r){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,r)}async deleteIndex(r){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,r)}index(r){return new qk(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},qk=class extends Pk{constructor(r,e,t,i,a){super(r,e,a),this.vectorBucketName=t,this.indexName=i}async putVectors(r){var e=()=>super.putVectors,t=this;return e().call(t,Be(Be({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(r){var e=()=>super.getVectors,t=this;return e().call(t,Be(Be({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(r={}){var e=()=>super.listVectors,t=this;return e().call(t,Be(Be({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(r){var e=()=>super.queryVectors,t=this;return e().call(t,Be(Be({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(r){var e=()=>super.deleteVectors,t=this;return e().call(t,Be(Be({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Gk=class extends Ok{constructor(r,e={},t,i){super(r,e,t,i)}from(r){return new Dk(this.url,this.headers,r,this.fetch)}get vectors(){return new Bk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Uk(this.url+"/iceberg",this.headers,this.fetch)}};const pv="2.94.0",ps=30*1e3,Cd=3,Wc=Cd*ps,Fk="http://localhost:9999",Hk="supabase.auth.token",jk={"X-Client-Info":`gotrue-js/${pv}`},Ed="X-Supabase-Api-Version",mv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$k=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Yk=600*1e3;class Ha extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function Ie(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Kk extends Ha{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function Zk(r){return Ie(r)&&r.name==="AuthApiError"}class _r extends Ha{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class gi extends Ha{constructor(e,t,i,a){super(e,i,a),this.name=t,this.status=i}}class pn extends gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xc(r){return Ie(r)&&r.name==="AuthSessionMissingError"}class os extends gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fl extends gi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hl extends gi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jk(r){return Ie(r)&&r.name==="AuthImplicitGrantRedirectError"}class gy extends gi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wk extends gi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ad extends gi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Qc(r){return Ie(r)&&r.name==="AuthRetryableFetchError"}class yy extends gi{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class kd extends gi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const El="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vy=` 	
\r=`.split(""),Xk=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<vy.length;e+=1)r[vy[e].charCodeAt(0)]=-2;for(let e=0;e<El.length;e+=1)r[El[e].charCodeAt(0)]=e;return r})();function _y(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(El[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(El[i]),e.queuedBits-=6}}function gv(r,e,t){const i=Xk[r];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function by(r){const e=[],t=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{tR(u,i,t)};for(let u=0;u<r.length;u+=1)gv(r.charCodeAt(u),a,o);return e.join("")}function Qk(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function eR(r,e){for(let t=0;t<r.length;t+=1){let i=r.charCodeAt(t);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}Qk(i,e)}}function tR(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let i=1;i<6;i+=1)if((r>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function xs(r){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)gv(r.charCodeAt(a),t,i);return new Uint8Array(e)}function nR(r){const e=[];return eR(r,t=>e.push(t)),new Uint8Array(e)}function br(r){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};return r.forEach(a=>_y(a,t,i)),_y(null,t,i),e.join("")}function iR(r){return Math.round(Date.now()/1e3)+r}function rR(){return Symbol("auth-callback")}const jt=()=>typeof window<"u"&&typeof document<"u",mr={tested:!1,writable:!1},yv=()=>{if(!jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mr.tested)return mr.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),mr.tested=!0,mr.writable=!0}catch{mr.tested=!0,mr.writable=!1}return mr.writable};function sR(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((i,a)=>{e[a]=i}),e}const vv=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),aR=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ms=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},gr=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ht=async(r,e)=>{await r.removeItem(e)};class Ul{constructor(){this.promise=new Ul.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ul.promiseConstructor=Promise;function pl(r){const e=r.split(".");if(e.length!==3)throw new kd("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!$k.test(e[i]))throw new kd("JWT not in base64url format");return{header:JSON.parse(by(e[0])),payload:JSON.parse(by(e[1])),signature:xs(e[2]),raw:{header:e[0],payload:e[1]}}}async function oR(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function lR(r,e){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await r(o);if(!e(o,null,u)){i(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function uR(r){return("0"+r.toString(16)).substr(-2)}function cR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,uR).join("")}async function dR(r){const t=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function fR(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await dR(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ls(r,e,t=!1){const i=cR();let a=i;t&&(a+="/PASSWORD_RECOVERY"),await ms(r,`${e}-code-verifier`,a);const o=await fR(i);return[o,i===o?"plain":"s256"]}const hR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pR(r){const e=r.headers.get(Ed);if(!e||!e.match(hR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mR(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function gR(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function us(r){if(!yR.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ed(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vR(r,e){return new Proxy(r,{get:(t,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,i,a)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,i,a)}})}function xy(r){return JSON.parse(JSON.stringify(r))}const yr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),_R=[502,503,504];async function wy(r){var e;if(!aR(r))throw new Ad(yr(r),0);if(_R.includes(r.status))throw new Ad(yr(r),r.status);let t;try{t=await r.json()}catch(o){throw new _r(yr(o),o)}let i;const a=pR(r);if(a&&a.getTime()>=mv["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new yy(yr(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new pn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new yy(yr(t),r.status,t.weak_password.reasons);throw new Kk(yr(t),r.status||500,i)}const bR=(r,e,t,i)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),t))};async function ze(r,e,t,i){var a;const o=Object.assign({},i==null?void 0:i.headers);o[Ed]||(o[Ed]=mv["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const u=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await xR(r,e,t+d,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(m):{data:Object.assign({},m),error:null}}async function xR(r,e,t,i,a,o){const u=bR(e,i,a,o);let d;try{d=await r(t,Object.assign({},u))}catch(m){throw console.error(m),new Ad(yr(m),0)}if(d.ok||await wy(d),i!=null&&i.noResolveJson)return d;try{return await d.json()}catch(m){await wy(m)}}function Ln(r){var e;let t=null;SR(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=iR(r.expires_in)));const i=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:i},error:null}}function Ty(r){const e=Ln(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=r.weak_password),e}function qi(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function wR(r){return{data:r,error:null}}function TR(r){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:o}=r,u=Dl(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:o},m=Object.assign({},u);return{data:{properties:d,user:m},error:null}}function Sy(r){return r}function SR(r){return r.access_token&&r.refresh_token&&r.expires_in}const td=["global","local","others"];class CR{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=vv(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=td[0]){if(td.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${td.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:qi})}catch(i){if(Ie(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=Dl(e,["options"]),a=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:TR,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ie(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qi})}catch(t){if(Ie(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,a,o,u,d,m;try{const p={nextPage:null,lastPage:0,total:0},y=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Sy});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(m=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(w=>{const T=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(w.split(";")[1].split("=")[1]);p[`${A}Page`]=T}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(Ie(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){us(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qi})}catch(t){if(Ie(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){us(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:qi})}catch(i){if(Ie(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){us(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:qi})}catch(i){if(Ie(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){us(e.userId);try{const{data:t,error:i}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:i}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _deleteFactor(e){us(e.userId),us(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,a,o,u,d,m;try{const p={nextPage:null,lastPage:0,total:0},y=await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Sy});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(m=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(w=>{const T=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(w.split(";")[1].split("=")[1]);p[`${A}Page`]=T}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(Ie(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await ze(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}}function Cy(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const cs={debug:!!(globalThis&&yv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _v extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ER extends _v{}async function AR(r,e,t){cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),cs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new ER(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(cs.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function kR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function bv(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function RR(r){return parseInt(r,16)}function NR(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function MR(r){var e;const{chainId:t,domain:i,expirationTime:a,issuedAt:o=new Date,nonce:u,notBefore:d,requestId:m,resources:p,scheme:y,uri:_,version:x}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const b=bv(r.address),w=y?`${y}://${i}`:i,T=r.statement?`${r.statement}
`:"",A=`${w} wants you to sign in with your Ethereum account:
${b}

${T}`;let k=`URI: ${_}
Version: ${x}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${o.toISOString()}`;if(a&&(k+=`
Expiration Time: ${a.toISOString()}`),d&&(k+=`
Not Before: ${d.toISOString()}`),m&&(k+=`
Request ID: ${m}`),p){let N=`
Resources:`;for(const D of p){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);N+=`
- ${D}`}k+=N}return`${A}
${k}`}class Nt extends Error{constructor({message:e,code:t,cause:i,name:a}){var o;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=a??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Al extends Nt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function DR({error:r,options:e}){var t,i,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Nt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(xv(u)){if(o.rp.id!==u)return new Nt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function IR({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Nt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const i=window.location.hostname;if(xv(i)){if(t.rpId!==i)return new Nt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class OR{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const UR=new OR;function LR(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:i}=r,a=Dl(r,["challenge","user","excludeCredentials"]),o=xs(e).buffer,u=Object.assign(Object.assign({},t),{id:xs(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:u});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];d.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:xs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function PR(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,i=Dl(r,["challenge","allowCredentials"]),a=xs(e).buffer,o=Object.assign(Object.assign({},i),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];o.allowCredentials[u]=Object.assign(Object.assign({},d),{id:xs(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function zR(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:br(new Uint8Array(r.response.attestationObject)),clientDataJSON:br(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function BR(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,i=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:br(new Uint8Array(a.authenticatorData)),clientDataJSON:br(new Uint8Array(a.clientDataJSON)),signature:br(new Uint8Array(a.signature)),userHandle:a.userHandle?br(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function xv(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Ey(){var r,e;return!!(jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function VR(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Al("Browser returned unexpected credential type",e)}:{data:null,error:new Al("Empty credential response",e)}}catch(e){return{data:null,error:DR({error:e,options:r})}}}async function qR(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Al("Browser returned unexpected credential type",e)}:{data:null,error:new Al("Empty credential response",e)}}catch(e){return{data:null,error:IR({error:e,options:r})}}}const GR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},FR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kl(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of r)if(a)for(const o in a){const u=a[o];if(u!==void 0)if(Array.isArray(u))i[o]=u;else if(t(u))i[o]=u;else if(e(u)){const d=i[o];e(d)?i[o]=kl(d,u):i[o]=kl(u)}else i[o]=u}return i}function HR(r,e){return kl(GR,r,e||{})}function jR(r,e){return kl(FR,r,e||{})}class $R{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:a},o){var u;try{const{data:d,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!d)return{data:null,error:m};const p=a??UR.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:y}=d.webauthn.credential_options.publicKey;if(!y.name){const _=i;if(_)y.name=`${y.id}:${_}`;else{const b=(await this.client.getUser()).data.user,w=((u=b==null?void 0:b.user_metadata)===null||u===void 0?void 0:u.name)||(b==null?void 0:b.email)||(b==null?void 0:b.id)||"User";y.name=`${y.id}:${w}`}}y.displayName||(y.displayName=y.name)}switch(d.webauthn.type){case"create":{const y=HR(d.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:_,error:x}=await VR({publicKey:y,signal:p});return _?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:_}},error:null}:{data:null,error:x}}case"request":{const y=jR(d.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:_,error:x}=await qR(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:y,signal:p}));return _?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:_}},error:null}:{data:null,error:x}}}}catch(d){return Ie(d)?{data:null,error:d}:{data:null,error:new _r("Unexpected error in challenge",d)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new Ha("rpId is required for WebAuthn authentication")};try{if(!Ey())return{data:null,error:new _r("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:a},{request:o});if(!u)return{data:null,error:d};const{webauthn:m}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:m.type,rpId:t,rpOrigins:i,credential_response:m.credential_response}})}catch(u){return Ie(u)?{data:null,error:u}:{data:null,error:new _r("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new Ha("rpId is required for WebAuthn registration")};try{if(!Ey())return{data:null,error:new _r("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(y=>{var _;return(_=y.data)===null||_===void 0?void 0:_.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:d};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:a},{create:o});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:t,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return Ie(u)?{data:null,error:u}:{data:null,error:new _r("Unexpected error in register",u)}}}}kR();const YR={url:Fk,storageKey:Hk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ay(r,e,t){return await t()}const ds={};class ja{get jwks(){var e,t;return(t=(e=ds[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ds[this.storageKey]=Object.assign(Object.assign({},ds[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ds[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ds[this.storageKey]=Object.assign(Object.assign({},ds[this.storageKey]),{cachedAt:e})}constructor(e){var t,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},YR),e);if(this.storageKey=o.storageKey,this.instanceID=(t=ja.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,ja.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&jt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new CR({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=vv(o.fetch),this.lock=o.lock||Ay,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&jt()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=AR:this.lock=Ay,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $R(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:yv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cy(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Cy(this.memoryStorage)),jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${pv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},i="none";if(jt()&&(t=sR(window.location.href),this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce")),jt()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Jk(o)){const m=(e=o.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:u,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ie(t)?this._returnResult({error:t}):this._returnResult({error:new _r("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,a;try{const o=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ln}),{data:u,error:d}=o;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(Ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,i,a;try{let o;if("email"in e){const{email:y,password:_,options:x}=e;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await ls(this.storage,this.storageKey)),o=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:y,password:_,data:(t=x==null?void 0:x.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:w},xform:Ln})}else if("phone"in e){const{phone:y,password:_,options:x}=e;o=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:_,data:(i=x==null?void 0:x.data)!==null&&i!==void 0?i:{},channel:(a=x==null?void 0:x.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Ln})}else throw new fl("You must provide either an email or phone number and a password");const{data:u,error:d}=o;if(d||!u)return await Ht(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),Ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:u,options:d}=e;t=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ty})}else if("phone"in e){const{phone:o,password:u,options:d}=e;t=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ty})}else throw new fl("You must provide either an email or phone number and a password");const{data:i,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const o=new os;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(t){if(Ie(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,i,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,i,a,o,u,d,m,p,y,_,x;let b,w;if("message"in e)b=e.message,w=e.signature;else{const{chain:T,wallet:A,statement:k,options:N}=e;let D;if(jt())if(typeof A=="object")D=A;else{const B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")D=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=A}const I=new URL((t=N==null?void 0:N.url)!==null&&t!==void 0?t:window.location.href),O=await D.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=bv(O[0]);let j=(i=N==null?void 0:N.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!j){const B=await D.request({method:"eth_chainId"});j=RR(B)}const ee={domain:I.host,address:G,statement:k,uri:I.href,version:"1",chainId:j,nonce:(a=N==null?void 0:N.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(o=N==null?void 0:N.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=N==null?void 0:N.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(m=N==null?void 0:N.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=N==null?void 0:N.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=N==null?void 0:N.signInWithEthereum)===null||y===void 0?void 0:y.resources};b=MR(ee),w=await D.request({method:"personal_sign",params:[NR(b),G]})}try{const{data:T,error:A}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:w},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ln});if(A)throw A;if(!T||!T.session||!T.user){const k=new os;return this._returnResult({data:{user:null,session:null},error:k})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:A})}catch(T){if(Ie(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(e){var t,i,a,o,u,d,m,p,y,_,x,b;let w,T;if("message"in e)w=e.message,T=e.signature;else{const{chain:A,wallet:k,statement:N,options:D}=e;let I;if(jt())if(typeof k=="object")I=k;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))I=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=k}const O=new URL((t=D==null?void 0:D.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in I&&I.signIn){const G=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D==null?void 0:D.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),N?{statement:N}:null));let j;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")j=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)j=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)w=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),T=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${O.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(a=(i=D==null?void 0:D.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=D==null?void 0:D.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((u=D==null?void 0:D.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((d=D==null?void 0:D.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((m=D==null?void 0:D.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((p=D==null?void 0:D.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((_=(y=D==null?void 0:D.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||_===void 0)&&_.length?["Resources",...D.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const G=await I.signMessage(new TextEncoder().encode(w),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=G}}try{const{data:A,error:k}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:br(T)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ln});if(k)throw k;if(!A||!A.session||!A.user){const N=new os;return this._returnResult({data:{user:null,session:null},error:N})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:k})}catch(A){if(Ie(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(e){const t=await gr(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(t??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Wk;const{data:o,error:u}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Ln});if(await Ht(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!o||!o.session||!o.user){const d=new os;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),Ie(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:i,token:a,access_token:o,nonce:u}=e,d=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ln}),{data:m,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new os;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(t){if(Ie(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,i,a,o,u;try{if("email"in e){const{email:d,options:m}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await ls(this.storage,this.storageKey));const{error:_}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:d,options:m}=e,{data:p,error:y}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(o=m==null?void 0:m.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(u=m==null?void 0:m.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new fl("You must provide either an email or phone number.")}catch(d){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),Ie(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var t,i;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Ln});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(a){if(Ie(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,i,a,o,u;try{let d=null,m=null;this.flowType==="pkce"&&([d,m]=await ls(this.storage,this.storageKey));const p=await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:m}),headers:this.headers,xform:wR});return!((o=p.data)===null||o===void 0)&&o.url&&jt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(d){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),Ie(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new pn;const{error:a}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:o}=e,{error:u}=await ze(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:i,type:a,options:o}=e,{data:u,error:d}=await ze(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new fl("You must provide either an email or phone number and a type")}catch(t){if(Ie(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Wc:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await gr(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=ed()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=vR(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qi}):await this._useSession(async t=>{var i,a,o;const{data:u,error:d}=t;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pn}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:qi})})}catch(t){if(Ie(t))return Xc(t)&&(await this._removeSession(),await Ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new pn;const u=a.session;let d=null,m=null;this.flowType==="pkce"&&e.email!=null&&([d,m]=await ls(this.storage,this.storageKey));const{data:p,error:y}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:m}),jwt:u.access_token,xform:qi});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),Ie(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pn;const t=Date.now()/1e3;let i=t,a=!0,o=null;const{payload:u}=pl(e.access_token);if(u.exp&&(i=u.exp,a=i<=t),a){const{data:d,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:m}=await this._getUser(e.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(Ie(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new pn;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Ie(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!jt())throw new hl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new hl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new gy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gy("No code detected.");const{data:N,error:D}=await this._exchangeCodeForSession(e.code);if(D)throw D;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:d,expires_at:m,token_type:p}=e;if(!o||!d||!u||!p)throw new hl("No session defined in URL");const y=Math.round(Date.now()/1e3),_=parseInt(d);let x=y+_;m&&(x=parseInt(m));const b=x-y;b*1e3<=ps&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${_}s`);const w=x-_;y-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,x,y):y-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,x,y);const{data:T,error:A}=await this._getUser(o);if(A)throw A;const k={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:_,expires_at:x,refresh_token:u,token_type:p,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:e.type},error:null})}catch(i){if(Ie(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:a,error:o}=t;if(o&&!Xc(o))return this._returnResult({error:o});const u=(i=a.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(Zk(d)&&(d.status===404||d.status===401||d.status===403)||Xc(d)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=rR(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,a;try{const{data:{session:o},error:u}=t;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await ls(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),Ie(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:a}=await this._useSession(async o=>{var u,d,m,p,y;const{data:_,error:x}=o;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",b,{headers:this.headers,jwt:(y=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return jt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Ie(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:u,provider:d,token:m,access_token:p,nonce:y}=e,_=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o==null?void 0:o.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ln}),{data:x,error:b}=_;return b?this._returnResult({data:{user:null,session:null},error:b}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new os}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:b}))}catch(a){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),Ie(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,a;const{data:o,error:u}=t;if(u)throw u;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await lR(async a=>(a>0&&await oR(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ln})),(a,o)=>{const u=200*Math.pow(2,a);return o&&Qc(o)&&Date.now()+u-i<ps})}catch(i){if(this._debug(t,"error",i),Ie(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),jt()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await gr(this.storage,this.storageKey);if(a&&this.userStorage){let u=await gr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await ms(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:ed()}else if(a&&!a.user&&!a.user){const u=await gr(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(a.user=u.user,await Ht(this.storage,this.storageKey+"-user"),await ms(this.storage,this.storageKey,a)):a.user=ed()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Wc;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Wc}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Qc(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(a.access_token);!d&&(u!=null&&u.user)?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ul;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new pn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),Ie(o)){const u={data:null,error:o};return Qc(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(m){o.push(m)}});if(await Promise.all(u),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ht(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await ms(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=xy(a);await ms(this.storage,this.storageKey,o)}else{const a=xy(t);await ms(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ht(this.storage,this.storageKey),await Ht(this.storage,this.storageKey+"-code-verifier"),await Ht(this.storage,this.storageKey+"-user"),this.userStorage&&await Ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ps);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/ps);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ps}ms, refresh threshold is ${Cd} ticks`),a<=Cd&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _v)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const a=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,u]=await ls(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(d.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:a,error:o}=t;return o?this._returnResult({data:null,error:o}):await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,a;const{data:o,error:u}=t;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&m.type==="totp"&&(!((a=m==null?void 0:m.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?zR(e.webauthn.credential_response):BR(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:m}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:m}))})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const u=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:LR(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:PR(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,i,a,o;if(e)try{const{payload:b}=pl(e);let w=null;b.aal&&(w=b.aal);let T=w;const{data:{user:A},error:k}=await this.getUser(e);if(k)return this._returnResult({data:null,error:k});((i=(t=A==null?void 0:A.factors)===null||t===void 0?void 0:t.filter(I=>I.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(T="aal2");const D=b.amr||[];return{data:{currentLevel:w,nextLevel:T,currentAuthenticationMethods:D},error:null}}catch(b){if(Ie(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=pl(u.access_token);let p=null;m.aal&&(p=m.aal);let y=p;((o=(a=u.user.factors)===null||a===void 0?void 0:a.filter(b=>b.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(y="aal2");const x=m.amr||[];return{data:{currentLevel:p,nextLevel:y,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:i},error:a}=t;return a?this._returnResult({data:null,error:a}):i?await ze(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new pn})})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new pn});const u=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&jt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(Ie(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new pn});const u=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&jt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(Ie(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;return i?this._returnResult({data:null,error:i}):t?await ze(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new pn})})}catch(e){if(Ie(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:i},error:a}=t;return a?this._returnResult({data:null,error:a}):i?(await ze(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pn})})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(d=>d.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(d=>d.kid===e),i&&this.jwks_cached_at+Yk>a)return i;const{data:o,error:u}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(d=>d.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:b,error:w}=await this.getSession();if(w||!b.session)return this._returnResult({data:null,error:w});i=b.session.access_token}const{header:a,payload:o,signature:u,raw:{header:d,payload:m}}=pl(i);t!=null&&t.allowExpired||mR(o.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:o,header:a,signature:u},error:null}}const y=gR(a.alg),_=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,_,u,nR(`${d}.${m}`)))throw new kd("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(i){if(Ie(i))return this._returnResult({data:null,error:i});throw i}}}ja.nextInstanceID={};const KR=ja,ZR="2.94.0";let Ia="";typeof Deno<"u"?Ia="deno":typeof document<"u"?Ia="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ia="react-native":Ia="node";const JR={"X-Client-Info":`supabase-js-${Ia}/${ZR}`},WR={headers:JR},XR={schema:"public"},QR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e2={};function $a(r){"@babel/helpers - typeof";return $a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$a(r)}function t2(r,e){if($a(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if($a(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function n2(r){var e=t2(r,"string");return $a(e)=="symbol"?e:e+""}function i2(r,e,t){return(e=n2(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ky(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function St(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ky(Object(t),!0).forEach(function(i){i2(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ky(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}const r2=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),s2=()=>Headers,a2=(r,e,t)=>{const i=r2(t),a=s2();return async(o,u)=>{var d;const m=(d=await e())!==null&&d!==void 0?d:r;let p=new a(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),i(o,St(St({},u),{},{headers:p}))}};function o2(r){return r.endsWith("/")?r:r+"/"}function l2(r,e){var t,i;const{db:a,auth:o,realtime:u,global:d}=r,{db:m,auth:p,realtime:y,global:_}=e,x={db:St(St({},m),a),auth:St(St({},p),o),realtime:St(St({},y),u),storage:{},global:St(St(St({},_),d),{},{headers:St(St({},(t=_==null?void 0:_.headers)!==null&&t!==void 0?t:{}),(i=d==null?void 0:d.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return r.accessToken?x.accessToken=r.accessToken:delete x.accessToken,x}function u2(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(o2(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var c2=class extends KR{constructor(r){super(r)}},d2=class{constructor(r,e,t){var i,a;this.supabaseUrl=r,this.supabaseKey=e;const o=u2(r);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:XR,realtime:e2,auth:St(St({},QR),{},{storageKey:u}),global:WR},m=l2(t??{},d);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=m.global.headers)!==null&&a!==void 0?a:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=a2(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(St({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new ZA(new URL("rest/v1",o).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new Gk(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new qA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,e,t)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,e,t;if(r.accessToken)return await r.accessToken();const{data:i}=await r.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:a,storageKey:o,flowType:u,lock:d,debug:m,throwOnError:p},y,_){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c2({url:this.authUrl.href,headers:St(St({},x),y),storageKey:o,autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:a,flowType:u,lock:d,debug:m,throwOnError:p,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new fk(this.realtimeUrl.href,St(St({},r),{},{params:St(St({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,e)=>{this._handleTokenChanged(r,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(r,e,t){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const f2=(r,e,t)=>new d2(r,e,t);function h2(){if(typeof window<"u")return!1;const r=globalThis.process;if(!r)return!1;const e=r.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}h2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const p2="https://mgnsrucxgxpyrejwfqvs.supabase.co",m2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1nbnNydWN4Z3hweXJlandmcXZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMzcwOTQsImV4cCI6MjA4NTcxMzA5NH0.wlz1w5hae_yIIzXg86suQ02p2v6D0gdzAKSSGLpx_vI",en=f2(p2,m2),g2=({onAuthSuccess:r})=>{const[e,t]=ke.useState(!1),[i,a]=ke.useState(""),[o,u]=ke.useState(""),[d,m]=ke.useState(null),[p,y]=ke.useState(null),[_,x]=ke.useState(!1),b=async w=>{w.preventDefault(),t(!0),m(null),y(null);try{if(_){const{error:T}=await en.auth.resetPasswordForEmail(i,{redirectTo:window.location.origin});if(T)throw T;y("Email de recuperacin enviado. Revisa tu bandeja de entrada.")}else{const{error:T}=await en.auth.signInWithPassword({email:i,password:o});if(T)throw T;r()}}catch(T){m(T.message)}finally{t(!1)}};return S.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4 md:p-6",children:S.jsxs("div",{className:"bg-white rounded-[32px] md:rounded-[40px] shadow-2xl overflow-hidden max-w-5xl w-full flex flex-col md:flex-row shadow-indigo-500/20",children:[S.jsxs("div",{className:"hidden md:flex md:w-5/12 bg-indigo-600 p-10 flex-col text-white relative overflow-hidden",children:[S.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),S.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-900/20 rounded-full translate-y-1/3 -translate-x-1/3 blur-3xl"}),S.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[S.jsxs("div",{children:[S.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-md rounded-xl flex items-center justify-center mb-6 border border-white/30",children:S.jsx("i",{className:"fa-solid fa-microphone-lines text-2xl"})}),S.jsx("h2",{className:"text-3xl font-black leading-tight mb-4",children:"Tu Estudio de Narracin IA"}),S.jsx("p",{className:"text-indigo-100 text-sm font-medium leading-relaxed opacity-90",children:"Transforma textos y libros completos en audiolibros ultra-realistas con la potencia de Gemini 2.5."})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-500 flex items-center justify-center text-xs",children:S.jsx("i",{className:"fa-solid fa-check"})}),S.jsx("span",{className:"text-sm font-bold",children:"Voces Neuronales Humanas"})]}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-500 flex items-center justify-center text-xs",children:S.jsx("i",{className:"fa-solid fa-check"})}),S.jsx("span",{className:"text-sm font-bold",children:"Clonacin de Emociones"})]}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-500 flex items-center justify-center text-xs",children:S.jsx("i",{className:"fa-solid fa-check"})}),S.jsx("span",{className:"text-sm font-bold",children:"Exportacin Masiva (.Zip)"})]})]}),S.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest opacity-60",children:" 2026 Voces Libres Studio"})]})]}),S.jsx("div",{className:"flex-1 p-8 md:p-12 lg:p-16 flex flex-col justify-center bg-white relative",children:S.jsxs("div",{className:"max-w-sm mx-auto w-full space-y-6",children:[S.jsxs("div",{className:"text-center md:text-left",children:[S.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:_?"Recuperar Contrasea":"Acceso Privado"}),S.jsx("p",{className:"text-slate-500 font-medium",children:_?"Ingresa tu correo para recibir un enlace de recuperacin.":"Ingresa tus credenciales para acceder al estudio."})]}),d&&S.jsxs("div",{className:"bg-red-50 border border-red-100 p-4 rounded-xl flex items-start gap-3 animate-in fade-in slide-in-from-top-2",children:[S.jsx("i",{className:"fa-solid fa-circle-exclamation text-red-500 mt-1 shrink-0"}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("p",{className:"text-xs text-red-600 font-bold",children:d}),(d.includes("Failed to fetch")||d.includes("placeholder"))&&S.jsx("p",{className:"text-[10px] text-red-500 font-medium leading-tight mt-1",children:"Faltan claves en Cloudflare Pages (`VITE_SUPABASE_URL`, etc)."})]})]}),p&&S.jsxs("div",{className:"bg-green-50 border border-green-100 p-4 rounded-xl flex items-start gap-3 animate-in fade-in slide-in-from-top-2",children:[S.jsx("i",{className:"fa-solid fa-check-circle text-green-500 mt-1"}),S.jsx("p",{className:"text-xs text-green-600 font-bold",children:p})]}),S.jsxs("form",{onSubmit:b,className:"space-y-5",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest pl-1",children:"Correo Electrnico"}),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:S.jsx("i",{className:"fa-solid fa-envelope"})}),S.jsx("input",{type:"email",value:i,onChange:w=>a(w.target.value),className:"w-full pl-11 pr-4 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:border-indigo-600 focus:bg-white outline-none font-bold text-slate-700 transition-all placeholder:text-slate-300",placeholder:"usuario@estudio.com",required:!0})]})]}),!_&&S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest pl-1",children:"Contrasea"}),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:S.jsx("i",{className:"fa-solid fa-lock"})}),S.jsx("input",{type:"password",value:o,onChange:w=>u(w.target.value),className:"w-full pl-11 pr-4 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:border-indigo-600 focus:bg-white outline-none font-bold text-slate-700 transition-all placeholder:text-slate-300",placeholder:"",required:!_})]}),S.jsx("div",{className:"text-right",children:S.jsx("button",{type:"button",onClick:()=>x(!0),className:"text-[11px] font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wide",children:"Olvidaste tu contrasea?"})})]}),S.jsxs("button",{type:"submit",disabled:e,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-lg shadow-xl shadow-indigo-200 hover:shadow-indigo-300 hover:-translate-y-1 transition-all flex items-center justify-center gap-3",children:[e?S.jsx("i",{className:"fa-solid fa-circle-notch animate-spin"}):S.jsx("i",{className:`fa-solid ${_?"fa-paper-plane":"fa-arrow-right-to-bracket"}`}),e?"PROCESANDO...":_?"ENVIAR ENLACE":"INGRESAR AL ESTUDIO"]}),_&&S.jsx("button",{type:"button",onClick:()=>x(!1),className:"w-full py-4 text-slate-400 font-bold text-sm uppercase tracking-widest hover:text-slate-600 transition-colors",children:"Volver al login"})]})]})})]})})},Ry={async uploadNarration(r,e){var t;try{const{data:{user:i}}=await en.auth.getUser();if(!i)return null;const a=`${i.id}/${Date.now()}_${Math.random().toString(36).substr(2,9)}.wav`,{error:o}=await en.storage.from("narrations").upload(a,r,{contentType:"audio/wav",upsert:!1});if(o)throw o;const{data:{publicUrl:u}}=en.storage.from("narrations").getPublicUrl(a),{data:d,error:m}=await en.from("narrations").insert({user_id:i.id,project_title:e.projectTitle||"Sin Ttulo",text_content:e.text,audio_path:a,voice_id:e.voiceId,emotion:e.emotion}).select().single();if(m)throw m;const p=((t=Ba.find(y=>y.id===e.voiceId))==null?void 0:t.name)||e.voiceId;return{id:d.id,audioUrl:u,timestamp:new Date(d.created_at).getTime(),text:e.text,voiceName:p}}catch(i){return console.error("Cloud Sync Error:",i),null}},async fetchUserNarrations(){try{const{data:{user:r}}=await en.auth.getUser();if(!r)return[];const{data:e,error:t}=await en.from("narrations").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});if(t)throw t;return e.map(i=>{var d;const{data:{publicUrl:a}}=en.storage.from("narrations").getPublicUrl(i.audio_path),o=((d=Ba.find(m=>m.id===i.voice_id))==null?void 0:d.name)||i.voice_id,u=typeof o=="string"?o:"Voz Desconocida";return{id:i.id,audioUrl:a,timestamp:new Date(i.created_at).getTime(),text:i.text_content||"",voiceName:u,storagePath:i.audio_path}})}catch(r){return console.error("Fetch Cloud Error:",r),[]}},async deleteNarration(r,e){try{const{error:t}=await en.from("narrations").delete().eq("id",r);if(t)throw t;if(e){const{error:i}=await en.storage.from("narrations").remove([e]);i&&console.warn("Storage delete warning:",i)}return!0}catch(t){return console.error("Delete Error:",t),!1}}},y2=({onClose:r})=>{const[e,t]=ke.useState(""),[i,a]=ke.useState(!1),[o,u]=ke.useState(null),[d,m]=ke.useState(null),p=async y=>{y.preventDefault(),a(!0),m(null);try{const{error:_}=await en.auth.updateUser({password:e});if(_)throw _;u("Contrasea actualizada correctamente. Redirigiendo..."),setTimeout(()=>{r(),window.location.hash=""},2e3)}catch(_){m(_.message)}finally{a(!1)}};return S.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[150] flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full shadow-2xl animate-in zoom-in-95 duration-200",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsx("div",{className:"w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto text-2xl mb-4",children:S.jsx("i",{className:"fa-solid fa-key"})}),S.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Nueva Contrasea"}),S.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Ingresa tu nueva contrasea para recuperar el acceso a tu cuenta."})]}),d&&S.jsxs("div",{className:"bg-red-50 text-red-600 text-xs font-bold p-3 rounded-xl mb-4 flex gap-2 items-center",children:[S.jsx("i",{className:"fa-solid fa-circle-exclamation"}),d]}),o&&S.jsxs("div",{className:"bg-green-50 text-green-600 text-xs font-bold p-3 rounded-xl mb-4 flex gap-2 items-center",children:[S.jsx("i",{className:"fa-solid fa-check-circle"}),o]}),S.jsxs("form",{onSubmit:p,className:"space-y-4",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:S.jsx("i",{className:"fa-solid fa-lock"})}),S.jsx("input",{type:"password",value:e,onChange:y=>t(y.target.value),className:"w-full pl-11 pr-4 py-3 bg-slate-50 border-2 border-slate-100 rounded-xl focus:border-indigo-600 outline-none font-bold text-slate-700 placeholder:text-slate-300",placeholder:"Nueva contrasea...",required:!0,minLength:6})]}),S.jsx("button",{type:"submit",disabled:i,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 transition-all",children:i?S.jsx("i",{className:"fa-solid fa-spinner animate-spin"}):"Actualizar Contrasea"}),S.jsx("button",{type:"button",onClick:r,className:"w-full py-2 text-slate-400 text-xs font-bold hover:text-slate-600 mt-2",children:"Cancelar"})]})]})})},v2=({initialTitle:r="",initialAuthor:e="",emotion:t="Neutral",onClose:i})=>{const[a,o]=ke.useState(r),[u,d]=ke.useState(e),[m,p]=ke.useState("Cinematic"),[y,_]=ke.useState(!1),[x,b]=ke.useState(null),[w,T]=ke.useState(null),A=ke.useRef(null),k=["Cinematic","Abstract Art","Oil Painting","Minimalist","Fantasy","Dark Noir"],N=async()=>{_(!0),b(null);try{const I=`Professional book cover illustration for "${a}", emotion: "${t}", style: ${m}. High resolution, 1:1 square. IMPORTANT: NO text, NO letters, NO characters in the image. Create only the visual background artwork. The title will be overlayed separately.`,O=await rv.generateImage(I);T(O)}catch(I){b(I.message||"Error generando imagen")}finally{_(!1)}};ke.useEffect(()=>{if(!A.current||!w)return;const I=A.current,O=I.getContext("2d");if(!O)return;const G=new Image;G.crossOrigin="anonymous",G.src=w,G.onload=()=>{O.drawImage(G,0,0,I.width,I.height);const j=O.createLinearGradient(0,0,0,I.height);j.addColorStop(0,"rgba(0,0,0,0.1)"),j.addColorStop(.5,"rgba(0,0,0,0)"),j.addColorStop(.8,"rgba(0,0,0,0.6)"),j.addColorStop(1,"rgba(0,0,0,0.9)"),O.fillStyle=j,O.fillRect(0,0,I.width,I.height);const ee=I.width/2;O.shadowColor="black",O.shadowBlur=10,O.fillStyle="white",O.textAlign="center",O.textBaseline="bottom";const B=a.length>20?60:80;O.font=`bold ${B}px "Inter", sans-serif`;const Z=I.width-60,ve=a.split(" ");let q="";I.height-120;const Q=B+10;O.font='500 30px "Inter", sans-serif',O.fillStyle="#e0e7ff",O.fillText(u.toUpperCase(),ee,I.height-40),O.font=`900 ${B}px "Inter", sans-serif`,O.fillStyle="white";const R=[];for(let se=0;se<ve.length;se++){const te=q+ve[se]+" ";O.measureText(te).width>Z&&se>0?(R.push(q),q=ve[se]+" "):q=te}R.push(q);let re=I.height-100-R.length*Q;R.forEach((se,te)=>{O.fillText(se.trim(),ee,re+te*Q+Q)})}},[w,a,u]);const D=()=>{if(!A.current)return;const I=document.createElement("a");I.download="cover1.webp",I.href=A.current.toDataURL("image/webp",.9),I.click()};return S.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl flex flex-col md:flex-row overflow-hidden animate-in zoom-in-95",children:[S.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-8 space-y-6 bg-slate-50 border-b md:border-b-0 md:border-r border-slate-200",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h3",{className:"text-xl font-black text-slate-900 leading-tight",children:"Diseador de Portadas"}),S.jsx("button",{onClick:i,className:"md:hidden w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center",children:S.jsx("i",{className:"fa-solid fa-xmark"})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Ttulo del Libro"}),S.jsx("input",{type:"text",value:a,onChange:I=>o(I.target.value),className:"w-full mt-1 p-3 rounded-xl border border-slate-200 text-sm font-bold bg-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Autor"}),S.jsx("input",{type:"text",value:u,onChange:I=>d(I.target.value),className:"w-full mt-1 p-3 rounded-xl border border-slate-200 text-sm font-bold bg-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Estilo Visual"}),S.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1",children:k.map(I=>S.jsx("button",{onClick:()=>p(I),className:`px-3 py-2 rounded-lg text-xs font-bold border transition-all ${m===I?"bg-indigo-600 text-white border-indigo-600":"bg-white border-slate-200 text-slate-500 hover:border-indigo-300"}`,children:I},I))})]})]}),x&&S.jsx("p",{className:"text-xs text-red-600 font-bold bg-red-50 p-3 rounded-lg",children:x}),S.jsx("button",{onClick:N,disabled:y,className:`w-full py-4 rounded-xl font-black shadow-lg flex items-center justify-center gap-2 text-sm uppercase tracking-wider text-white transition-all ${y?"bg-indigo-400":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:shadow-indigo-500/30"}`,children:y?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-spinner animate-spin"})," Creando..."]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-wand-magic-sparkles"})," Generar Arte IA"]})})]}),S.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-8 flex flex-col items-center justify-center bg-slate-900 relative",children:[S.jsx("button",{onClick:i,className:"hidden md:flex absolute top-4 right-4 w-8 h-8 rounded-full bg-white/10 text-white hover:bg-white/20 items-center justify-center transition-colors",children:S.jsx("i",{className:"fa-solid fa-xmark"})}),S.jsxs("div",{className:"relative shadow-2xl rounded-lg overflow-hidden group",children:[S.jsx("canvas",{ref:A,width:1024,height:1024,className:"w-full max-w-[320px] aspect-square bg-white object-cover"}),!w&&S.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-800 text-slate-500 flex-col gap-2",children:[S.jsx("i",{className:"fa-solid fa-image text-4xl"}),S.jsx("span",{className:"text-xs font-bold uppercase",children:"Vista Previa"})]})]}),w&&S.jsxs("button",{onClick:D,className:"mt-8 px-8 py-3 bg-white text-slate-900 rounded-full font-bold shadow-lg hover:scale-105 transition-transform flex items-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-download"})," Descargar Portada"]})]})]})})},_2=()=>{var Nn,Jt,Vn,lt;const[r,e]=ke.useState(!1),[t,i]=ke.useState(""),[a,o]=ke.useState(""),[u,d]=ke.useState(Ba[0].id),[m,p]=ke.useState(ry[0]),[y,_]=ke.useState(!1),[x,b]=ke.useState(!1),[w,T]=ke.useState(null),[A,k]=ke.useState(null),[N,D]=ke.useState(null),[I,O]=ke.useState(""),[G,j]=ke.useState(!0),[ee,B]=ke.useState([]),[Z,ve]=ke.useState(0),[q,Q]=ke.useState(null),[R,re]=ke.useState("text"),[se,te]=ke.useState(""),[ye,ue]=ke.useState(""),[L,V]=ke.useState([]),[F,he]=ke.useState(null),[ie,ce]=ke.useState({current:0,total:0}),Ae=ke.useRef(null),[qe,Ce]=ke.useState(null),[Le,Fe]=ke.useState(!0),[nt,Ct]=ke.useState(!1),[bt,E]=ke.useState(!1),[le,ne]=ke.useState(!1),[P,U]=ke.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark":!1);ke.useEffect(()=>{P?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[P]),ke.useEffect(()=>{en.auth.getSession().then(({data:{session:Se}})=>{Ce(Se),Fe(!1)});const{data:{subscription:ge}}=en.auth.onAuthStateChange((Se,Ee)=>{Ce(Ee),Se==="PASSWORD_RECOVERY"&&E(!0)});return()=>ge.unsubscribe()},[]),ke.useEffect(()=>{(async()=>{try{const Se=await Ra.loadState();Se.text!==void 0&&i(Se.text),Se.projectTitle!==void 0&&o(Se.projectTitle),Se.voiceId!==void 0&&d(Se.voiceId),Se.emotion!==void 0&&p(Se.emotion),Se.mode!==void 0&&re(Se.mode),Se.bookTitle!==void 0&&te(Se.bookTitle),Se.bookAuthor!==void 0&&ue(Se.bookAuthor||""),Se.chapters!==void 0&&V(Se.chapters),Se.history!==void 0&&B(Se.history),Se.projectCharCount!==void 0&&ve(Se.projectCharCount)}catch(Se){console.error("Error cargando persistencia local:",Se)}finally{e(!0)}})()},[]),ke.useEffect(()=>{(async()=>{qe!=null&&qe.user&&Ry.fetchUserNarrations().then(Se=>{Se.length>0&&B(Ee=>{const $e=[...Se,...Ee];return Array.from(new Map($e.map(dt=>[dt.id,dt])).values()).sort((dt,ln)=>ln.timestamp-dt.timestamp)})})})()},[qe]),ke.useEffect(()=>{if(!r)return;const Se=setTimeout(async()=>{await Ra.saveState({text:t,projectTitle:a,voiceId:u,emotion:m,mode:R,bookTitle:se,bookAuthor:ye,history:ee,chapters:L,projectCharCount:Z})},1e3);return()=>clearTimeout(Se)},[t,a,u,m,R,se,ye,ee,L,r,Z]);const Y=ke.useMemo(()=>{const ge=L.reduce(($e,Qe)=>{var dt;return $e+(((dt=Qe.segments)==null?void 0:dt.reduce((ln,Dt)=>ln+Dt.content.length,0))||0)},0),Se=R==="epub"?ge:t.length,Ee=Se/1e3*.3;return{totalChars:Se,costGemini:0,savings:Ee,accumChars:Z,accumCost:0}},[L,t,R,Z]),fe=async(ge,Se)=>{var Ee,$e;if(!y){_(!0),T(Se),Q(null);try{let Qe="",dt="";if(ge==="manual")Qe=t,dt=a||"Produccin Manual";else{const Lt=L.find(Mn=>Mn.id===ge),Gn=(Ee=Lt==null?void 0:Lt.segments)==null?void 0:Ee.find(Mn=>Mn.id===Se);Gn&&(Qe=Gn.content,dt=Lt.title)}if(!Qe.trim())return;const ln=await rv.generateNarration(Qe,u,m,(Lt,Gn)=>ce({current:Lt,total:Gn}));ve(Lt=>Lt+Qe.length);const Dt=(($e=Ba.find(Lt=>Lt.id===u))==null?void 0:$e.name)||"Voz";let Wt=ln;const qn=[{id:Date.now().toString()+Math.random().toString(36).substr(2,5),audioUrl:Wt,timestamp:Date.now(),text:`[${dt}] ${Qe.substring(0,50)}...`,voiceName:Dt},...ee];B(qn);let Ms=[...L];ge!=="manual"&&(Ms=L.map(Lt=>{var Gn;return Lt.id!==ge?Lt:{...Lt,segments:(Gn=Lt.segments)==null?void 0:Gn.map(Mn=>Mn.id===Se?{...Mn,audioUrl:ln,status:"completed"}:Mn)}}),V(Ms)),await Ra.saveState({history:qn,chapters:Ms})}catch(Qe){Q({message:Qe.message,isQuota:Qe.message.includes("429")})}finally{_(!1),T(null),ce({current:0,total:0})}}},pe=(ge,Se)=>{D(ge),O(Se)},W=(ge,Se)=>{const Ee=L.map($e=>{var Qe;return $e.id!==ge?$e:{...$e,segments:(Qe=$e.segments)==null?void 0:Qe.map(dt=>dt.id!==Se?dt:{...dt,content:I})}});V(Ee),D(null),O("")},_e=()=>{D(null),O("")},we=async ge=>{if(!ge.segments||ge.segments.length===0)return;const Se=ge.segments.filter(Ee=>Ee.status==="completed"&&Ee.audioUrl);if(Se.length===0){alert("No hay audios generados en este captulo.");return}if(!(Se.length!==ge.segments.length&&!confirm(`Solo hay ${Se.length} de ${ge.segments.length} fragmentos narrados. Deseas descargar el captulo incompleto?`))){k(ge.id);try{const Ee=new(window.AudioContext||window.webkitAudioContext),$e=[];for(const Wt of Se){if(!Wt.audioUrl)continue;const $i=await(await fetch(Wt.audioUrl)).arrayBuffer(),qn=await Ee.decodeAudioData($i);$e.push(qn)}const Qe=Pd($e,Ee),dt=zd(Qe),ln=URL.createObjectURL(dt),Dt=document.createElement("a");Dt.href=ln,Dt.download=`Capitulo_${(ge.title||"audio").replace(/[^a-z0-9]/gi,"_").substring(0,30)}.wav`,document.body.appendChild(Dt),Dt.click(),document.body.removeChild(Dt)}catch(Ee){console.error("Error merging audio:",Ee),alert("Error al unir los audios del captulo. Asegrate de que los audios estn cargados correctamente.")}finally{k(null)}}},xe=ge=>{confirm("Eliminar este captulo de la produccin?")&&(V(L.filter(Se=>Se.id!==ge)),F===ge&&he(null))},Oe=async()=>{if(ee.length!==0){b(!0);try{const ge=new sv,Se=ge.folder("narraciones_libroteca");for(const dt of ee){const Dt=await(await fetch(dt.audioUrl)).blob();Se==null||Se.file(`${dt.voiceName}_${dt.id}.wav`,Dt)}const Ee=await ge.generateAsync({type:"blob"}),$e=URL.createObjectURL(Ee),Qe=document.createElement("a");Qe.href=$e,Qe.download=`Produccion_${se||"Manual"}_${Date.now()}.zip`,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe)}catch(ge){console.error("Error al exportar ZIP:",ge)}finally{b(!1)}}},ot=async ge=>{var Ee;const Se=(Ee=ge.target.files)==null?void 0:Ee[0];if(Se){_(!0),Q(null);try{const{title:$e,author:Qe,chapters:dt}=await AA.parseEpub(Se);te($e),ue(Qe||"Autor Desconocido"),V(dt),re("epub")}catch($e){Q({message:"Error al leer ePub: "+$e.message})}finally{_(!1),ge.target&&(ge.target.value="")}}},Ye=async()=>{confirm("Borrar todo el estudio de produccin actual?")&&(await Ra.clearAll(),window.location.reload())};if(!r||Le)return S.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center text-white gap-4 p-6 text-center",children:[S.jsx("i",{className:"fa-solid fa-compact-disc animate-spin text-4xl text-indigo-500"}),S.jsx("span",{className:"text-xs font-bold uppercase tracking-[0.3em]",children:Le?"Verificando Credenciales...":"Sincronizando Estudio..."})]});if(!qe)return S.jsx(g2,{onAuthSuccess:()=>{}});const $t=async(ge,Se)=>{if(confirm("Ests seguro de eliminar este audio? Esta accin no se puede deshacer de la nube."))if(B($e=>$e.filter(Qe=>Qe.id!==ge)),!await Ry.deleteNarration(ge,Se))alert("Hubo un error al eliminar de la nube, pero se ha ocultado localmente.");else{const $e=ee.filter(Qe=>Qe.id!==ge);Ra.saveState({history:$e}).catch(console.error)}};return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 flex flex-col transition-colors duration-300",children:[y&&w==="manual"&&S.jsxs("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex flex-col items-center justify-center text-white gap-6 p-6",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"w-24 h-24 border-4 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin"}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsx("i",{className:"fa-solid fa-microphone-lines text-2xl animate-pulse text-indigo-400"})})]}),S.jsxs("div",{className:"text-center space-y-2",children:[S.jsx("h3",{className:"text-xl font-black uppercase tracking-widest",children:"Narrando Maestro"}),S.jsx("p",{className:"text-xs text-indigo-300 font-bold",children:"Procesando audio de alta fidelidad..."}),ie.total>0&&S.jsx("div",{className:"mt-4 w-64 bg-slate-800 h-1.5 rounded-full overflow-hidden mx-auto",children:S.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500",style:{width:`${ie.current/ie.total*100}%`}})})]})]}),S.jsx("header",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-4 md:px-6 py-4 sticky top-0 z-50 shadow-sm transition-colors duration-300",children:S.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[S.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[S.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shrink-0",children:S.jsx("i",{className:"fa-solid fa-microphone-lines text-sm md:text-base"})}),S.jsxs("div",{className:"hidden xs:block",children:[S.jsx("h1",{className:"text-sm md:text-lg font-bold leading-none text-slate-900 dark:text-white",children:"Libroteca"}),S.jsx("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Estudio"})]})]}),S.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 overflow-x-auto no-scrollbar",children:[S.jsxs("button",{onClick:()=>re("text"),className:`px-3 md:px-4 py-2 rounded-lg text-[11px] md:text-xs font-bold transition-all whitespace-nowrap ${R==="text"?"bg-indigo-50 text-indigo-600":"text-slate-500 hover:bg-slate-100"}`,children:[S.jsx("i",{className:"fa-solid fa-pen-to-square sm:hidden"}),S.jsx("span",{className:"hidden sm:inline",children:"Texto Libre"})]}),S.jsxs("button",{onClick:()=>re("epub"),className:`px-3 md:px-4 py-2 rounded-lg text-[11px] md:text-xs font-bold transition-all whitespace-nowrap ${R==="epub"?"bg-indigo-50 text-indigo-600":"text-slate-500 hover:bg-slate-100"}`,children:[S.jsx("i",{className:"fa-solid fa-book sm:hidden"}),S.jsx("span",{className:"hidden sm:inline",children:"Libro Maestro"})]}),S.jsxs("button",{onClick:()=>re("merger"),className:`px-3 md:px-4 py-2 rounded-lg text-[11px] md:text-xs font-bold transition-all whitespace-nowrap ${R==="merger"?"bg-purple-50 text-purple-600":"text-slate-500 hover:bg-slate-100"}`,children:[S.jsx("i",{className:"fa-solid fa-layer-group sm:hidden"}),S.jsx("span",{className:"hidden sm:inline",children:"Fusin"})]}),S.jsxs("button",{onClick:()=>re("image-creator"),className:`px-3 md:px-4 py-2 rounded-lg text-[11px] md:text-xs font-bold transition-all whitespace-nowrap ${R==="image-creator"?"bg-indigo-50 text-indigo-600":"text-slate-500 hover:bg-slate-100"}`,children:[S.jsx("i",{className:"fa-solid fa-paintbrush sm:hidden"}),S.jsx("span",{className:"hidden sm:inline",children:"Creador Imgenes"})]}),S.jsxs("button",{onClick:()=>ne(!0),className:"px-3 md:px-4 py-2 rounded-lg bg-gradient-to-r from-purple-500 to-indigo-600 text-white text-[11px] md:text-xs font-bold shadow-md hover:shadow-lg transition-all whitespace-nowrap flex items-center gap-2",title:"Crear Portada IA",children:[S.jsx("i",{className:"fa-solid fa-wand-magic-sparkles"}),S.jsx("span",{className:"hidden sm:inline",children:"Portada IA"})]}),S.jsx("button",{onClick:()=>j(!G),className:`w-8 h-8 md:w-9 md:h-9 flex items-center justify-center rounded-lg transition-colors shrink-0 ${G?"bg-indigo-600 text-white":"bg-slate-100 text-slate-400"}`,title:"Panel de Monitor",children:S.jsx("i",{className:"fa-solid fa-chart-column text-xs md:text-base"})}),S.jsx("button",{onClick:()=>{var ge;return(ge=Ae.current)==null?void 0:ge.click()},className:"w-8 h-8 md:w-9 md:h-9 flex items-center justify-center rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-100 shrink-0",title:"Importar ePub",children:S.jsx("i",{className:"fa-solid fa-file-import text-xs md:text-base"})}),S.jsx("input",{type:"file",ref:Ae,className:"hidden",accept:".epub",onChange:ot}),S.jsx("button",{onClick:Ye,className:"w-8 h-8 md:w-9 md:h-9 flex items-center justify-center rounded-lg bg-slate-100 text-slate-400 hover:text-red-600 shrink-0",title:"Limpiar todo",children:S.jsx("i",{className:"fa-solid fa-trash-can text-xs md:text-base"})}),S.jsx("button",{onClick:()=>U(!P),className:"w-8 h-8 md:w-9 md:h-9 flex items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-indigo-400 hover:bg-slate-200 dark:hover:bg-slate-700 shrink-0 transition-colors",title:P?"Modo Claro":"Modo Oscuro",children:S.jsx("i",{className:`fa-solid ${P?"fa-sun":"fa-moon"} text-xs md:text-base`})}),S.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1 md:mx-2 shrink-0"}),S.jsx("button",{onClick:()=>Ct(!0),className:"w-8 h-8 md:w-9 md:h-9 flex items-center justify-center rounded-lg bg-slate-100 text-slate-500 hover:bg-slate-200 shrink-0",title:"Mi Cuenta",children:S.jsx("i",{className:"fa-solid fa-user-gear text-xs md:text-base"})})]})]})}),S.jsxs("main",{className:"max-w-7xl mx-auto w-full p-4 md:p-6 grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8",children:[S.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[G&&Y.totalChars>0&&S.jsx("div",{className:"bg-slate-900 dark:bg-slate-800 text-white rounded-2xl md:rounded-3xl p-5 md:p-6 shadow-xl animate-in slide-in-from-top duration-300 border border-transparent dark:border-slate-700",children:S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-slate-400",children:"Volumen Narrativo"}),S.jsxs("p",{className:"text-xl md:text-2xl font-black mt-1",children:[Y.totalChars.toLocaleString()," ",S.jsx("span",{className:"text-[9px] md:text-[10px] opacity-40",children:"CARACT."})]})]}),S.jsxs("div",{className:"sm:border-l sm:border-slate-700/50 sm:pl-6",children:[S.jsx("p",{className:"text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-indigo-400",children:"Inversin Actual"}),S.jsxs("p",{className:"text-xl md:text-2xl font-black mt-1 text-indigo-400",children:["$",Y.costGemini.toLocaleString("en-US",{minimumFractionDigits:4})]}),S.jsx("p",{className:"text-[8px] text-slate-500 mt-1 uppercase font-bold",children:"Estimado del Texto"})]}),S.jsxs("div",{className:"sm:border-l sm:border-slate-700/50 sm:pl-6 bg-slate-800/50 rounded-xl p-2 sm:bg-transparent sm:p-0",children:[S.jsx("p",{className:"text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-green-400",children:"Gasto Real Proyecto"}),S.jsxs("p",{className:"text-xl md:text-2xl font-black mt-1 text-green-400",children:["$",Y.accumCost.toLocaleString("en-US",{minimumFractionDigits:4})]}),S.jsxs("p",{className:"text-[8px] text-slate-500 mt-1 uppercase font-bold",children:[Y.accumChars.toLocaleString()," Caract. Procesados"]})]}),S.jsxs("div",{className:"bg-indigo-600/10 rounded-xl md:rounded-2xl p-3 md:p-4 border border-indigo-500/20",children:[S.jsx("p",{className:"text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-indigo-200",children:"Ahorro Estimado"}),S.jsxs("p",{className:"text-base md:text-lg font-bold mt-1 text-indigo-100",children:["$",Y.savings.toFixed(2)," USD"]})]})]})}),q&&S.jsx("div",{className:"bg-red-50 border border-red-100 p-4 md:p-5 rounded-2xl animate-in fade-in",children:S.jsxs("div",{className:"flex gap-3 md:gap-4",children:[S.jsx("i",{className:"fa-solid fa-circle-exclamation text-red-600 text-lg md:text-xl"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-xs md:text-sm font-bold text-red-900",children:q.message}),S.jsx("button",{onClick:()=>Q(null),className:"text-[10px] md:text-xs text-red-600 font-bold underline mt-2",children:"Cerrar error"})]})]})}),R==="merger"?S.jsx(IA,{}):R==="image-creator"?S.jsx(PA,{}):R==="text"?S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 md:p-6 rounded-2xl md:rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm space-y-4 transition-colors duration-300",children:[S.jsx("input",{type:"text",value:a,onChange:ge=>o(ge.target.value),placeholder:"Ttulo de la obra o captulo...",className:"w-full px-4 md:px-5 py-3 md:py-4 rounded-xl md:rounded-2xl bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-700 focus:border-indigo-500 outline-none font-bold text-sm md:text-base dark:text-white transition-colors"}),S.jsx("textarea",{value:t,onChange:ge=>i(ge.target.value),placeholder:"Pega aqu el texto que deseas narrar...",className:"w-full h-64 md:h-80 p-4 md:p-6 rounded-xl md:rounded-2xl bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-700 focus:border-indigo-500 outline-none font-medium resize-none custom-scrollbar text-sm md:text-base dark:text-slate-300 transition-colors"}),S.jsxs("button",{onClick:()=>fe("manual","manual"),disabled:y||!t,className:`w-full py-4 md:py-5 rounded-xl md:rounded-2xl font-bold shadow-lg transition-all flex items-center justify-center gap-3 text-sm md:text-base ${y?"bg-indigo-400":"bg-indigo-600 hover:bg-indigo-700"} text-white`,children:[y&&S.jsx("i",{className:"fa-solid fa-spinner animate-spin"}),y?"NARRANDO MAESTRO...":"GENERAR AUDIO MAESTRO"]})]}):S.jsx("div",{className:"space-y-4",children:L.length===0?S.jsxs("div",{className:"bg-white p-10 md:p-20 rounded-2xl md:rounded-3xl border border-dashed border-slate-300 text-center space-y-4",children:[S.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-indigo-50 text-indigo-400 rounded-full flex items-center justify-center mx-auto text-2xl md:text-3xl",children:S.jsx("i",{className:"fa-solid fa-book-open-reader"})}),S.jsx("h3",{className:"text-lg md:text-xl font-bold text-slate-900",children:"Importa un libro ePub para narrar"}),S.jsx("p",{className:"text-xs text-slate-400 max-w-xs mx-auto",children:"He filtrado ndices y metadatos automticamente. Carga un archivo para comenzar."}),S.jsx("button",{onClick:()=>{var ge;return(ge=Ae.current)==null?void 0:ge.click()},className:"px-6 md:px-8 py-2.5 md:py-3 bg-indigo-600 text-white rounded-xl md:rounded-2xl font-bold shadow-lg text-sm",children:"Cargar Libro"})]}):S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 md:p-8 rounded-2xl md:rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col gap-4 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[S.jsx("div",{className:"w-12 h-16 md:w-16 md:h-20 bg-indigo-600 rounded-lg shadow-md flex items-center justify-center text-white text-xl md:text-2xl shrink-0",children:S.jsx("i",{className:"fa-solid fa-book"})}),S.jsxs("div",{className:"min-w-0",children:[S.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white leading-tight truncate",children:se}),S.jsx("p",{className:"text-xs md:text-sm font-bold text-indigo-600 uppercase tracking-widest mt-1 truncate",children:ye})]})]}),S.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[S.jsxs("span",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase bg-slate-100 px-2 py-0.5 rounded-full",children:[L.length," CAPTULOS"]}),S.jsxs("span",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase bg-slate-100 px-2 py-0.5 rounded-full",children:[L.reduce((ge,Se)=>{var Ee;return ge+(((Ee=Se.segments)==null?void 0:Ee.length)||0)},0)," FRAGMENTOS"]})]})]}),L.map(ge=>{var Se;return S.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl md:rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden transition-all",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsxs("button",{onClick:()=>he(F===ge.id?null:ge.id),className:"flex-1 flex items-center justify-between p-4 md:p-5 hover:bg-slate-50 dark:hover:bg-slate-700/50 text-left min-w-0",children:[S.jsxs("div",{className:"flex items-center gap-3 md:gap-4 min-w-0",children:[S.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-lg md:rounded-xl flex items-center justify-center shrink-0 ${F===ge.id?"bg-indigo-600 text-white shadow-md":"bg-slate-100 text-slate-400"}`,children:S.jsx("i",{className:"fa-solid fa-list-ol text-xs md:text-base"})}),S.jsx("h3",{className:"font-bold text-xs md:text-sm text-slate-800 dark:text-slate-200 truncate",children:ge.title})]}),S.jsx("i",{className:`fa-solid fa-chevron-right text-[10px] md:text-xs transition-transform shrink-0 ml-2 ${F===ge.id?"rotate-90 text-indigo-600":"text-slate-200"}`})]}),S.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),we(ge)},disabled:A===ge.id,className:"p-4 md:p-5 text-indigo-500 hover:text-indigo-700 hover:bg-indigo-50 transition-colors border-l border-slate-50 relative",title:"Descargar Captulo Completo (.WAV)",children:A===ge.id?S.jsx("i",{className:"fa-solid fa-circle-notch animate-spin text-xs md:text-sm"}):S.jsx("i",{className:"fa-solid fa-file-audio text-xs md:text-sm"})}),S.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),xe(ge.id)},className:"p-4 md:p-5 text-slate-300 hover:text-red-500 transition-colors border-l border-slate-50",title:"Eliminar captulo",children:S.jsx("i",{className:"fa-solid fa-trash-can text-xs md:text-sm"})})]}),F===ge.id&&S.jsx("div",{className:"p-4 md:p-6 pt-0 border-t border-slate-100 dark:border-slate-700 space-y-4 md:space-y-6 bg-white dark:bg-slate-800",children:(Se=ge.segments)==null?void 0:Se.map((Ee,$e)=>S.jsxs("div",{className:`bg-slate-50 dark:bg-slate-900/50 p-4 md:p-5 rounded-xl md:rounded-2xl border transition-all ${w===Ee.id?"border-indigo-500 ring-2 ring-indigo-100 bg-indigo-50/30":"border-slate-200 dark:border-slate-700 hover:border-indigo-200"}`,children:[S.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[S.jsxs("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:["FRAGMENTO ",$e+1," ",S.jsx("span",{className:"text-slate-300 mx-1",children:"|"})," ",Ee.content.length.toLocaleString()," CARACT."]}),S.jsxs("div",{className:"flex items-center gap-2",children:[N===Ee.id?S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:()=>W(ge.id,Ee.id),className:"px-3 py-2 bg-green-500 hover:bg-green-600 text-white text-[10px] font-bold rounded-lg transition-colors",title:"Guardar cambios",children:S.jsx("i",{className:"fa-solid fa-check"})}),S.jsx("button",{onClick:_e,className:"px-3 py-2 bg-slate-200 hover:bg-slate-300 text-slate-600 text-[10px] font-bold rounded-lg transition-colors",title:"Cancelar",children:S.jsx("i",{className:"fa-solid fa-xmark"})})]}):S.jsx("button",{onClick:()=>pe(Ee.id,Ee.content),className:"px-3 py-2 bg-white border border-slate-200 hover:border-indigo-400 text-slate-400 hover:text-indigo-600 text-[10px] font-bold rounded-lg transition-colors",title:"Editar texto",children:S.jsx("i",{className:"fa-solid fa-pen"})}),S.jsx("button",{onClick:()=>fe(ge.id,Ee.id),disabled:y||N===Ee.id,className:`px-4 md:px-6 py-2 border text-[10px] font-bold rounded-lg md:rounded-xl shadow-sm transition-all flex items-center justify-center gap-2 ${w===Ee.id?"bg-indigo-600 border-indigo-600 text-white animate-pulse":"bg-white border-slate-200 hover:border-indigo-600 text-slate-700"}`,children:w===Ee.id?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-circle-notch animate-spin"})," NARRANDO..."]}):Ee.status==="completed"?"REGENERAR AUDIO":"NARRAR FRAGMENTO"})]})]}),S.jsxs("div",{className:"relative",children:[N===Ee.id?S.jsx("textarea",{value:I,onChange:Qe=>O(Qe.target.value),className:"w-full bg-white border-2 border-indigo-500 p-3 md:p-4 text-xs text-slate-800 rounded-lg md:rounded-xl outline-none font-medium h-28 md:h-32 custom-scrollbar resize-none shadow-inner",autoFocus:!0}):S.jsx("textarea",{value:Ee.content,readOnly:!0,className:"w-full bg-white border border-slate-100 p-3 md:p-4 text-xs text-slate-600 rounded-lg md:rounded-xl outline-none font-medium h-28 md:h-32 custom-scrollbar resize-none"}),w===Ee.id&&S.jsx("div",{className:"absolute inset-0 bg-white/40 flex items-center justify-center rounded-lg md:rounded-xl backdrop-blur-[1px]",children:S.jsxs("div",{className:"flex flex-col items-center gap-2",children:[S.jsxs("div",{className:"flex gap-1",children:[S.jsx("div",{className:"w-1.5 h-6 bg-indigo-500 rounded-full animate-[bounce_1s_infinite]"}),S.jsx("div",{className:"w-1.5 h-6 bg-indigo-500 rounded-full animate-[bounce_1s_infinite_0.1s]"}),S.jsx("div",{className:"w-1.5 h-6 bg-indigo-500 rounded-full animate-[bounce_1s_infinite_0.2s]"}),S.jsx("div",{className:"w-1.5 h-6 bg-indigo-500 rounded-full animate-[bounce_1s_infinite_0.3s]"})]}),S.jsx("span",{className:"text-[9px] font-black text-indigo-700 uppercase tracking-tighter",children:"Capturando Emocin..."})]})})]}),Ee.audioUrl&&S.jsxs("div",{className:"mt-4 bg-white p-2 md:p-3 rounded-xl border border-slate-100 flex items-center gap-2 md:gap-3 shadow-sm",children:[S.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full bg-green-50 text-green-600 flex items-center justify-center shrink-0",children:S.jsx("i",{className:"fa-solid fa-check text-[10px] md:text-xs"})}),S.jsx("audio",{src:Ee.audioUrl,controls:!0,className:"h-8 w-full"})]})]},Ee.id))})]},ge.id)})]})}),S.jsxs("section",{className:"bg-white dark:bg-slate-800 p-5 md:p-8 rounded-[32px] md:rounded-[40px] border border-slate-200 dark:border-slate-700 shadow-sm space-y-6 md:space-y-8 transition-colors",children:[S.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[S.jsx("div",{className:"w-8 h-8 md:w-9 md:h-9 bg-indigo-50 text-indigo-600 rounded-lg flex items-center justify-center text-sm shrink-0",children:S.jsx("i",{className:"fa-solid fa-headset"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-sm md:text-base font-black text-slate-900 dark:text-white leading-tight",children:"Elenco de Narracin Gratuito"}),S.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium mt-1",children:"Selecciona la voz ideal para tu proyecto."})]})]}),S.jsx(MA,{selectedId:u,onSelect:d}),S.jsxs("div",{className:"pt-6 border-t border-slate-100",children:[S.jsx("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4",children:"Clima Emocional"}),S.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3",children:ry.map(ge=>S.jsx("button",{onClick:()=>p(ge),className:`px-3 md:px-5 py-2 md:py-2.5 rounded-xl md:rounded-2xl text-[10px] md:text-xs font-bold border transition-all ${m===ge?"bg-indigo-600 border-indigo-600 text-white shadow-lg -translate-y-0.5":"bg-slate-50 border-slate-200 text-slate-500 hover:border-slate-300 hover:bg-white"}`,children:ge},ge))})]})]})]}),S.jsx("div",{className:"lg:col-span-4",children:S.jsx("aside",{className:"lg:sticky lg:top-24 space-y-6 flex flex-col h-auto lg:h-[calc(100vh-120px)]",children:S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 md:p-6 rounded-2xl md:rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col h-full overflow-hidden transition-colors",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h3",{className:"text-xs md:text-sm font-black text-slate-900 dark:text-white uppercase tracking-widest",children:"Producciones"}),S.jsx("span",{className:"bg-indigo-600 text-white px-2 py-0.5 md:px-2.5 md:py-1 rounded-lg text-[9px] md:text-[10px] font-bold shadow-sm",children:ee.length})]}),ee.length>0&&S.jsxs("button",{onClick:Oe,disabled:x,className:"w-full mb-6 py-3 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-indigo-100 transition-colors border border-indigo-100",children:[x?S.jsx("i",{className:"fa-solid fa-spinner animate-spin"}):S.jsx("i",{className:"fa-solid fa-file-zipper"}),x?"Empaquetando...":"Exportar a PC (.ZIP)"]}),S.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 pr-1 custom-scrollbar min-h-[300px]",children:ee.length===0?S.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-20 text-center py-10",children:[S.jsx("i",{className:"fa-solid fa-compact-disc text-5xl md:text-6xl mb-4 animate-spin-slow"}),S.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Sin producciones"})]}):ee.map(ge=>S.jsx(DA,{item:ge,onDelete:$t},ge.id))})]})})})]}),S.jsx("footer",{className:"p-6 md:p-8 text-center text-slate-400 text-[9px] md:text-[10px] font-bold uppercase tracking-[0.2em] mt-auto",children:"PRODUCIDO CON GEMINI FLASH 2.5  VOCES LIBRES  2026"})]}),nt&&S.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:()=>Ct(!1),children:S.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 md:p-8 max-w-sm w-full shadow-2xl animate-in zoom-in-95 duration-200",onClick:ge=>ge.stopPropagation(),children:[S.jsxs("div",{className:"flex items-center justify-between mb-6",children:[S.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Mi Cuenta"}),S.jsx("button",{onClick:()=>Ct(!1),className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600 flex items-center justify-center transition-colors",children:S.jsx("i",{className:"fa-solid fa-xmark"})})]}),S.jsxs("div",{className:"text-center space-y-4 mb-8",children:[S.jsx("div",{className:"w-20 h-20 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto text-3xl",children:S.jsx("i",{className:"fa-solid fa-user"})}),S.jsx("div",{children:S.jsx("p",{className:"font-bold text-slate-900 dark:text-white truncate px-4",title:(Nn=qe==null?void 0:qe.user)==null?void 0:Nn.email,children:(Jt=qe==null?void 0:qe.user)==null?void 0:Jt.email})})]}),S.jsx("div",{className:"space-y-3",children:S.jsxs("button",{onClick:()=>{Ct(!1),en.auth.signOut()},className:"w-full py-3 bg-slate-100 dark:bg-slate-700 hover:bg-red-50 dark:hover:bg-red-900/30 text-slate-600 dark:text-slate-300 hover:text-red-600 rounded-xl font-bold text-sm transition-colors flex items-center justify-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-right-from-bracket"})," Cerrar Sesin"]})}),S.jsxs("p",{className:"text-[10px] text-center text-slate-400 mt-6 font-medium",children:["ID: ",S.jsxs("span",{className:"font-mono",children:[(lt=(Vn=qe==null?void 0:qe.user)==null?void 0:Vn.id)==null?void 0:lt.substring(0,8),"..."]})]})]})}),le&&S.jsx(v2,{initialTitle:a||se,initialAuthor:ye,emotion:m,onClose:()=>ne(!1)}),bt&&S.jsx(y2,{onClose:()=>E(!1)})]})};try{const r=document.getElementById("root");if(!r)throw new Error("No se encontr el elemento raz");H_.createRoot(r).render(S.jsx(L_.StrictMode,{children:S.jsx(_2,{})}))}catch(r){console.error("Error crtico de inicializacin:",r),document.body.innerHTML=`<div style="padding: 20px; color: red; font-family: sans-serif;">
    <h2>Error al cargar la aplicacin</h2>
    <p>${r.message}</p>
    <p>Verifica la consola del navegador para ms detalles.</p>
  </div>`}
